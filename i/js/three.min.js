// threejs.org/license
(function(l,ya){"object"===typeof exports&&"undefined"!==typeof module?ya(exports):"function"===typeof define&&define.amd?define(["exports"],ya):ya(l.THREE={})})(this,function(l){function ya(){}function z(a,b){this.x=a||0;this.y=b||0}function I(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("three.matrix4: 0="==c.minFilter&&(c.minFilter=1006);this.texture=new" the constructor no longer reads arguments. use .set() instead.")}function fa(a,b,c,d){this._x="a||0;this._y=b||0;this._z=c||0;this._w=void" 0!="=d?d:1}function" p(a, b,c){this.x="a||0;this.y=b||0;this.z=c||0}function" ra(){this.elements="[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3:" t(a,b,c,d,e,f,g,h,k,m){object.defineproperty(this,"id",{value:ef++});this.uuid="H.generateUUID();this.name="";this.image=void" e?e:1006;this.minfilter="void" z(0,0);this.repeat="new" z(1,1);this.center="new" z(0,0);this.rotation="0;this.matrixAutoUpdate=!0;this.matrix=new" ra;this.generatemipmaps="!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void" v(a,b,c,d){this.x="a||0;this.y=b||0;this.z=c||0;this.w=void" fb(a, b,c){this.width="a;this.height=b;this.scissor=new" v(0,0,a,b);this.scissortest="!1;this.viewport=new" v(0,0,a,b);c="c||{};void" t(void 0,void 0,c.wraps,c.wrapt,c.magfilter,c.minfilter,c.format,c.type,c.anisotropy,c.encoding);this.texture.generatemipmaps="void" c.depthtexture:null}function gb(a,b,c){fb.call(this,a,b,c);this.activemipmaplevel="this.activeCubeFace=0}function" gb(a,b,c,d,e,f,g,h,k,m,q,n){t.call(this,null,f,g,h,k,m,d,e,q,n);this.image="{data:a,width:b,height:c};this.magFilter=void" sa(a,b){this.min="void" p(infinity,infinity,infinity);this.max="void" p(-infinity,-infinity,-infinity)}function da(a,b){this.center="void" a?a:new p;this.radius="void" ma(a,b){this.normal="void" p(1,0,0);this.constant="void" md(a,b,c,d,e,f){this.planes="[void" ma,void ma]}function g(a,b,c){return void qd(){function a(e,f){!1!="=c&&(d(e,f),b.requestAnimationFrame(a))}var" b="null,c=!1,d=null;return{start:function(){!0!==c&&null!==d&&(b.requestAnimationFrame(a)," c="!0)},stop:function(){c=!1},setAnimationLoop:function(a){d=a},setContext:function(a){b=a}}}function" ff(a){function b(b,c){var d="b.array,e=b.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW,h=a.createBuffer();a.bindBuffer(c,h);a.bufferData(c,d,e);b.onUploadCallback();c=a.FLOAT;d" instanceof float32array?c="a.FLOAT:d" float64array?console.warn("three.webglattributes: unsupported data buffer format: float64array."):d uint16array?c="a.UNSIGNED_SHORT:d" int16array?c="a.SHORT:d" uint32array?c="a.UNSIGNED_INT:d" int32array?c="a.INT:d" int8array?c="a.BYTE:d" uint8array&&(c="a.UNSIGNED_BYTE);return{buffer:h,type:c,bytesPerElement:d.BYTES_PER_ELEMENT,version:b.version}}var" weakmap;return{get:function(a){a.isinterleavedbufferattribute&&(a="a.data);return" c.get(a)},remove:function(b){b.isinterleavedbufferattribute&&(b="b.data);var" var f="c.get(d);if(void" if(f.version<d.version){var g="d,h=g.array,k=g.updateRange;a.bindBuffer(e,f.buffer);!1===g.dynamic?a.bufferData(e,h,a.STATIC_DRAW):-1===k.count?a.bufferSubData(e,0,h):0===k.count?console.error("THREE.WebGLObjects.updateBuffer:" dynamic three.bufferattribute marked as needsupdate but updaterange.count is 0, ensure you are using set methods or updating manually."):(a.buffersubdata(e,k.offset*h.bytes_per_element,h.subarray(k.offset,k.offset+k.count)),k.count="-1);f.version=d.version}}}}function" hb(a,b,c,d){this._x="a||0;this._y=b||0;this._z=c||0;this._order=d||hb.DefaultOrder}function" rd(){this.mask="1}function" d(){object.defineproperty(this,"id",{value:gf++});this.uuid="H.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=D.DefaultUp.clone();var" a="new" p,b="new" hb,c="new" fa,d="new" p(1,1,1);b.onchange(function(){c.setfromeuler(b,!1)});c.onchange(function(){b.setfromquaternion(c,void 0,!1)});object.defineproperties(this, {position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelviewmatrix:{value:new i},normalmatrix:{value:new ra}});this.matrix="new" i;this.matrixworld="new" i;this.matrixautoupdate="D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new" rd;this.visible="!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}}function" na(){d.call(this);this.type="Camera" ;this.matrixworldinverse="new" i;this.projectionmatrix="new" i}function hb(a,b,c,d,e,f){na.call(this);this.type="OrthographicCamera" ;this.zoom="1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void" ta(a,b,c,d,e,f){this.a="a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new" p;this.vertexnormals="Array.isArray(d)?d:[];this.color=e&&e.isColor?e:new" g;this.vertexcolors="Array.isArray(e)?e:[];this.materialIndex=void" r(){object.defineproperty(this, "id",{value:hf+="2});this.uuid=H.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function" q(a,b,c){if(array.isarray(a))throw new typeerror("three.bufferattribute: array should be typed array."); this.name ;this.array="a;this.itemSize=b;this.count=void" oc(a,b,c){q.call(this,new int8array(a),b,c)}function pc(a,b,c){q.call(this,new uint8array(a),b,c)}function qc(a,b,c){q.call(this,new uint8clampedarray(a),b,c)}function rc(a,b,c){q.call(this,new int16array(a),b,c)}function ib(a,b,c){q.call(this,new uint16array(a),b,c)}function sc(a,b,c){q.call(this,new int32array(a),b,c)}function jb(a, b,c){q.call(this,new uint32array(a),b,c)}function a(a,b,c){q.call(this,new float32array(a),b,c)}function tc(a,b,c){q.call(this,new float64array(a),b,c)}function ee(){this.vertices="[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function" fe(a){if(0="==a.length)return-Infinity;" for(var>b&&(b=a[c]);return b}function C(){Object.defineProperty(this,"id",{value:If+=2});this.uuid=H.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity};this.userData={}}function Ib(a,b,c,d,e,f){R.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,
depthSegments:f};this.fromBufferGeometry(new kb(a,b,c,d,e,f));this.mergeVertices()}function kb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,l,N,O,Jf){var r=f/N,v=g/O,P=f/2,y=g/2,w=l/2;g=N+1;var E=O+1,x=f=0,B,z,A=new p;for(z=0;z<e;z++){var 0="==m&&(m=new" d="z*v-y;for(B=0;B<g;B++)A[a]=(B*r-P)*d,A[b]=D*e,A[c]=w,m.push(A.x,A.y,A.z),A[a]=0,A[b]=0,A[c]=0<l?1:-1,q.push(A.x,A.y,A.z),n.push(B/N),n.push(1-z/O),f+=1}for(z=0;z<O;z++)for(B=0;B<N;B++)a=t+B+g*(z+1),b=t+(B+1)+g*(z+1),c=t+(B+1)+g*z,k.push(t+B+g*z,a,c),k.push(a,b,c),x+=" 6;h.addgroup(u,x,jf);u+="x;t+=f}C.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var" h="this;a=a||1;b=b||1;c=c||1;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var" k="[],m=[],q=[],n=[],t=0,u=0;g("z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a,f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z",1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(k);this.addAttribute("position"," new a(m,3));this.addattribute("normal",new a(q,3));this.addattribute("uv",new a(n,2))}function uc(a,b,c,d){r.call(this);this.type="PlaneGeometry" ;this.parameters="{width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new" lb(a,b,c,d));this.mergevertices()}function lb(a,b,c,d){c.call(this);this.type="PlaneBufferGeometry" e="a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var" g="c+1,h=d+1,k=a/c,m=" b d,q="[],n=[],t=[],u=[];for(a=0;a<h;a++){var" r="a*m-f;for(b=0;b<g;b++)n.push(b*k-e,-r,0),t.push(0,0,1),u.push(b/c),u.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,q.push(b+g*a,e,h),q.push(e,f,h);this.setIndex(q);this.addAttribute("position",new" a(n,3));this.addattribute("normal",new a(t,3));this.addattribute("uv",new a(u,2))}function j(){object.defineproperty(this,"id",{value:kf++});this.uuid="H.generateUUID();this.name="";this.type="Material";this.lights=this.fog=" !0;this.blending="1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;" this.alphatest="0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function" da(a){j.call(this);this.type="MeshBasicMaterial" ;this.color="new" g(16777215);this.lightmap="this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=" this.morphtargets="this.skinning=!1;this.setValues(a)}function" ta(a){j.call(this);this.type="ShaderMaterial" ;this.defines="{};this.uniforms={};this.vertexShader="void" main() {\n\tgl_position="projectionMatrix" * modelviewmatrix vec4( position, 1.0 );\n}";this.fragmentshader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}" ;this.linewidth="1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions=" {derivatives:!1,fragdepth:!1,drawbuffers:!1,shadertexturelod:!1};this.defaultattributevalues="{color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void" 0;this.uniformsneedupdate="!1;void" 0!="=a&&(void" attributes should now be defined in three.buffergeometry instead."),this.setvalues(a))}function mb(a,b){this.origin="void" p;this.direction="void" p}function ja(a,b,c){this.a="void" p;this.b="void" p;this.c="void" la(a,b){d.call(this);this.type="Mesh" ;this.geometry="void" c;this.material="void" da({color:16777215*math.random()});this.drawmode="0;this.updateMorphTargets()}function" lf(a,b,c,d){function e(a,c){b.buffers.color.setclear(a.r,a.g,a.b,c,d)}var f="new" g(0),g="0,h,k,m;return{getClearColor:function(){return" f},setclearcolor:function(a,b){f.set(a);g="void" g},setclearalpha:function(a){g="a;e(f,g)},render:function(b," d,t,u){d="d.background;null===d?e(f,g):d&&d.isColor&&(e(d,1),u=!0);(a.autoClear||u)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);d&&d.isCubeTexture?(void" la(new kb(1,1,1),new ta({uniforms:nb.cube.uniforms,vertexshader:nb.cube.vertexshader,fragmentshader:nb.cube.fragmentshader,side:1,depthtest:!0,depthwrite:!1,fog:!1})),m.geometry.removeattribute("normal"),m.geometry.removeattribute("uv"),m.onbeforerender="function(a,b,c){this.matrixWorld.copyPosition(c.matrixWorld)}," c.update(m)),m.material.uniforms.tcube.value="d,b.push(m,m.geometry,m.material,0,null)):d&&d.isTexture&&(void" hb(-1,1,1,-1,0,1),k="new" lb(2,2),new da({depthtest:!1,depthwrite:!1,fog:!1})),c.update(k)),k.material.map="d,a.renderBufferDirect(h,null,k.geometry,k.material,k,null))}}}function" mf(a,b,c,d){var e;this.setmode="function(a){e=a};this.render=function(b,d){a.drawArrays(e,b,d);c.update(d,e)};this.renderInstances=function(f,g,h){if(d.isWebGL2)var" if(k="b.get("ANGLE_instanced_arrays")," null="==k){console.error("THREE.WebGLBufferRenderer:" using three.instancedbuffergeometry but hardware does not support extension angle_instanced_arrays.");return}k[d.iswebgl2?"drawarraysinstanced":"drawarraysinstancedangle"](e,g,h,f.maxinstancedcount);c.update(h,e,f.maxinstancedcount)}}function nf(a,b,c){function d(b){if("highp"="==b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===" b&&0<a.getshaderprecisionformat(a.vertex_shader,a.medium_float).precision&&0<a.getshaderprecisionformat(a.fragment_shader,a.medium_float).precision?"mediump":"lowp"}var e,f="undefined" !="=typeof" webgl2renderingcontext&&a instanceof webgl2renderingcontext,g="void" supported, using",h,"instead."),g="h);c=!0===c.logarithmicDepthBuffer;h=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);var" m="a.getParameter(a.MAX_TEXTURE_SIZE),q=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),n=a.getParameter(a.MAX_VERTEX_ATTRIBS),t=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),u=a.getParameter(a.MAX_VARYING_VECTORS),r=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),l=0<k,y=f||!!b.get("OES_texture_float");return{isWebGL2:f,getMaxAnisotropy:function(){if(void" e;var c="b.get("EXT_texture_filter_anisotropic");return" precision:g,logarithmicdepthbuffer:c,maxtextures:h,maxvertextextures:k,maxtexturesize:m,maxcubemapsize:q,maxattributes:n,maxvertexuniforms:t,maxvaryings:u,maxfragmentuniforms:r,vertextextures:l,floatfragmenttextures:y,floatvertextextures:l&&y}}function of(){function a(){m.value!="=d&&(m.value=d,m.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function" b(a,b,d,e){var g||g.length<e)g="new" float32array(e);for(e="0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,k),h.normal.toArray(g,d),g[d+3]=h.constant}m.value=g;m.needsUpdate=!0}c.numPlanes=f;return" g}var ma,k="new" ra,m="{value:null,needsUpdate:!1};this.uniform=m;this.numIntersection=this.numPlanes=0;this.init=function(a,c,g){var" h};this.beginshadows="function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=" function(c,h,k,u,r,l){if(!f||null="==c||0===c.length||g&&!k)g?b(null):a();else{k=g?0:e;var" n="4*k,q=r.clippingState||null;m.value=q;q=b(c,u,n,l);for(c=0;c!==n;++c)q[c]=d[c];r.clippingState=q;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=k}}}function" pf(a){var b[c];switch(c){case "webgl_depth_texture":var case "ext_texture_filter_anisotropic":d="a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case" "webgl_compressed_texture_s3tc":d="a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case" "webgl_compressed_texture_pvrtc":d="a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");" break;default:d="a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer:" "+c+" supported.");return b[c]="d}}}function" qf(a,b,c){function d(a){var a.attributes)b.remove(a.attributes[g]);h.removeeventlistener("dispose",d);delete e[h.id];if(g="f[a.id])b.remove(g),delete" f[a.id];c.memory.geometries--}var f;b.addeventlistener("dispose",d);b.isbuffergeometry? c).setfromobject(a)),f="b._bufferGeometry);e[b.id]=f;c.memory.geometries++;return" f},update:function(c){var e)b.update(e[f],a.array_buffer);c="c.morphAttributes;for(f" c){d="c[f];e=0;for(var" d;d="[];var" e){e="e.array;g=0;for(var" q="e.length;g<q;g+=3){var" for(e="g.position.array,g=0,q=e.length/3-1;g<q;g+=3)n=g+0,t=g+1,u=g+2,d.push(n,t,t,u,u,n);d=new" (65535<fe(d)?jb:ib)(d,1);b.update(d,a.element_array_buffer);return f[c.id]="d}}}function" rf(a,b,c,d){var e,f,g;this.setmode="function(a){e=a};this.setIndex=function(a){f=a.type;g=a.bytesPerElement};this.render=function(b,d){a.drawElements(e,d,f,b*g);c.update(d,e)};this.renderInstances=function(h,k,m){if(d.isWebGL2)var" if(q="b.get("ANGLE_instanced_arrays"),null===q){console.error("THREE.WebGLIndexedBufferRenderer:" angle_instanced_arrays.");return}q[d.iswebgl2?"drawelementsinstanced":"drawelementsinstancedangle"](e,m,f,k*g,h.maxinstancedcount);c.update(m,e,h.maxinstancedcount)}}function sf(a){var b.calls="0;b.triangles=0;b.points=0;b.lines=0},update:function(c,d,e){e=e||1;b.calls++;switch(d){case" a.triangles:b.triangles+="c/3*e;break;case" a.triangle_strip:case a.triangle_fan:b.triangles+="e*(c-2);break;case" a.lines:b.lines+="c/2*e;break;case" a.line_strip:b.lines+="e*(c-1);break;case" a.line_loop:b.lines+="e*c;break;case" a.points:b.points+="e*c;break;default:console.error("THREE.WebGLInfo:" unknown draw mode:",d)}}}}function tf(a,b){return math.abs(b[1])-math.abs(a[1])}function uf(a){var float32array(8); return{update:function(d,e,f,g){var>m;m++){if(n=d[m])if(h=n[0],k=n[1]){q&&e.addAttribute("morphTarget"+m,q[h]);f&&e.addAttribute("morphNormal"+
m,f[h]);c[m]=k;continue}c[m]=0}g.getUniforms().setValue(a,"morphTargetInfluences",c)}}}function Vf(a,b){var c={};return{update:function(d){var e=b.render.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),a.update(g),c[g.id]=e);return g},dispose:function(){c={}}}}function Ua(a,b,c,d,e,f,g,h,k,m){a=void 0!==a?a:[];T.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,k,m);this.flipY=!1}function Jb(a,b,c){var d=a[0];if(0>=d||0<d)return 0="==f&&(f=new" a;var e="b*c,f=Ge[e];void" float32array(e), ge[e]="f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return" f}function ea(a,b){if(a.length!="=b.length)return!1;for(var" c="0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function" qa(a,b){for(var he(a,b){var int32array(b),ie[b]="c);for(var" d="0;d!==b;++d)c[d]=a.allocTextureUnit();return" c}function wf(a,b){var xf(a,b){var b&&(a.uniform1i(this.addr,b),c[0]="b)}function" yf(a,b){var 0!="=b.x){if(c[0]!==b.x||c[1]!==b.y)a.uniform2f(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y}else" ea(c,b)||(a.uniform2fv(this.addr,b),qa(c,b))}function zf(a,b){var if(void ea(c,b)||(a.uniform3fv(this.addr, b),qa(c,b))}function $f(a,b){var ea(c,b)||(a.uniform4fv(this.addr,b),qa(c,b))}function ag(a,b){var bg(a,b){var !1,b),qa(c,b)):ea(c,d)||(ke.set(d),a.uniformmatrix3fv(this.addr,!1,ke),qa(c,d))}function cg(a,b){var dg(a,b,c){var eg(a,b,c){var ne,e)}function oe(a,b){var pe(a,b){var qe(a,b){var fg(a){switch(a){case 5126:return wf;case 35664:return yf;case 35665:return zf;case 35666:return $f;case 35674:return ag;case 35675:return bg;case 35676:return cg;case 35678:case 36198:return dg;case 35680:return eg;case 5124:case 35670:return xf;case 35667:case 35671:return oe; case 35668:case 35672:return pe;case 35669:case 35673:return qe}}function gg(a,b){var hg(a,b){var ig(a,b){var jg(a,b){var kg(a,b){var b)||(a.uniform4fv(this.addr,b),this.updatecache(b))}function lg(a,b){var mg(a,b){var ng(a,b){var og(a,b,c){var f),qa(d,f));for(a="0;a!==e;++a)c.setTexture2D(b[a]||Me,f[a])}function" pg(a,b,c){var qg(a){switch(a){case gg;case ig;case jg;case kg;case lg;case mg;case ng;case 35678:return og;case pg;case hg;case oe;case pe; rg(a,b,c){this.id="a;this.addr=c;this.cache=[];this.setValue=fg(b.type)}function" re(a,b,c){this.id="a;this.addr=c;this.cache=[];this.size=b.size;this.setValue=qg(b.type)}function" se(a){this.id="a;this.seq=[];this.map={}}function" za(a,b,c){this.seq="[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var" m="Vd.exec(h),q=Vd.lastIndex,n=m[1],t=m[3];"]"===m[2]&&(n|=0);if(void" rg(n,e,f):new re(n,e,f);h.seq.push(e);h.map[e.id]="e;break}else" t="g.map[n],void" se(n),n="g,g=t,n.seq.push(g),n.map[g.id]=g),g=t}}}function" sg(a){a="a.split("\n");for(var" b="0;b<a.length;b++)a[b]=b+1+":" "+a[b];return a.join("\n")}function te(a,b,c){var shader couldn't compile."); ""!="=a.getShaderInfoLog(d)&&console.warn("THREE.WebGLShader:" gl.getshaderinfolog()",b="==a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(d),sg(c));return" d}function ue(a){switch(a){case 3e3:return["linear","( value )"];case 3001:return["srgb","( 3002:return["rgbe","( 3004:return["rgbm","( value, 7.0 3005:return["rgbm","( 16.0 3006:return["rgbd","( 256.0 3007:return["gamma","( float( gamma_factor ) )"];default:throw error("unsupported encoding: "+ a);}}function wd(a,b){b="Ue(b);return"vec4" "+a+"( vec4 { return "+b[0]+"tolinear"+b[1]+"; }"}function tg(a,b){b="Ue(b);return"vec4" linearto"+b[0]+b[1]+"; ug(a,b){switch(b){case 1:b="Linear" ;break;case 2:b="Reinhard" 3:b="Uncharted2" 4:b="OptimizedCineon" ;break;default:throw tonemapping: "+b);}return"vec3 vec3 color "+b+"tonemapping( ); vg(a,b,c){a="a||{};return[a.derivatives||" b.envmapcubeuv||b.bumpmap||b.normalmap&&!b.objectspacenormalmap||b.flatshading?"#extension gl_oes_standard_derivatives : enable":"",(a.fragdepth||b.logarithmicdepthbuffer)&&c.get("ext_frag_depth")?"#extension gl_ext_frag_depth enable":"",a.drawbuffers&&c.get("webgl_draw_buffers")?"#extension gl_ext_draw_buffers require":"",(a.shadertexturelod||b.envmap)&&c.get("ext_shader_texture_lod")?"#extension gl_ext_shader_texture_lod enable":""].filter(vc).join("\n")}function wg(a){var in a){var "+c+" "+d)}return b.join("\n")}function vc(a){return""!="=a}function" ve(a,b){return a.replace( num_dir_lights g,b.numdirlights).replace( num_spot_lights g,b.numspotlights).replace( num_rect_area_lights g,b.numrectarealights).replace( num_point_lights g,b.numpointlights).replace( num_hemi_lights g,b.numhemilights)}function we(a,b){return num_clipping_planes g,b.numclippingplanes).replace( union_clipping_planes g,b.numclippingplanes-b.numclipintersection)}function xd(a){return ^[ \t]*#include +<([\w\d. ]+)>/gm,
function(a,c){a=S[c];if(void 0===a)throw Error("Can not resolve #include <"+c+">");return Xd(a)})}function Xe(a){return a.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(a,c,d,e){a="";for(c=parseInt(c);c<parseint(d);c++)a+=e.replace( 0="==B&&(B=new" 300 \[ i \] g,"[ "+c+" ]");return a})}function xg(a,b,c,d,e,f,g){var h="a.context,k=d.defines,m=e.vertexShader,q=e.fragmentShader,n="SHADOWMAP_TYPE_BASIC";1===f.shadowMapType?n="SHADOWMAP_TYPE_PCF":2===f.shadowMapType&&" (n="SHADOWMAP_TYPE_PCF_SOFT" );var t="ENVMAP_TYPE_CUBE" ,u="ENVMAP_MODE_REFLECTION" ,r="ENVMAP_BLENDING_MULTIPLY" ;if(f.envmap){switch(d.envmap.mapping){case 301:case 302:t="ENVMAP_TYPE_CUBE" ;break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV" 303:case 304:t="ENVMAP_TYPE_EQUIREC" 305:t="ENVMAP_TYPE_SPHERE" }switch(d.envmap.mapping){case 302:case 304:u="ENVMAP_MODE_REFRACTION" }switch(d.combine){case 0:r="ENVMAP_BLENDING_MULTIPLY" 1:r="ENVMAP_BLENDING_MIX" 2:r="ENVMAP_BLENDING_ADD" }}var l="0<a.gammaFactor?a.gammaFactor:1,y=g.isWebGL2?"":vg(d.extensions,f,b),p=wg(k),w=h.createProgram();d.isRawShaderMaterial?(k=[p].filter(vc).join("\n"),0<k.length&&(k+="\n"),b=[y,p].filter(vc).join("\n"),0<b.length&&(b+="\n")):(k=["precision" "+f.precision+" float;","precision int;","#define shader_name "+e.name,p,f.supportsvertextextures?"#define vertex_textures":"","#define gamma_factor "+l,"#define max_bones "+f.maxbones,f.usefog&&f.fog?"#define use_fog":"",f.usefog&&f.fogexp?"#define fog_exp2": "",f.map?"#define use_map":"",f.envmap?"#define use_envmap":"",f.envmap?"#define "+u:"",f.lightmap?"#define use_lightmap":"",f.aomap?"#define use_aomap":"",f.emissivemap?"#define use_emissivemap":"",f.bumpmap?"#define use_bumpmap":"",f.normalmap?"#define use_normalmap":"",f.normalmap&&f.objectspacenormalmap?"#define objectspace_normalmap":"",f.displacementmap&&f.supportsvertextextures?"#define use_displacementmap":"",f.specularmap?"#define use_specularmap":"",f.roughnessmap?"#define use_roughnessmap": "",f.metalnessmap?"#define use_metalnessmap":"",f.alphamap?"#define use_alphamap":"",f.vertexcolors?"#define use_color":"",f.flatshading?"#define flat_shaded":"",f.skinning?"#define use_skinning":"",f.usevertextexture?"#define bone_texture":"",f.morphtargets?"#define use_morphtargets":"",f.morphnormals&&!1="==f.flatShading?"#define" use_morphnormals":"",f.doublesided?"#define double_sided":"",f.flipsided?"#define flip_sided":"",f.shadowmapenabled?"#define use_shadowmap":"",f.shadowmapenabled?"#define "+ n:"",f.sizeattenuation?"#define use_sizeattenuation":"",f.logarithmicdepthbuffer?"#define use_logdepthbuf":"",f.logarithmicdepthbuffer&&(g.iswebgl2||b.get("ext_frag_depth"))?"#define use_logdepthbuf_ext":"","uniform mat4 modelmatrix;","uniform modelviewmatrix;","uniform projectionmatrix;","uniform viewmatrix;","uniform mat3 normalmatrix;","uniform vec3 cameraposition;","attribute position;","attribute normal;","attribute vec2 uv;","#ifdef use_color","\tattribute color;", "#endif","#ifdef use_morphtargets","\tattribute morphtarget0;","\tattribute morphtarget1;","\tattribute morphtarget2;","\tattribute morphtarget3;","\t#ifdef use_morphnormals","\t\tattribute morphnormal0;","\t\tattribute morphnormal1;","\t\tattribute morphnormal2;","\t\tattribute morphnormal3;","\t#else","\t\tattribute morphtarget4;","\t\tattribute morphtarget5;","\t\tattribute morphtarget6;","\t\tattribute morphtarget7;","\t#endif","#endif", "#ifdef use_skinning","\tattribute vec4 skinindex;","\tattribute skinweight;","#endif","\n"].filter(vc).join("\n"),b="[y,"precision" "+e.name,p,f.alphatest?"#define alphatest "+f.alphatest+(f.alphatest%1?"":".0"):"","#define "+l,f.usefog&&f.fog?"#define fog_exp2":"",f.map?"#define "+t:"",f.envmap?"#define u:"",f.envmap?"#define "+r:"",f.lightmap?"#define objectspace_normalmap":"",f.specularmap?"#define use_roughnessmap":"",f.metalnessmap?"#define use_color":"",f.gradientmap? "#define use_gradientmap":"",f.flatshading?"#define flat_shaded":"",f.doublesided?"#define "+n:"",f.premultipliedalpha?"#define premultiplied_alpha":"",f.physicallycorrectlights?"#define physically_correct_lights":"",f.logarithmicdepthbuffer?"#define use_logdepthbuf_ext":"",f.envmap&& (g.iswebgl2||b.get("ext_shader_texture_lod"))?"#define texture_lod_ext":"","uniform cameraposition;",0!="=f.toneMapping?"#define" tone_mapping":"",0!="=f.toneMapping?S.tonemapping_pars_fragment:"",0!==f.toneMapping?ug("toneMapping",f.toneMapping):"",f.dithering?"#define" dithering":"",f.outputencoding||f.mapencoding||f.envmapencoding||f.emissivemapencoding?s.encodings_pars_fragment:"",f.mapencoding?wd("maptexeltolinear",f.mapencoding):"",f.envmapencoding?wd("envmaptexeltolinear", f.envmapencoding):"",f.emissivemapencoding?wd("emissivemaptexeltolinear",f.emissivemapencoding):"",f.outputencoding?tg("lineartooutputtexel",f.outputencoding):"",f.depthpacking?"#define depth_packing "+d.depthpacking:"","\n"].filter(vc).join("\n"));m="Xd(m);m=Ve(m,f);m=We(m,f);q=Xd(q);q=Ve(q,f);q=We(q,f);m=Xe(m);q=Xe(q);g.isWebGL2&&!d.isRawShaderMaterial&&(g=!1,n=/^\s*#version\s+300\s+es\s*\n/,d.isShaderMaterial&&null!==m.match(n)&&null!==q.match(n)&&(g=!0,m=m.replace(n,""),q=q.replace(n,"")),k="#version" es\n\n#define attribute in\n#define varying out\n#define texture2d texture\n"+ k,b="["#version" in",g?"":"out highp pc_fragcolor;",g?"":"#define gl_fragcolor pc_fragcolor","#define gl_fragdepthext gl_fragdepth\n#define texture\n#define texturecube texture2dproj textureproj\n#define texture2dlodext texturelod\n#define texture2dprojlodext textureprojlod\n#define texturecubelodext texture2dgradext texturegrad\n#define texture2dprojgradext textureprojgrad\n#define texturecubegradext texturegrad"].join("\n")+ "\n"+b);q="b+q;m=Te(h,h.VERTEX_SHADER,k+m);q=Te(h,h.FRAGMENT_SHADER,q);h.attachShader(w,m);h.attachShader(w,q);void" 0!="=d.index0AttributeName?h.bindAttribLocation(w,0,d.index0AttributeName):!0===f.morphTargets&&h.bindAttribLocation(w,0,"position");h.linkProgram(w);f=h.getProgramInfoLog(w).trim();g=h.getShaderInfoLog(m).trim();n=h.getShaderInfoLog(q).trim();u=t=!0;if(!1===h.getProgramParameter(w,h.LINK_STATUS))t=!1,console.error("THREE.WebGLProgram:" shader error: ",h.geterror(),"gl.validate_status", h.getprogramparameter(w,h.validate_status),"gl.getprograminfolog",f,g,n);else if(""!="=f)console.warn("THREE.WebGLProgram:" gl.getprograminfolog()",f);else if(""="==g||""===n)u=!1;u&&(this.diagnostics={runnable:t,material:d,programLog:f,vertexShader:{log:g,prefix:k},fragmentShader:{log:n,prefix:b}});h.deleteShader(m);h.deleteShader(q);var" b;this.getuniforms="function(){void" za(h,w,a));return b};var e;this.getattributes="function(){if(void" a="{},b=h.getProgramParameter(w,h.ACTIVE_ATTRIBUTES)," c="0;c<b;c++){var" d="h.getActiveAttrib(w,c).name;a[d]=h.getAttribLocation(w,d)}E=a}return" e};this.destroy="function(){h.deleteProgram(w);this.program=void" 0};object.defineproperties(this,{uniforms:{get:function(){console.warn("three.webglprogram: .uniforms is now .getuniforms().");return this.getuniforms()}},attributes:{get:function(){console.warn("three.webglprogram: .attributes .getattributes().");return this.getattributes()}}});this.name="e.name;this.id=yg++;this.code=c;this.usedTimes=1;this.program=" w;this.vertexshader="m;this.fragmentShader=q;return" this}function zg(a,b,c){function d(a,b){if(a)a.istexture?c="a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap:" don't use render targets as textures. their .texture property instead."),c="a.texture.encoding);else" var c}var e="[],f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert"," meshphongmaterial:"phong",meshtoonmaterial:"phong",meshstandardmaterial:"physical",meshphysicalmaterial:"physical",linebasicmaterial:"basic",linedashedmaterial:"dashed",pointsmaterial:"points",shadowmaterial:"shadow",spritematerial:"sprite"},g="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering" .split(" "); this.getparameters="function(b,e,g,q,n,t,u){var" k="u.skeleton.bones;if(c.floatVertexTextures)k=1024;else{var" m="Math.min(Math.floor((c.maxVertexUniforms-20)/4),k.length);m<k.length?(console.warn("THREE.WebGLRenderer:" skeleton has "+k.length+" bones. this gpu supports "+m+"."),k="0):k=m}}else" supported, using",m,"instead.")); objectspacenormalmap:1="==b.normalMapType,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!q,useFog:b.fog,fogExp:q&&q.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&0<k,maxBones:k,useVertexTexture:c.floatVertexTextures,morphTargets:b.morphTargets," morphnormals:b.morphnormals,maxmorphtargets:a.maxmorphtargets,maxmorphnormals:a.maxmorphnormals,numdirlights:e.directional.length,numpointlights:e.point.length,numspotlights:e.spot.length,numrectarealights:e.rectarea.length,numhemilights:e.hemi.length,numclippingplanes:n,numclipintersection:t,dithering:b.dithering,shadowmapenabled:a.shadowmap.enabled&&u.receiveshadow&&0<g.length,shadowmaptype:a.shadowmap.type,tonemapping:a.tonemapping,physicallycorrectlights:a.physicallycorrectlights,premultipliedalpha:b.premultipliedalpha, alphatest:b.alphatest,doublesided:2="==b.side,flipSided:1===b.side,depthPacking:void" in b.defines)d.push(e),d.push(b.defines[e]);for(e="0;e<g.length;e++)d.push(c[g[e]]);d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);return" d.join()};this.acquireprogram="function(d,f,g,q){for(var" h,k="0,m=e.length;k<" m;k++){var r="e[k];if(r.code===q){h=r;++h.usedTimes;break}}void" xg(a,b,q,d,f,g,c),e.push(h));return h};this.releaseprogram="function(a){if(0===--a.usedTimes){var" b="e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function" ag(){var weakmap;return{get:function(b){var c},remove:function(b){a.delete(b)},update:function(b,c,d){a.get(b)[c]="d},dispose:function(){a=new" weakmap}}}function bg(a,b){return a.renderorder!="=" b.renderorder?a.renderorder-b.renderorder:a.program&&b.program&&a.program!="=b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function" cg(a,b){return dg(){var program:g.program,renderorder:e.renderorder,z:h,group:k},a[b]="m):(m.id=e.id,m.object=e,m.geometry=f,m.material=g,m.program=g.program,m.renderOrder=e.renderOrder,m.z=h,m.group=k);(!0===g.transparent?d:c).push(m);b++},sort:function(){1<c.length&&c.sort(Bg);1<d.length&&d.sort(Cg)}}}function" eg(){var dg,a[b]="c);return" c},dispose:function(){a="{}}}}function" fg(){var a[b.id];switch(b.type){case "directionallight":var p,color:new g,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new z};break;case "spotlight":c="{position:new" p,direction:new g,distance:0,conecos:0,penumbracos:0,decay:0,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new "pointlight":c="{position:new" g,distance:0,decay:0,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new z,shadowcameranear:1,shadowcamerafar:1e3};break;case "hemispherelight":c="{direction:new" p,skycolor:new g,groundcolor:new g}; break;case "rectarealight":c="{color:new" g,position:new p,halfwidth:new p,halfheight:new p}}return a[b.id]="c}}}function" gg(){var fg,b="{id:Hg++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=new" p,d="new" i,e="new" i;return{setup:function(f, g,h){var y="0,p=f.length;y<p;y++){var" w="f[y],B=w.color,E=w.intensity,P=w.distance,N=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)k+=B.r*E,m+=B.g*E,q+=B.b*E;else" if(w.isdirectionallight){var o="a.get(w);O.color.copy(w.color).multiplyScalar(w.intensity);O.direction.setFromMatrixPosition(w.matrixWorld);c.setFromMatrixPosition(w.target.matrixWorld);O.direction.sub(c);O.direction.transformDirection(h);if(O.shadow=w.castShadow)B=" w.shadow,o.shadowbias="B.bias,O.shadowRadius=B.radius,O.shadowMapSize=B.mapSize;b.directionalShadowMap[n]=N;b.directionalShadowMatrix[n]=w.shadow.matrix;b.directional[n]=O;n++}else" if(w.isspotlight){o="a.get(w);O.position.setFromMatrixPosition(w.matrixWorld);O.position.applyMatrix4(h);O.color.copy(B).multiplyScalar(E);O.distance=P;O.direction.setFromMatrixPosition(w.matrixWorld);c.setFromMatrixPosition(w.target.matrixWorld);O.direction.sub(c);O.direction.transformDirection(h);O.coneCos=Math.cos(w.angle);" o.penumbracos="Math.cos(w.angle*(1-w.penumbra));O.decay=0===w.distance?0:w.decay;if(O.shadow=w.castShadow)B=w.shadow,O.shadowBias=B.bias,O.shadowRadius=B.radius,O.shadowMapSize=B.mapSize;b.spotShadowMap[u]=N;b.spotShadowMatrix[u]=w.shadow.matrix;b.spot[u]=O;u++}else" if(w.isrectarealight)o="a.get(w),O.color.copy(B).multiplyScalar(E),O.position.setFromMatrixPosition(w.matrixWorld),O.position.applyMatrix4(h),e.identity(),d.copy(w.matrixWorld),d.premultiply(h),e.extractRotation(d),O.halfWidth.set(.5*w.width," 0,0),o.halfheight.set(0,.5*w.height,0),o.halfwidth.applymatrix4(e),o.halfheight.applymatrix4(e),b.rectarea[r]="O,r++;else" if(w.ispointlight){o="a.get(w);O.position.setFromMatrixPosition(w.matrixWorld);O.position.applyMatrix4(h);O.color.copy(w.color).multiplyScalar(w.intensity);O.distance=w.distance;O.decay=0===w.distance?0:w.decay;if(O.shadow=w.castShadow)B=w.shadow,O.shadowBias=B.bias,O.shadowRadius=B.radius,O.shadowMapSize=B.mapSize,O.shadowCameraNear=B.camera.near,O.shadowCameraFar=B.camera.far;" b.pointshadowmap[t]="N;b.pointShadowMatrix[t]=w.shadow.matrix;b.point[t]=O;t++}else" w.ishemispherelight&&(o="a.get(w),O.direction.setFromMatrixPosition(w.matrixWorld),O.direction.transformDirection(h),O.direction.normalize(),O.skyColor.copy(w.color).multiplyScalar(E),O.groundColor.copy(w.groundColor).multiplyScalar(E),b.hemi[l]=O,l++)}b.ambient[0]=k;b.ambient[1]=m;b.ambient[2]=q;b.directional.length=n;b.spot.length=u;b.rectArea.length=r;b.point.length=t;b.hemi.length=l;b.hash.stateID=b.id;b.hash.directionalLength=" n;b.hash.pointlength="t;b.hash.spotLength=u;b.hash.rectAreaLength=r;b.hash.hemiLength=l;b.hash.shadowsLength=g.length},state:b}}function" ye(){var gg,b="[],c=[];return{init:function(){b.length=0;c.length=0},state:{lightsArray:b,shadowsArray:c,lights:a},setupLights:function(d){a.setup(b,c,d)},pushLight:function(a){b.push(a)},pushShadow:function(a){c.push(a)}}}function" ig(){var ye;a[b.id]="{};a[b.id][c.id]=d}else" void (d="new" ye,a[b.id][c.id]="d):d=a[b.id][c.id];return" d},dispose:function(){a="{}}}}function" $a(a){j.call(this);this.type="MeshDepthMaterial" ;this.depthpacking="3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function" ab(a){j.call(this);this.type="MeshDistanceMaterial" ;this.referenceposition="new" p;this.neardistance="1;this.farDistance=" 1e3;this.morphtargets="this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function" ze(a,b,c){function d(b,c,d,e,f,g){var b.isskinnedmesh&&!1="==c.skinning&&console.warn("THREE.WebGLShadowMap:" three.skinnedmesh with material.skinning set to false:",b),b="b.isSkinnedMesh&&c.skinning,h=0,m&&(h|=1),b&&(h|=2),k=k[h]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(h=k.uuid,m=c.uuid,b=u[h],void" k.clipintersection="c.clipIntersection;k.wireframeLinewidth=c.wireframeLinewidth;k.linewidth=c.linewidth;d&&k.isMeshDistanceMaterial&&(k.referencePosition.copy(e),k.nearDistance=f,k.farDistance=g);return" k}function e(c,g,h,k){if(!1!="=c.visible){if(c.layers.test(g.layers)&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,c.matrixWorld);var" u="0,r=t.length;u<r;u++){var" n.visible&&(p="d(c,n,k,q,h.near,h.far),a.renderBufferDirect(h,null,m,P,c,null))}c=c.children;m=0;for(n=c.length;m<n;m++)e(c[m],g,h,k)}}var" f="new" md,g="new" i,h="new" z,k="new" z(c,c),m="new" p,q="new" p,n="Array(4),t=Array(4),u={},r={0:1,1:0,2:2},l=[new" p(1,0,0),new p(-1,0,0),new p(0,0,1),new p(0,0,-1),new p(0,1,0),new p(0,-1,0)],y="[new" p(0,1,0), new p(0,0,-1)],x="[new" v,new v];for(c="0;4!==c;++c){var" $a({depthpacking:3201,morphtargets:w,skinning:b});n[c]="E;w=new" ab({morphtargets:w,skinning:b});t[c]="w}var" p="this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(b,c,d){if(!1!==P.enabled&&(!1!==P.autoUpdate||!1!==P.needsUpdate)&&0!==b.length){var" n="a.state;n.disable(a.context.BLEND);n.buffers.color.setClear(1,1,1,1);n.buffers.depth.setTest(!0);" n.setscissortest(!1);for(var t,u="0,r=b.length;u<r;u++){var" v="b[u];t=v.shadow;var" no shadow.");else{var fb(h.x,h.y,{minfilter:1003,magfilter:1003,format:1023}),t.map.texture.name="v.name+".shadowMap",w.updateProjectionMatrix());" t.isspotlightshadow&&t.update(v);n="t.map;E=t.matrix;q.setFromMatrixPosition(v.matrixWorld);w.position.copy(q);p?(t=6,E.makeTranslation(-q.x,-q.y,-q.z)):(t=1,m.setFromMatrixPosition(v.target.matrixWorld),w.lookAt(m),w.updateMatrixWorld(),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(w.projectionMatrix),E.multiply(w.matrixWorldInverse));a.setRenderTarget(N);a.clear();for(v=0;v<t;v++)p&&(m.copy(w.position),m.add(l[v]),w.up.copy(y[v]),w.lookAt(m),w.updateMatrixWorld(),n.viewport(x[v])),g.multiplyMatrices(w.projectionMatrix," w.matrixworldinverse),f.setfrommatrix(g),e(c,d,w,p)}}p.needsupdate="!1}}}function" jg(a,b,c,d){function e(b,c,d){var uint8array(4),f="a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);return" f}function f(c,e){x[c]="1;0===w[c]&&(a.enableVertexAttribArray(c),w[c]=1);B[c]!==e&&((d.isWebGL2?a:b.get("ANGLE_instanced_arrays"))[d.isWebGL2?"vertexAttribDivisor":" "vertexattribdivisorangle"](c,e),b[c]="e)}function" g(b){!0!="=E[b]&&(a.enable(b),E[b]=!0)}function" h(b){!1!="=E[b]&&(a.disable(b),E[b]=!1)}function" k(b,d,e,f,k,m,n,q){0!="=b?g(a.BLEND):h(a.BLEND);if(5!==b){if(b!==O||q!==C)switch(b){case" 2:q?(a.blendequationseparate(a.func_add,a.func_add),a.blendfuncseparate(a.one,a.one,a.one,a.one)):(a.blendequation(a.func_add),a.blendfunc(a.src_alpha,a.one));break;case 3:q?(a.blendequationseparate(a.func_add,a.func_add),a.blendfuncseparate(a.zero,a.zero,a.one_minus_src_color, a.one_minus_src_alpha)):(a.blendequation(a.func_add),a.blendfunc(a.zero,a.one_minus_src_color));break;case 4:q?(a.blendequationseparate(a.func_add,a.func_add),a.blendfuncseparate(a.zero,a.src_color,a.zero,a.src_alpha)):(a.blendequation(a.func_add),a.blendfunc(a.zero,a.src_color));break;default:q?(a.blendequationseparate(a.func_add,a.func_add),a.blendfuncseparate(a.one,a.one_minus_src_alpha,a.one,a.one_minus_src_alpha)):(a.blendequationseparate(a.func_add,a.func_add),a.blendfuncseparate(a.src_alpha, a.one_minus_src_alpha,a.one,a.one_minus_src_alpha))}d="A=Ud=Td=Sd=z=null}else{k=k||d;m=m||e;n=n||f;if(d!==z||k!==Ud)a.blendEquationSeparate(c.convert(d),c.convert(k)),z=d,Ud=k;if(e!==Sd||f!==Td||m!==A||n!==D)a.blendFuncSeparate(c.convert(e),c.convert(f),c.convert(m),c.convert(n)),Sd=e,Td=f,A=m,D=n}O=b;C=q}function" m(b){g!="=b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),G=b)}function" q(b){0!="=b?(g(a.CULL_FACE),b!==K&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):h(a.CULL_FACE);" n(b,c,d){if(b){if(g(a.polygon_offset_fill),r!="=c||I!==d)a.polygonOffset(c,d),R=c,I=d}else" h(a.polygon_offset_fill)}function t(b){void function(){var v,d="null,e=new" v(0,0,0,0);return{setmask:function(c){d="==c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;" 0:a.depthfunc(a.never);break;case 1:a.depthfunc(a.always);break;case 2:a.depthfunc(a.less);break;case 3:a.depthfunc(a.lequal);break;case 4:a.depthfunc(a.equal);break;case 5:a.depthfunc(a.gequal);break;case 6:a.depthfunc(a.greater);break;case 7:a.depthfunc(a.notequal); break;default:a.depthfunc(a.lequal)}else a.depthfunc(a.lequal);d="b}},setLocked:function(a){b=a},setClear:function(b){e!==b&&(a.clearDepth(b),e=b)},reset:function(){b=!1;e=d=c=null}}},l=new" c||n!="=d)a.stencilOp(b,c,d),k=b,m=c,n=d},setLocked:function(a){b=a},setClear:function(b){q!==b&&(a.clearStencil(b),q=b)},reset:function(){b=!1;q=n=m=k=f=e=d=c=null}}},p=a.getParameter(a.MAX_VERTEX_ATTRIBS),x=new" uint8array(p),w="new" uint8array(p),b="new" uint8array(p),e="{},P=null,N=null,O=null,z=null,Sd=null,Td=null,Ud=null,A=null,D=null,C=!1,G=null,K=null,L=null,R=null,I=null,J=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),H=!1;p=0;p=a.getParameter(a.VERSION);-1!==p.indexOf("WebGL")?(p=parseFloat(/^WebGL" ([0-9]) .exec(p)[1]), es")&&(p="parseFloat(/^OpenGL" es .exec(p)[1]),h="2<=p);var" q="null,S={},Y=new" v,w="new" v,m="{};M[a.TEXTURE_2D]=e(a.TEXTURE_2D,a.TEXTURE_2D,1);M[a.TEXTURE_CUBE_MAP]=e(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);u.setClear(0,0,0,1);r.setClear(1);l.setClear(0);g(a.DEPTH_TEST);r.setFunc(3);m(!1);q(1);g(a.CULL_FACE);g(a.BLEND);k(1);return{buffers:{color:u,depth:r,stencil:l},initAttributes:function(){for(var" 0)},enableattributeanddivisor:f,disableunusedattributes:function(){for(var p},useprogram:function(b){return n!="=" b?(a.useprogram(b),n="b,!0):!1},setBlending:k,setMaterial:function(b,c){2===b.side?h(a.CULL_FACE):g(a.CULL_FACE);var" l&&(h&&a.linewidth(b),l="b)},setPolygonOffset:n,setScissorTest:function(b){b?g(a.SCISSOR_TEST):h(a.SCISSOR_TEST)},activeTexture:t,bindTexture:function(b,c){null===Q&&t();var" 0,texture:void 0},s[q]="d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||M[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(U){console.error("THREE.WebGLState:"," u)}},scissor:function(b){!1="==Y.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),Y.copy(b))},viewport:function(b){!1===W.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),W.copy(b))},reset:function(){for(var" kg(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){if("data"in a){console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+a.width+"x"+a.height+").");
return}b/=Math.max(a.width,a.height);var c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*b);c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+c.width+"x"+c.height);return c}return a}function k(a){return H.isPowerOfTwo(a.width)&&H.isPowerOfTwo(a.height)}function m(a,b){return a.generateMipmaps&&b&&1003!==
a.minFilter&&1006!==a.minFilter}function q(b,c,e,f){a.generateMipmap(b);d.get(c).__maxMipLevel=Math.log(Math.max(e,f))*Math.LOG2E}function n(b,c){if(!e.isWebGL2)return b;if(b===a.RGB){if(c===a.FLOAT)return a.RGB32F;if(c===a.HALF_FLOAT)return a.RGB16F;if(c===a.UNSIGNED_BYTE)return a.RGB8}if(b===a.RGBA){if(c===a.FLOAT)return a.RGBA32F;if(c===a.HALF_FLOAT)return a.RGBA16F;if(c===a.UNSIGNED_BYTE)return a.RGBA8}return b}function t(b){return 1003===b||1004===b||1005===b?a.NEAREST:a.LINEAR}function u(b){b=
b.target;b.removeEventListener("dispose",u);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.remove(b)}b.isVideoTexture&&delete B[b.id];g.memory.textures--}function r(b){b=b.target;b.removeEventListener("dispose",r);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=
0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture);d.remove(b)}g.memory.textures--}function l(b,t){var r=d.get(b);if(b.isVideoTexture){var l=b.id,v=g.render.frame;B[l]!==v&&(B[l]=v,b.update())}if(0<b.version&&r.__version!==b.version)if(l=b.image,void 0="==l)console.warn("THREE.WebGLRenderer:" texture marked for update but image is undefined"); else if(!1="==l.complete)console.warn("THREE.WebGLRenderer:" incomplete");else{void (e.iswebgl2?0:1001!="=b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===k(t)&&(t" instanceof htmlimageelement||t htmlcanvaselement||t imagebitmap)&&(void not power of two ("+t.width+"x"+t.height+"). resized to "+e.width+ "x"+e.height),t="E);l=k(t);v=f.convert(b.format);var" w="f.convert(b.type),y=n(v,w);p(a.TEXTURE_2D,b,l);var" p="b.mipmaps;if(b.isDepthTexture){y=a.DEPTH_COMPONENT;if(1015===b.type){if(!e.isWebGL2)throw" error("float depth only supported in webgl2.0");y="a.DEPTH_COMPONENT32F}else" e.iswebgl2&&(y="a.DEPTH_COMPONENT16);1026===b.format&&y===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn("THREE.WebGLRenderer:" use unsignedshorttype or unsignedinttype depthformat depthtexture."),b.type="1012,w=f.convert(b.type));1027===b.format&&(y=a.DEPTH_STENCIL,1020!==b.type&&(console.warn("THREE.WebGLRenderer:" unsignedint248type depthstencilformat if(b.isdatatexture)if(0<p.length&&l){for(var n="0,x=P.length;N<x;N++){var" z="P[N];c.texImage2D(a.TEXTURE_2D,N,y,z.width,z.height,0,v,w,z.data)}b.generateMipmaps=!1;r.__maxMipLevel=P.length-1}else" c.teximage2d(a.texture_2d,0,y,t.width, t.height,0,v,w,t.data),r.__maxmiplevel="0;else" if(b.iscompressedtexture){n="0;for(x=P.length;N<x;N++)z=P[N],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(v)?c.compressedTexImage2D(a.TEXTURE_2D,N,y,z.width,z.height,0,z.data):console.warn("THREE.WebGLRenderer:" attempt load unsupported compressed format .uploadtexture()"):c.teximage2d(a.texture_2d,n,y,z.width,z.height,0,v,w,z.data);r.__maxmiplevel="P.length-1}else" if(0<p.length&&l){n="0;for(x=P.length;N<x;N++)z=" p[n],c.teximage2d(a.texture_2d,n,y,v,w,z);b.generatemipmaps="!1;r.__maxMipLevel=P.length-1}else" c.teximage2d(a.texture_2d,0,y,v,w,t),r.__maxmiplevel="0;m(b,l)&&q(a.TEXTURE_2D,b,t.width,t.height);r.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}c.activeTexture(a.TEXTURE0+t);c.bindTexture(a.TEXTURE_2D,r.__webglTexture)}function" p(c,g,h){h?(a.texparameteri(c,a.texture_wrap_s,f.convert(g.wraps)),a.texparameteri(c,a.texture_wrap_t,f.convert(g.wrapt)),a.texparameteri(c,a.texture_mag_filter,f.convert(g.magfilter)), a.texparameteri(c,a.texture_min_filter,f.convert(g.minfilter))):(a.texparameteri(c,a.texture_wrap_s,a.clamp_to_edge),a.texparameteri(c,a.texture_wrap_t,a.clamp_to_edge),1001="==g.wrapS&&1001===g.wrapT||console.warn("THREE.WebGLRenderer:" two. texture.wraps and texture.wrapt should be set three.clamptoedgewrapping."),a.texparameteri(c,a.texture_mag_filter,t(g.magfilter)),a.texparameteri(c,a.texture_min_filter,t(g.minfilter)),1003!="=g.minFilter&&1006!==g.minFilter&&console.warn("THREE.WebGLRenderer:" texture.minfilter three.nearestfilter three.linearfilter.")); !(h="b.get("EXT_texture_filter_anisotropic"))||1015===g.type&&null===b.get("OES_texture_float_linear")||1016===g.type&&null===(e.isWebGL2||b.get("OES_texture_half_float_linear"))||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function" x(b,e,g,h){var k="f.convert(e.texture.format),m=f.convert(e.texture.type),q=n(k,m);c.texImage2D(h,0,q,e.width,e.height,0,k,m,null);" a.bindframebuffer(a.framebuffer,b);a.framebuffertexture2d(a.framebuffer,g,h,d.get(e.texture).__webgltexture,0);a.bindframebuffer(a.framebuffer,null)}function w(b,c){a.bindrenderbuffer(a.renderbuffer,b);c.depthbuffer&&!c.stencilbuffer?(a.renderbufferstorage(a.renderbuffer,a.depth_component16,c.width,c.height),a.framebufferrenderbuffer(a.framebuffer,a.depth_attachment,a.renderbuffer,b)):c.depthbuffer&&c.stencilbuffer?(a.renderbufferstorage(a.renderbuffer,a.depth_stencil,c.width,c.height),a.framebufferrenderbuffer(a.framebuffer, a.depth_stencil_attachment,a.renderbuffer,b)):a.renderbufferstorage(a.renderbuffer,a.rgba4,c.width,c.height);a.bindrenderbuffer(a.renderbuffer,null)}var b="{},E;this.setTexture2D=l;this.setTextureCube=function(b,t){var" r="d.get(b);if(6===b.image.length)if(0<b.version&&r.__version!==b.version){r.__image__webglTextureCube||(b.addEventListener("dispose",u),r.__image__webglTextureCube=a.createTexture(),g.memory.textures++);c.activeTexture(a.TEXTURE0+t);c.bindTexture(a.TEXTURE_CUBE_MAP,r.__image__webglTextureCube);" a.pixelstorei(a.unpack_flip_y_webgl,b.flipy);t="b&&b.isCompressedTexture;for(var" l="b.image[0]&&b.image[0].isDataTexture,v=[],w=0;6">w;w++)v[w]=t||l?l?b.image[w].image:b.image[w]:h(b.image[w],e.maxCubemapSize);var y=v[0],E=k(y),P=f.convert(b.format),x=f.convert(b.type),N=n(P,x);p(a.TEXTURE_CUBE_MAP,b,E);for(w=0;6>w;w++)if(t)for(var B,z=v[w].mipmaps,A=0,D=z.length;A<d;a++)b=z[a],1023!==b.format&&1022!==b.format?-1<c.getcompressedtextureformats().indexof(p)?c.compressedteximage2d(a.texture_cube_map_positive_x+ w,a,n,b.width,b.height,0,b.data):console.warn("three.webglrenderer: attempt to load unsupported compressed texture format in .settexturecube()"):c.teximage2d(a.texture_cube_map_positive_x+w,a,n,b.width,b.height,0,p,x,b.data);else l?c.teximage2d(a.texture_cube_map_positive_x+w,0,n,v[w].width,v[w].height,0,p,x,v[w].data):c.teximage2d(a.texture_cube_map_positive_x+w,0,n,p,x,v[w]);r.__maxmiplevel="t?z.length-1:0;m(b,E)&&q(a.TEXTURE_CUBE_MAP,b,y.width,y.height);r.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else" c.activetexture(a.texture0+ t),c.bindtexture(a.texture_cube_map,r.__image__webgltexturecube)};this.settexturecubedynamic="function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=function(b){var" e="d.get(b),f=d.get(b.texture);b.addEventListener("dispose",r);f.__webglTexture=a.createTexture();g.memory.textures++;var" h="!0===b.isWebGLRenderTargetCube,n=k(b);if(h){e.__webglFramebuffer=[];for(var" t="0;6">t;t++)e.__webglFramebuffer[t]=a.createFramebuffer()}else e.__webglFramebuffer=
a.createFramebuffer();if(h){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);p(a.TEXTURE_CUBE_MAP,b.texture,n);for(t=0;6>t;t++)x(e.__webglFramebuffer[t],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+t);m(b.texture,n)&&q(a.TEXTURE_CUBE_MAP,b.texture,b.width,b.height);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),p(a.TEXTURE_2D,b.texture,n),x(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),m(b.texture,n)&&q(a.TEXTURE_2D,b.texture,b.width,b.height),
c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");if(b&&b.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(b.depthTexture).__webglTexture&&
b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);l(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,0);else throw Error("Unknown depthTexture format");
}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),w(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),w(e.__webglDepthbuffer,b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture,f=k(b);if(m(e,f)){f=b.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D;var g=d.get(e).__webglTexture;
c.bindTexture(f,g);q(f,e,b.width,b.height);c.bindTexture(f,null)}}}function $e(a,b,c){return{convert:function(d){if(1E3===d)return a.REPEAT;if(1001===d)return a.CLAMP_TO_EDGE;if(1002===d)return a.MIRRORED_REPEAT;if(1003===d)return a.NEAREST;if(1004===d)return a.NEAREST_MIPMAP_NEAREST;if(1005===d)return a.NEAREST_MIPMAP_LINEAR;if(1006===d)return a.LINEAR;if(1007===d)return a.LINEAR_MIPMAP_NEAREST;if(1008===d)return a.LINEAR_MIPMAP_LINEAR;if(1009===d)return a.UNSIGNED_BYTE;if(1017===d)return a.UNSIGNED_SHORT_4_4_4_4;
if(1018===d)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===d)return a.UNSIGNED_SHORT_5_6_5;if(1010===d)return a.BYTE;if(1011===d)return a.SHORT;if(1012===d)return a.UNSIGNED_SHORT;if(1013===d)return a.INT;if(1014===d)return a.UNSIGNED_INT;if(1015===d)return a.FLOAT;if(1016===d){if(c.isWebGL2)return a.HALF_FLOAT;var e=b.get("OES_texture_half_float");if(null!==e)return e.HALF_FLOAT_OES}if(1021===d)return a.ALPHA;if(1022===d)return a.RGB;if(1023===d)return a.RGBA;if(1024===d)return a.LUMINANCE;if(1025===
d)return a.LUMINANCE_ALPHA;if(1026===d)return a.DEPTH_COMPONENT;if(1027===d)return a.DEPTH_STENCIL;if(100===d)return a.FUNC_ADD;if(101===d)return a.FUNC_SUBTRACT;if(102===d)return a.FUNC_REVERSE_SUBTRACT;if(200===d)return a.ZERO;if(201===d)return a.ONE;if(202===d)return a.SRC_COLOR;if(203===d)return a.ONE_MINUS_SRC_COLOR;if(204===d)return a.SRC_ALPHA;if(205===d)return a.ONE_MINUS_SRC_ALPHA;if(206===d)return a.DST_ALPHA;if(207===d)return a.ONE_MINUS_DST_ALPHA;if(208===d)return a.DST_COLOR;if(209===
d)return a.ONE_MINUS_DST_COLOR;if(210===d)return a.SRC_ALPHA_SATURATE;if(33776===d||33777===d||33778===d||33779===d)if(e=b.get("WEBGL_compressed_texture_s3tc"),null!==e){if(33776===d)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===d)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===d)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===d)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===d||35841===d||35842===d||35843===d)if(e=b.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(35840===d)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
if(35841===d)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===d)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===d)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===d&&(e=b.get("WEBGL_compressed_texture_etc1"),null!==e))return e.COMPRESSED_RGB_ETC1_WEBGL;if(37808===d||37809===d||37810===d||37811===d||37812===d||37813===d||37814===d||37815===d||37816===d||37817===d||37818===d||37819===d||37820===d||37821===d)if(e=b.get("WEBGL_compressed_texture_astc"),null!==e)return d;if(103===d||104===
d){if(c.isWebGL2){if(103===d)return a.MIN;if(104===d)return a.MAX}e=b.get("EXT_blend_minmax");if(null!==e){if(103===d)return e.MIN_EXT;if(104===d)return e.MAX_EXT}}if(1020===d){if(c.isWebGL2)return a.UNSIGNED_INT_24_8;e=b.get("WEBGL_depth_texture");if(null!==e)return e.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Kb(){D.call(this);this.type="Group"}function Z(a,b,c,d){Na.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;
this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function yc(a){Z.call(this);this.cameras=a||[]}function af(a){function b(){return null!==e&&!0===e.isPresenting}function c(){if(b()){var c=e.getEyeParameters("left"),f=c.renderWidth;c=c.renderHeight;x=a.getPixelRatio();y=a.getSize();a.setDrawingBufferSize(2*f,c,1);B.start()}else d.enabled&&(a.setDrawingBufferSize(y.width,y.height,x),B.stop())}var d=this,e=null,f=null,g=null,h=
[],k=new I,m=new I;"undefined"!==typeof window&&"VRFrameData"in window&&(f=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",c,!1));var q=new I,n=new fa,t=new p,u=new Z;u.bounds=new V(0,0,.5,1);u.layers.enable(1);var r=new Z;r.bounds=new V(.5,0,.5,1);r.layers.enable(2);var l=new yc([u,r]);l.layers.enable(1);l.layers.enable(2);var y,x,w=[];this.enabled=!1;this.userHeight=1.6;this.getController=function(a){var b=h[a];void 0===b&&(b=new Kb,b.matrixAutoUpdate=!1,b.visible=!1,h[a]=
b);return b};this.getDevice=function(){return e};this.setDevice=function(a){void 0!==a&&(e=a);B.setContext(a)};this.setPoseTarget=function(a){void 0!==a&&(g=a)};this.getCamera=function(a){if(null===e)return a.position.set(0,d.userHeight,0),a;e.depthNear=a.near;e.depthFar=a.far;e.getFrameData(f);var b=e.stageParameters;b?k.fromArray(b.sittingToStandingTransform):k.makeTranslation(0,d.userHeight,0);b=f.pose;var c=null!==g?g:a;c.matrix.copy(k);c.matrix.decompose(c.position,c.quaternion,c.scale);null!==
b.orientation&&(n.fromArray(b.orientation),c.quaternion.multiply(n));null!==b.position&&(n.setFromRotationMatrix(k),t.fromArray(b.position),t.applyQuaternion(n),c.position.add(t));c.updateMatrixWorld();if(!1===e.isPresenting)return a;u.near=a.near;r.near=a.near;u.far=a.far;r.far=a.far;l.matrixWorld.copy(a.matrixWorld);l.matrixWorldInverse.copy(a.matrixWorldInverse);u.matrixWorldInverse.fromArray(f.leftViewMatrix);r.matrixWorldInverse.fromArray(f.rightViewMatrix);m.getInverse(k);u.matrixWorldInverse.multiply(m);
r.matrixWorldInverse.multiply(m);a=c.parent;null!==a&&(q.getInverse(a.matrixWorld),u.matrixWorldInverse.multiply(q),r.matrixWorldInverse.multiply(q));u.matrixWorld.getInverse(u.matrixWorldInverse);r.matrixWorld.getInverse(r.matrixWorldInverse);u.projectionMatrix.fromArray(f.leftProjectionMatrix);r.projectionMatrix.fromArray(f.rightProjectionMatrix);l.projectionMatrix.copy(u.projectionMatrix);a=e.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&u.bounds.fromArray(a.leftBounds),
null!==a.rightBounds&&4===a.rightBounds.length&&r.bounds.fromArray(a.rightBounds));a:for(a=0;a<h.length;a++){b=h[a];b:{c=a;for(var 0="==b&&(b=new" 1="==b.side&&a.normalScale.value.negate());b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias);b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)}console.log("THREE.WebGLRenderer","95");a=a||{};var" v="navigator.getGamepads&&navigator.getGamepads(),p=0,y=0,x=v.length;p<x;p++){var" e="v[p];if(E&&("Daydream" controller"="==E.id||"Gear" vr go gamepad"="==E.id||E.id.startsWith("Oculus" touch")||e.id.startswith("spatial controller"))){if(y="==c){c=E;break" b}y++}}c="void" 0}if(void 0!="=c&&void" a; b.dispatchevent({type:"select"})))}else b.visible="!1}return" l};this.getstandingmatrix="function(){return" k};this.ispresenting="b;var" b="new" qd;this.setanimationloop="function(a){B.setAnimationLoop(a)};this.submitFrame=function(){b()&&e.submitFrame()};this.dispose=function(){"undefined"!==typeof" window&&window.removeeventlistener("vrdisplaypresentchange",c)}}function lg(a){function b(){return null!="=h&&null!==k}function" c(a){var d(){a.setframebuffer(null); p.stop()}function e(a,b){null="==b?a.matrixWorld.copy(a.matrix):a.matrixWorld.multiplyMatrices(b.matrixWorld,a.matrix);a.matrixWorldInverse.getInverse(a.matrixWorld)}var" f="a.context,g=null,h=null,k=null,m=null,q=[],n=[],t=new" z;t.layers.enable(1);t.viewport="new" v;var u="new" z;u.layers.enable(2);u.viewport="new" r="new" yc([t,u]);r.layers.enable(1);r.layers.enable(2);this.enabled="!1;this.getController=function(a){var" kb,b.matrixautoupdate="!1,b.visible=!1,q[a]=b);return" b}; this.getdevice="function(){return" g};this.setdevice="function(a){void" instanceof xrdevice&&f.setcompatiblexrdevice(a)};this.setsession="function(b,e){h=b;null!==h&&(h.addEventListener("select",c),h.addEventListener("selectstart",c),h.addEventListener("selectend",c),h.addEventListener("end",d),h.baseLayer=new" xrwebgllayer(h,f),h.requestframeofreference(e.frameofreferencetype).then(function(b){k="b;a.setFramebuffer(h.baseLayer.framebuffer);p.setContext(h);p.start()}),n=h.getInputSources()," h.addeventlistener("inputsourceschange",function(){n="h.getInputSources();console.log(n)}))};this.getCamera=function(a){if(b()){var" c="a.parent,d=r.cameras;e(r,c);for(var" r}return a};this.ispresenting="b;var" l="null,p=new" qd;p.setanimationloop(function(a,b){m="b.getDevicePose(k);if(null!==m)for(var" t="m.getViewMatrix(f),u=r.cameras[e];u.matrix.fromArray(t).getInverse(u.matrix);u.projectionMatrix.fromArray(f.projectionMatrix);u.viewport.set(g.x,g.y,g.width,g.height);0===e&&(r.matrix.copy(u.matrix),r.projectionMatrix.copy(u.projectionMatrix))}for(e=0;e<q.length;e++){c=q[e];if(d=n[e])if(d=b.getInputPose(d,k),null!==d){c.matrix.elements=d.pointerMatrix;c.matrix.decompose(c.position,c.rotation,c.scale);c.visible=!0;continue}c.visible=!1}l&&l(a)});this.setAnimationLoop=function(a){l=a};this.dispose=" function(){};this.getstandingmatrix="function(){console.warn("THREE.WebXRManager:" getstandingmatrix() is no longer needed.");return new three.matrix4};this.submitframe="function(){}}function" zd(a){var b;function c(){ha="new" pf(f);ua="new" nf(f,ha,a);ua.iswebgl2||(ha.get("webgl_depth_texture"),ha.get("oes_texture_float"),ha.get("oes_texture_half_float"),ha.get("oes_texture_half_float_linear"),ha.get("oes_standard_derivatives"),ha.get("oes_element_index_uint"),ha.get("angle_instanced_arrays"));ha.get("oes_texture_float_linear"); da="new" $e(f,ha,ua);ba="new" jg(f,ha,da,ua);ba.scissor(wc.copy(fa).multiplyscalar(u));ba.viewport(t.copy(od).multiplyscalar(u));ca="new" sf(f);ba="new" ag;ia="new" kg(f,ha,ba,ba,ua,da,ca);pa="new" ff(f);ra="new" qf(f,pa,ca);ma="new" vf(ra,ca);va="new" uf(f);la="new" zg(c,ha,ua);sa="new" eg;na="new" ig;ka="new" lf(c,ba,ma,n);xa="new" mf(f,ha,ca,ua);ya="new" rf(f,ha,ca,ua);ca.programs="la.programs;C.context=F;C.capabilities=ua;C.extensions=ha;C.properties=Ba;C.renderLists=sa;C.state=ba;C.info=ca}function" d(a){a.preventdefault(); console.log("three.webglrenderer: context lost.");g="!0}function" e(){console.log("three.webglrenderer: restored.");g="!1;c()}function" f(a){a="a.target;a.removeEventListener("dispose",f);g(a);Ba.remove(a)}function" g(a){var 0;void h(a,b){a.render(function(a){c.renderbufferimmediate(a,b)})}function k(a,b,c){if(!1!="=a.visible){if(a.layers.test(b.layers))if(a.isLight)D.pushLight(a),a.castShadow&&D.pushShadow(a);else" if(a.issprite){if(!a.frustumculled|| oa.intersectssprite(a)){c&&bb.setfrommatrixposition(a.matrixworld).applymatrix4(xc);var d="ma.update(a),e=a.material;A.push(a,d,e,bb.z,null)}}else" if(a.isimmediaterenderobject)c&&bb.setfrommatrixposition(a.matrixworld).applymatrix4(xc),a.push(a,null,a.material,bb.z,null);else if(a.ismesh||a.isline||a.ispoints)if(a.isskinnedmesh&&a.skeleton.update(),!a.frustumculled||oa.intersectsobject(a))if(c&&bb.setfrommatrixposition(a.matrixworld).applymatrix4(xc),d="ma.update(a),e=a.material,Array.isArray(e))for(var" m="f[g],n=e[m.materialIndex];n&&n.visible&&A.push(a,d,n,bb.z,m)}else" e.visible&&a.push(a,d,e,bb.z,null);a="a.children;g=0;for(h=a.length;g<h;g++)k(a[g],b,c)}}function" m(a,b,c,d){for(var g="a[e],h=g.object,k=g.geometry,m=void" n="c.cameras,t=0,u=n.length;t<u;t++){var" l)ba.viewport(t.copy(l.viewport));else{var z,r.y*m,r.z*z,r.w*m).multiplyscalar(u))}q(h,b,l,k,m,g)}}}else w="null,q(h,b,c,k,m,g)}}function" q(a,c,d,e,f,g){a.onbeforerender(c,c,d,e,f,g);d="na.get(c,W||d);a.modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);if(a.isImmediateRenderObject){ba.setMaterial(f);var" k="t(d,c.fog,f,a);S=b=null;nd=!1;h(a,k)}else" c.renderbufferdirect(d,c.fog,e,f,a,g);a.onafterrender(c,c,d,e,f,g);d="na.get(c,W||d)}function" n(a,b,c){var h="d.lightsHash,k=e.state.hash;c=la.getParameters(a,e.state,D.state.shadowsArray,b,aa.numPlanes,aa.numIntersection,c);var" if(n.code!="=m)g(a);else{if(h.stateID!==k.stateID||h.directionalLength!==k.directionalLength||h.pointLength!==k.pointLength||h.spotLength!==k.spotLength||h.rectAreaLength!==k.rectAreaLength||h.hemiLength!==k.hemiLength||h.shadowsLength!==k.shadowsLength)h.stateID=k.stateID,h.directionalLength=" k.directionallength,h.pointlength="k.pointLength,h.spotLength=k.spotLength,h.rectAreaLength=k.rectAreaLength,h.hemiLength=k.hemiLength,h.shadowsLength=k.shadowsLength;else" if(void c),n="la.acquireProgram(a,d.shader,c,m),d.program=n,a.program=n);c=n.getAttributes();if(a.morphTargets)for(m=a.numSupportedMorphTargets=0;m<C.maxMorphTargets;m++)0<=c["morphTarget"+m]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(m=a.numSupportedMorphNormals=0;m<C.maxMorphNormals;m++)0<=c["morphNormal"+m]&&a.numSupportedMorphNormals++;c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||!0===a.clipping)d.numClippingPlanes=aa.numPlanes,d.numIntersection=aa.numIntersection,c.clippingPlanes=" aa.uniform;d.fog="b;void" e.state.directionalshadowmap,c.directionalshadowmatrix.value="e.state.directionalShadowMatrix,c.spotShadowMap.value=e.state.spotShadowMap,c.spotShadowMatrix.value=e.state.spotShadowMatrix,c.pointShadowMap.value=e.state.pointShadowMap,c.pointShadowMatrix.value=e.state.pointShadowMatrix);a=d.program.getUniforms();a=Za.seqWithValue(a.seq,c);d.uniformsList=a}function" t(a,b,c,d){x="0;var" c.clipshadows,a,e,a="==Y&&c.id===J);!1===c.needsUpdate&&(void" !0);c.needsupdate&&(n(c,b,d),c.needsupdate="!1);var" q="e.shader.uniforms;ba.useProgram(f.program)&&(m=k=h=!0);c.id!==J&&(J=c.id,k=!0);if(h||a!==Y){g.setValue(F,"projectionMatrix",a.projectionMatrix);ua.logarithmicDepthBuffer&&g.setValue(F,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));Y!==(W||a)&&(Y=W||a,m=k=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)h=g.map.cameraPosition,void" (c.ismeshphongmaterial||c.ismeshlambertmaterial||c.ismeshbasicmaterial||c.ismeshstandardmaterial||c.isshadermaterial||c.skinning)&&g.setvalue(f,"viewmatrix",a.matrixworldinverse)}if(c.skinning&&(g.setoptional(f,d,"bindmatrix"),g.setoptional(f,d,"bindmatrixinverse"),a="d.skeleton))if(h=a.bones,ua.floatVertexTextures){if(void" float32array(h*h*4);t.set(a.bonematrices);var gb(t,h,h,1023,1015);v.needsupdate="!0;a.boneMatrices=t;a.boneTexture=v;a.boneTextureSize=h}g.setValue(F,"boneTexture",a.boneTexture);g.setValue(F,"boneTextureSize",a.boneTextureSize)}else" g.setoptional(f,a,"bonematrices");k&&(g.setvalue(f,"tonemappingexposure",c.tonemappingexposure),g.setvalue(f,"tonemappingwhitepoint",c.tonemappingwhitepoint),c.lights&&(k="m,q.ambientLightColor.needsUpdate=k,q.directionalLights.needsUpdate=k,q.pointLights.needsUpdate=k,q.spotLights.needsUpdate=k,q.rectAreaLights.needsUpdate=k,q.hemisphereLights.needsUpdate=" k),b&&c.fog&&(q.fogcolor.value="b.color,b.isFog?(q.fogNear.value=b.near,q.fogFar.value=b.far):b.isFogExp2&&(q.fogDensity.value=b.density)),c.isMeshBasicMaterial?u(q,c):c.isMeshLambertMaterial?(u(q,c),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(u(q,c),c.isMeshToonMaterial?(r(q,c),c.gradientMap&&(q.gradientMap.value=c.gradientMap)):r(q,c)):c.isMeshStandardMaterial?(u(q,c),c.isMeshPhysicalMaterial?(l(q,c),q.reflectivity.value=c.reflectivity,q.clearCoat.value=c.clearCoat," q.clearcoatroughness.value="c.clearCoatRoughness):l(q,c)):c.isMeshDepthMaterial?(u(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(u(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias),q.referencePosition.value.copy(c.referencePosition),q.nearDistance.value=c.nearDistance," q.fardistance.value="c.farDistance):c.isMeshNormalMaterial?(u(q,c),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale,1===c.side&&(q.bumpScale.value*=-1)),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale),1===c.side&&q.normalScale.value.negate()),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isLineBasicMaterial?(q.diffuse.value=c.color,q.opacity.value=" c.opacity,c.islinedashedmaterial&&(q.dashsize.value="c.dashSize,q.totalSize.value=c.dashSize+c.gapSize,q.scale.value=c.scale)):c.isPointsMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.size.value=c.size*U,q.scale.value=.5*M,q.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&c.map.updateMatrix(),q.uvTransform.value.copy(c.map.matrix))):c.isSpriteMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.rotation.value=c.rotation,q.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&" c.map.updatematrix(),q.uvtransform.value.copy(c.map.matrix))):c.isshadowmaterial&&(q.color.value="c.color,q.opacity.value=c.opacity),void" "modelmatrix",d.matrixworld);return f}function u(a,b){a.opacity.value="b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);b.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap&&b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio,a.maxMipLevel.value=" ba.get(b.envmap).__maxmiplevel);b.lightmap&&(a.lightmap.value="b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var" b.specularmap?c="b.specularMap:b.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap);void" !0="==c.matrixAutoUpdate&&c.updateMatrix(),a.uvTransform.value.copy(c.matrix))}function" r(a,b){a.specular.value="b.specular;a.shininess.value=Math.max(b.shininess,1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,1===b.side&&(a.bumpScale.value*=-1));b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),1===b.side&&a.normalScale.value.negate());b.displacementMap&&(a.displacementMap.value=b.displacementMap," a.displacementscale.value="b.displacementScale,a.displacementBias.value=b.displacementBias)}function" l(a,b){a.roughness.value="b.roughness;a.metalness.value=b.metalness;b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap);b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,1===b.side&&(a.bumpScale.value*=-1));b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale)," y="void" a.stencil?a.stencil:!0,p="void" !1;this.tonemappingwhitepoint="this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var" s="b=null;var" nd="!1;var" v,wc="new" v,ea="null,X=0,Z=y.width,M=y.height,U=1,od=new" v(0,0,z,m),fa="new" v(0,0,z,m),qa="!1,oa=new" md,aa="new" of,pd="!1,Yd=!1,xc=new" i,bb="new" p;try{w="{alpha:w,depth:B,stencil:E,antialias:P,premultipliedAlpha:N,preserveDrawingBuffer:O,powerPreference:z};y.addEventListener("webglcontextlost",d,!1);" y.addeventlistener("webglcontextrestored",e,!1);var error("error creating webgl with your selected attributes.");throw context.");}void "+mg.message)}var ha,ua,ba,ca,ba,ia,pa,ra,ma,la,sa, na,ka,va,xa,ya,da;c();var ja="xr" in navigator?new lg(c):new af(c);this.vr="ja;var" za="new" ze(c,ma,ua.maxtexturesize);this.shadowmap="za;this.getContext=function(){return" f};this.getcontextattributes="function(){return" f.getcontextattributes()};this.forcecontextloss="function(){var" a="ha.get("WEBGL_lose_context");a&&a.loseContext()};this.forceContextRestore=function(){var" u};this.setpixelratio="function(a){void" a&&(u="a,this.setSize(Z,M,!1))};this.getSize=function(){return{width:Z,height:M}};this.setSize=function(a,b,c){ja.isPresenting()?console.warn("THREE.WebGLRenderer:" can't change size while device presenting."):(z="a,M=b,y.width=a*U,y.height=b*U,!1!==c&&(y.style.width=a+"px",y.style.height=b+"px"),this.setViewport(0,0,a,b))};this.getDrawingBufferSize=function(){return{width:Z*U,height:M*U}};this.setDrawingBufferSize=function(a,b,c){Z=a;M=b;U=c;y.width=a*c;y.height=b*c;this.setViewport(0,0,a,b)};" this.getcurrentviewport="function(){return" t};this.setviewport="function(a,b,c,d){od.set(a,M-b-d,c,d);ba.viewport(T.copy(od).multiplyScalar(U))};this.setScissor=function(a,b,c,d){fa.set(a,M-b-d,c,d);ba.scissor(wc.copy(fa).multiplyScalar(U))};this.setScissorTest=function(a){ba.setScissorTest(qa=a)};this.getClearColor=function(){return" ka.getclearcolor()};this.setclearcolor="function(){ka.setClearColor.apply(ka,arguments)};this.getClearAlpha=function(){return" ka.getclearalpha()};this.setclearalpha="function(){ka.setClearAlpha.apply(ka," arguments)};this.clear="function(a,b,c){var" e,!1);sa.dispose();na.dispose();ba.dispose();ma.dispose();ja.dispose();ta.stop()};this.renderbufferimmediate="function(a,b){ba.initAttributes();var" f.vertexattribpointer(b.position,3,f.float,!1,0,0));a.hasnormals&&(f.bindbuffer(f.array_buffer,c.normal),f.bufferdata(f.array_buffer,a.normalarray,f.dynamic_draw),ba.enableattribute(b.normal),f.vertexattribpointer(b.normal,3,f.float,!1,0,0));a.hasuvs&&(f.bindbuffer(f.array_buffer,c.uv),f.bufferdata(f.array_buffer,a.uvarray,f.dynamic_draw),ba.enableattribute(b.uv),f.vertexattribpointer(b.uv,2,f.float,!1,0,0));a.hascolors&&(f.bindbuffer(f.array_buffer,c.color),f.bufferdata(f.array_buffer,a.colorarray, f.dynamic_draw),ba.enableattribute(b.color),f.vertexattribpointer(b.color,3,f.float,!1,0,0));ba.disableunusedattributes();f.drawarrays(f.triangles,0,a.count);a.count="0};this.renderBufferDirect=function(a,c,d,e,f,g){var">f.normalMatrix.determinant();ba.setMaterial(e,h);var k=t(a,c,e,f),m=!1;if(b!==d.id||S!==k.id||nd!==(!0===e.wireframe))b=d.id,S=k.id,nd=!0===e.wireframe,m=!0;f.morphTargetInfluences&&(va.update(f,d,e,k),m=!0);h=d.index;var q=d.attributes.position;c=1;!0===e.wireframe&&
(h=ra.getWireframeAttribute(d),c=2);a=xa;if(null!==h){var n=pa.get(h);a=ya;a.setIndex(n)}if(m){if(d&&d.isInstancedBufferGeometry&!ua.isWebGL2&&null===ha.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{ba.initAttributes();m=d.attributes;k=k.getAttributes();var u=e.defaultAttributeValues;for(N in k){var l=k[N];if(0<=l){var 0="==d.maxInstancedCount&&(d.maxInstancedCount=x.meshPerAttribute*x.count)):ba.enableAttribute(l);F.bindBuffer(F.ARRAY_BUFFER,y);F.vertexAttribPointer(l,p,E,v,B*w,r*w)}else" r="m[N];if(void" 0!="=r){var" v="r.normalized," p="r.itemSize,w=pa.get(r);if(void" y="w.buffer,E=w.type;w=w.bytesPerElement;if(r.isInterleavedBufferAttribute){var" x="r.data,B=x.stride;r=r.offset;x&&x.isInstancedInterleavedBuffer?(ba.enableAttributeAndDivisor(l,x.meshPerAttribute),void" r.isinstancedbufferattribute?(ba.enableattributeanddivisor(l,r.meshperattribute),void d.maxinstancedcount&&(d.maxinstancedcount="r.meshPerAttribute*r.count)):ba.enableAttribute(l),F.bindBuffer(F.ARRAY_BUFFER,y),F.vertexAttribPointer(l,p,E,v,0,0)}}else" if(void 2:f.vertexattrib2fv(l,v);break;case 3:f.vertexattrib3fv(l,v);break;case 4:f.vertexattrib4fv(l,v);break;default:f.vertexattrib1fv(l,v)}}}ba.disableunusedattributes()}null!="=h&&F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,n.buffer)}n=Infinity;null!==h?n=h.count:void" c;q="null!==g?g.start*c:0;var" n="Math.max(h,q);g=Math.max(0,Math.min(n,h+d.drawRange.count*c,q+(null!==g?g.count*c:Infinity))-1-N+1);if(0!==g){if(f.isMesh)if(!0===e.wireframe)ba.setLineWidth(e.wireframeLinewidth*(null===R?U:1)),a.setMode(F.LINES);else" switch(f.drawmode){case 0:a.setmode(f.triangles);break;case 1:a.setmode(f.triangle_strip);break;case 2:a.setmode(f.triangle_fan)}else f.isline?(e="e.linewidth,void" a.setmode(f.line_loop):a.setmode(f.line_strip)):f.ispoints?a.setmode(f.points):f.issprite&&a.setmode(f.triangles);d&&d.isinstancedbuffergeometry?0<d.maxinstancedcount&&a.renderinstances(d,n,g):a.render(n,g)}};this.compile="function(a,b){D=na.get(a,b);D.init();a.traverse(function(a){a.isLight&&(D.pushLight(a),a.castShadow&&D.pushShadow(a))});D.setupLights(b);a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var" c="0;c<b.material.length;c++)n(b.material[c],a.fog,b);else" n(b.material, a.fog,b)})};var wa="null,ta=new" qd;ta.setanimationloop(function(a){ja.ispresenting()||wa&&wa(a)});"undefined"!="=typeof" window&&ta.setcontext(window);this.setanimationloop="function(a){wa=a;ja.setAnimationLoop(a);ta.start()};this.render=function(a,c,d,e){if(!c||!c.isCamera)console.error("THREE.WebGLRenderer.render:" camera is not an instance of three.camera.");else if(!g){s="b=null;nd=!1;J=-1;Y=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===c.parent&&c.updateMatrixWorld();ja.enabled&&(c=ja.getCamera(c));" d="na.get(a,c);D.init();a.onBeforeRender(C,a,c,d);xc.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse);oa.setFromMatrix(xc);Yd=this.localClippingEnabled;pd=aa.init(this.clippingPlanes,Yd,c);A=sa.get(a,c);A.init();k(a,c,C.sortObjects);!0===C.sortObjects&&A.sort();pd&&aa.beginShadows();za.render(D.state.shadowsArray,a,c);D.setupLights(c);pd&&aa.endShadows();this.info.autoReset&&this.info.reset();void" f="A.transparent;if(a.overrideMaterial){var" g="a.overrideMaterial;e.length&&m(e,a,c,g);f.length&&m(f,a,c,g)}else" e.length&&m(e,a,c),f.length&&m(f,a,c);d&&ia.updaterendertargetmipmap(d);ba.buffers.depth.settest(!0);ba.buffers.depth.setmask(!0);ba.buffers.color.setmask(!0);ba.setpolygonoffset(!1);a.onafterrender(c,a,c);ja.enabled&&ja.submitframe();d="A=null}};this.allocTextureUnit=function(){var" a="X;a">=ua.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+a+" texture units while this GPU supports only "+ua.maxTextures);X+=1;return a};
this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);ia.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);ia.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b&&
b.isWebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?ia.setTextureCube(b,c):ia.setTextureCubeDynamic(b,c)}}();this.setFramebuffer=function(a){L=a};this.getRenderTarget=function(){return R};this.setRenderTarget=function(a){(R=a)&&void 0===Ba.get(a).__webglFramebuffer&&ia.setupRenderTarget(a);var b=L,c=!1;a?(b=
Ba.get(a).__webglFramebuffer,a.isWebGLRenderTargetCube&&(b=b[a.activeCubeFace],c=!0),T.copy(a.viewport),wc.copy(a.scissor),ea=a.scissorTest):(T.copy(od).multiplyScalar(U),wc.copy(fa).multiplyScalar(U),ea=qa);Q!==b&&(F.bindFramebuffer(F.FRAMEBUFFER,b),Q=b);ba.viewport(T);ba.scissor(wc);ba.setScissorTest(ea);c&&(c=Ba.get(a.texture),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,c.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=
function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=Ba.get(a).__webglFramebuffer;if(g){var h=!1;g!==Q&&(F.bindFramebuffer(F.FRAMEBUFFER,g),h=!0);try{var k=a.texture,m=k.format,q=k.type;1023!==m&&da.convert(m)!==F.getParameter(F.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===q||da.convert(q)===F.getParameter(F.IMPLEMENTATION_COLOR_READ_TYPE)||1015===q&&(ua.isWebGL2||ha.get("OES_texture_float")||
ha.get("WEBGL_color_buffer_float"))||1016===q&&(ua.isWebGL2?ha.get("EXT_color_buffer_float"):ha.get("EXT_color_buffer_half_float"))?F.checkFramebufferStatus(F.FRAMEBUFFER)===F.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&f.readpixels(b,c,d,e,da.convert(m),da.convert(q),f):console.error("three.webglrenderer.readrendertargetpixels: 0="==Nb){Nb=new" readpixels from rendertarget failed. framebuffer not complete."):console.error("three.webglrenderer.readrendertargetpixels: is in unsignedbytetype or implementation defined type.")}finally{h&& f.bindframebuffer(f.framebuffer,q)}}}else console.error("three.webglrenderer.readrendertargetpixels: three.webglrendertarget.")};this.copyframebuffertotexture="function(a,b,c){var" d="b.image.width,e=b.image.height,f=da.convert(b.format);this.setTexture2D(b,0);F.copyTexImage2D(F.TEXTURE_2D,c||0,f,a.x,a.y,d,e,0)};this.copyTextureToTexture=function(a,b,c,d){var" e="b.image.width,f=b.image.height,g=da.convert(c.format),h=da.convert(c.type);this.setTexture2D(c,0);b.isDataTexture?F.texSubImage2D(F.TEXTURE_2D," d||0,a.x,a.y,e,f,g,h,b.image.data):f.texsubimage2d(f.texture_2d,d||0,a.x,a.y,g,h,b.image)}}function lb(a,b){this.name ;this.color="new" g(a);this.density="void" 0!="=b?b:2.5E-4}function" mb(a,b,c){this.name g(a);this.near="void" qd(){d.call(this);this.type="Scene" ;this.overridematerial="this.fog=this.background=null;this.autoUpdate=!0}function" ob(a,b){this.array="a;this.stride=b;this.count=void" {offset:0,count:-1};this.version="0}function" zc(a,b,c,d){this.data="a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function" cb(a){j.call(this);this.type="SpriteMaterial" g(16777215);this.map="null;this.rotation=0;this.lights=!1;this.transparent=!0;this.setValues(a)}function" ac(a){d.call(this);this.type="Sprite" ;if(void c;var b="new" float32array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);b="new" ob(b,5);nb.setindex([0,1,2,0,2,3]);nb.addattribute("position", new zc(b,3,0,!1));nb.addattribute("uv",new zc(b,2,3,!1))}this.geometry="Nb;this.material=void" cb;this.center="new" z(.5,.5)}function bc(){d.call(this);this.type="LOD" ;object.defineproperties(this,{levels:{enumerable:!0,value:[]}})}function cc(a,b){a="a||[];this.bones=a.slice(0);this.boneMatrices=new" float32array(16*this.bones.length);if(void if(this.bones.length="==b.length)this.boneInverses=b.slice(0);else" for(console.warn("three.skeleton boneinverses the wrong length."), this.boneinverses="[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new" i)}function rd(){d.call(this);this.type="Bone" }function sd(a,b){la.call(this,a,b);this.type="SkinnedMesh" ;this.bindmode="attached" ;this.bindmatrix="new" i;this.bindmatrixinverse="new" i;a="this.initBones();a=new" cc(a);this.bind(a,this.matrixworld);this.normalizeskinweights()}function y(a){j.call(this);this.type="LineBasicMaterial" g(16777215);this.linewidth="1;this.linejoin=this.linecap="round";this.lights=!1;" this.setvalues(a)}function sa(a,b,c){1="==c&&console.error("THREE.Line:" parameter three.linepieces no longer supported. use three.linesegments instead.");d.call(this);this.type="Line" ;this.geometry="void" c;this.material="void" y({color:16777215*math.random()})}function w(a,b){sa.call(this,a,b);this.type="LineSegments" td(a,b){sa.call(this,a,b);this.type="LineLoop" ea(a){j.call(this);this.type="PointsMaterial" 1;this.sizeattenuation="!0;this.lights=this.morphTargets=!1;this.setValues(a)}function" ob(a,b){d.call(this);this.type="Points" ea({color:16777215*math.random()})}function $d(a,b,c,d,e,f,g,h,k){t.call(this,a,b,c,d,e,f,g,h,k);this.generatemipmaps="!1}function" pb(a,b,c,d,e,f,g,h,k,m,q,n){t.call(this,null,f,g,h,k,m,d,e,q,n);this.image="{width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function" dc(a,b,c,d,e,f,g,h,k){t.call(this, a,b,c,d,e,f,g,h,k);this.needsupdate="!0}function" ec(a,b,c,d,e,f,g,h,k,m){m="void" error("depthtexture format must be either three.depthformat three.depthstencilformat");void qb(a){c.call(this);this.type="WireframeGeometry" ;var k="a.faces;var" m="0;for(d=k.length;m<d;m++){var" q="k[m];for(c=0;3">c;c++){var n=q[h[c]];var t=q[h[(c+1)%3]];f[0]=Math.min(n,t);f[1]=Math.max(n,t);n=f[0]+","+f[1];void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]})}}for(n in g)m=g[n],h=a.vertices[m.index1],b.push(h.x,h.y,h.z),h=a.vertices[m.index2],b.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry)if(h=new p,null!==a.index){k=a.attributes.position;q=a.index;var u=a.groups;0===u.length&&(u=[{start:0,
count:q.count,materialIndex:0}]);a=0;for(e=u.length;a<e;++a)for(m=u[a],c=m.start,d=m.count,m=c,d=c+d;m<d;m+=3)for(c=0;3>c;c++)n=q.getX(m+c),t=q.getX(m+(c+1)%3),f[0]=Math.min(n,t),f[1]=Math.max(n,t),n=f[0]+","+f[1],void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]});for(n in g)m=g[n],h.fromBufferAttribute(k,m.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(k,m.index2),b.push(h.x,h.y,h.z)}else for(k=a.attributes.position,m=0,d=k.count/3;m<d;m++)for(c=0;3>c;c++)g=3*m+c,h.fromBufferAttribute(k,g),b.push(h.x,
h.y,h.z),g=3*m+(c+1)%3,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z);this.addAttribute("position",new A(b,3))}function Fc(a,b,c){R.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Rb(a,b,c));this.mergeVertices()}function Rb(a,b,c){C.call(this);this.type="ParametricBufferGeometry";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=new p,k=new p,m=new p,q=new p,n=new p,t,u;3>a.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");
var r=b+1;for(t=0;t<=c;t++){var l="t/c;for(u=0;u<=b;u++){var" y="u/b;a(y,l,k);e.push(k.x,k.y,k.z);0<=y-1E-5?(a(y-1E-5,l,m),q.subVectors(k,m)):(a(y+1E-5,l,m),q.subVectors(m,k));0<=l-1E-5?(a(y,l-1E-5,m),n.subVectors(k,m)):(a(y,l+1E-5,m),n.subVectors(m,k));h.crossVectors(q,n).normalize();f.push(h.x,h.y,h.z);g.push(y,l)}}for(t=0;t<c;t++)for(u=0;u<b;u++)a=t*r+u+1,h=(t+1)*r+u+1,k=(t+1)*r+u,d.push(t*r+u,a,k),d.push(a,h,k);this.setIndex(d);this.addAttribute("position",new" a(e,3));this.addattribute("normal", new a(f,3));this.addattribute("uv",new a(g,2))}function gc(a,b,c,d){r.call(this);this.type="PolyhedronGeometry" ;this.parameters="{vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new" na(a,b,c,d));this.mergevertices()}function na(a,b,c,d){function e(a){h.push(a.x,a.y,a.z)}function f(b,c){b*="3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function" g(a,b,c,d){0>d&&1===a.x&&(k[b]=a.x-1);0===c.x&&0===c.z&&(k[b]=d/2/Math.PI+.5)}C.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:a,
indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],k=[];(function(a){for(var c=new p,d=new p,g=new p,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var k,m,l="c,x=d,w=g,B=Math.pow(2,a),E=[];for(m=0;m<=B;m++){E[m]=[];var" p="l.clone().lerp(w,m/B),N=x.clone().lerp(w,m/B),O=B-m;for(k=0;k<=O;k++)E[m][k]=0===k&&m===B?P:P.clone().lerp(N,k/O)}for(m=0;m<B;m++)for(k=0;k<2*(B-m)-1;k++)l=Math.floor(k/2),0===k%2?(e(E[m][l+1]),e(E[m+1][l]),e(E[m][l])):(e(E[m][l+1]),e(E[m+1][l+1]),e(E[m+1][l]))}})(d);(function(a){for(var" b="new" p,c="0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var" a="new" p,b="0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],k.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));a=new" p;b="new" p;for(var c="new" p,d="new" p,e="new" z,f="new" z,l="new" z,y="0,x=0;y<h.length;y+=9,x+=6){a.set(h[y+0],h[y+1],h[y+2]);b.set(h[y+3],h[y+4],h[y+5]);c.set(h[y+6],h[y+7],h[y+8]);e.set(k[x+0]," k[x+1]);f.set(k[x+2],k[x+3]);l.set(k[x+4],k[x+5]);d.copy(a).add(b).add(c).dividescalar(3);var w="Math.atan2(d.z,-d.x);g(e,x+0,a,w);g(f,x+2,b,w);g(l,x+4,c,w)}for(a=0;a<k.length;a+=6)b=k[a+0],c=k[a+2],d=k[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1">e&&(.2>b&&(k[a+0]+=1),.2>c&&(k[a+2]+=1),.2>d&&(k[a+4]+=1))})();this.addAttribute("position",new A(h,3));this.addAttribute("normal",new A(h.slice(),3));this.addAttribute("uv",new A(k,2));0===d?this.computeVertexNormals():this.normalizeNormals()}function Hc(a,
b){R.call(this);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Sb(a,b));this.mergeVertices()}function Sb(a,b){na.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Ic(a,b){R.call(this);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new pb(a,b));this.mergeVertices()}function pb(a,b){na.call(this,[1,0,0,
-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Jc(a,b){R.call(this);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Tb(a,b));this.mergeVertices()}function Tb(a,b){var c=(1+Math.sqrt(5))/2;na.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,
11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Kc(a,b){R.call(this);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Ub(a,b));this.mergeVertices()}function Ub(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;na.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,
0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Lc(a,b,c,d,e,f){R.call(this);this.type="TubeGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,
closed:e};void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");a=new Vb(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function Vb(a,b,c,d,e){function f(e){q=a.getPointAt(e/b,q);var f=g.normals[e];e=g.binormals[e];for(t=0;t<=d;t++){var m="t/d*Math.PI*2,n=Math.sin(m);m=-Math.cos(m);k.x=m*f.x+n*e.x;k.y=m*f.y+n*e.y;k.z=m*f.z+n*e.z;k.normalize();r.push(k.x,k.y,k.z);h.x=q.x+c*k.x;h.y=q.y+c*k.y;h.z=" q.z+c*k.z;l.push(h.x,h.y,h.z)}}c.call(this);this.type="TubeBufferGeometry" ;this.parameters="{path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var" g="a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var" h="new" p,k="new" p,m="new" z,q="new" p,n,t,l="[],r=[],v=[],y=[];for(n=0;n<b;n++)f(n);f(!1===e?b:0);for(n=0;n<=b;n++)for(t=0;t<=d;t++)m.x=n/b,m.y=t/d,v.push(m.x,m.y);(function(){for(t=1;t<=b;t++)for(n=1;n<=d;n++){var" a="(d+1)*t+(n-1),c=(d+1)*t+n,e=(d+1)*(t-1)+n;y.push((d+1)*(t-1)+(n-1),a,e);y.push(a,c,e)}})();this.setIndex(y);this.addAttribute("position",new" a(l,3));this.addattribute("normal",new a(r,3));this.addattribute("uv",new a(v,2))}function mc(a,b,c,d,e,f,g){r.call(this);this.type="TorusKnotGeometry" 0!="=g&&console.warn("THREE.TorusKnotGeometry:" heightscale has been deprecated. use .scale( x, y, z ) instead.");this.frombuffergeometry(new wb(a, b,c,d,e,f));this.mergevertices()}function wb(a,b,c,d,e,f){function g(a,b,c,d,e){var f="Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}C.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||1;b=b||.4;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var" p,l="new" p,r="new" p,v="new" p,y="new" p,x="new" p,w="new" p;for(n="0;n<=c;++n){var" b="n/c*e*Math.PI*2;" g(b,e,f,a,r);g(b+.01,e,f,a,v);x.subvectors(v,r);w.addvectors(v,r);y.crossvectors(x,w);w.crossvectors(y,x);y.normalize();w.normalize();for(b="0;B<=d;++B){var" e="B/d*Math.PI*2,P=-b*Math.cos(E);E=b*Math.sin(E);t.x=r.x+(P*w.x+E*y.x);t.y=r.y+(P*w.y+E*y.y);t.z=r.z+(P*w.z+E*y.z);k.push(t.x,t.y,t.z);l.subVectors(t,r).normalize();m.push(l.x,l.y,l.z);q.push(n/c);q.push(B/d)}}for(B=1;B<=c;B++)for(n=1;n<=d;n++)a=(d+1)*B+(n-1),b=(d+1)*B+n,e=(d+1)*(B-1)+n,h.push((d+1)*(B-1)+(n-1),a,e),h.push(a,b,e);this.setIndex(h);" this.addattribute("position",new a(k,3));this.addattribute("normal",new a(m,3));this.addattribute("uv",new a(q,2))}function nc(a,b,c,d,e){r.call(this);this.type="TorusGeometry" xb(a,b,c,d,e));this.mergevertices()}function xb(a,b,c,d,e){c.call(this);this.type="TorusBufferGeometry" 6;e="e||2*Math.PI;var" p,q="new" p,n="new" p,t,l;for(t="0;t<=c;t++)for(l=0;l<=d;l++){var" r="l/d*e,v=t/c*Math.PI*2;q.x=(a+b*Math.cos(v))*Math.cos(r);q.y=(a+b*Math.cos(v))*Math.sin(r);q.z=b*Math.sin(v);g.push(q.x,q.y,q.z);m.x=a*Math.cos(r);m.y=a*Math.sin(r);n.subVectors(q,m).normalize();h.push(n.x,n.y,n.z);k.push(l/d);k.push(t/c)}for(t=1;t<=c;t++)for(l=1;l<=d;l++)a=(d+1)*(t-1)+l-1,b=(d+1)*(t-1)+l,e=(d+1)*t+l,f.push((d+1)*t+l-1,a,e),f.push(a,b,e);this.setIndex(f);this.addAttribute("position"," new a(g,3));this.addattribute("normal",new a(h,3));this.addattribute("uv",new a(k,2))}function bf(a,b,c,d,e){for(var f,g="0,h=b,k=c-d;h<c;h+=d)g+=(a[k]-a[h])*(a[h+1]+a[k+1]),k=h;if(e===0<g)for(e=b;e<c;e+=d)f=cf(e,a[e],a[e+1],f);else" for(e="c-d;e">=b;e-=d)f=cf(e,a[e],a[e+1],f);f&&qb(f,f.next)&&(Oc(f),f=f.next);return f}function Pc(a,b){if(!a)return a;b||(b=a);do{var c=!1;if(a.steiner||!qb(a,a.next)&&0!==ma(a.prev,a,a.next))a=a.next;else{Oc(a);a=b=a.prev;if(a===a.next)break;c=!0}}while(c||a!==b);return b}
function Qc(a,b,c,d,e,f,g){if(a){if(!g&&f){var h=a,k=h;do null===k.z&&(k.z=ae(k.x,k.y,d,e,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==h);k.prevZ.nextZ=null;k.prevZ=null;h=k;var m,q,n,t,l=1;do{k=h;var r=h=null;for(q=0;k;){q++;var v=k;for(m=n=0;m<l&&(n++,v=v.nextz,v);m++);for(t=l;0<n||0<t&&v;)0!==n&&(0===t||!v||k.z<=v.z)?(m=k,k=k.nextz,n--):(m=v,v=v.nextz,t--),r?r.nextz=m:h=m,m.prevz=r,r=m;k=v}r.nextz=null;l*=2}while(1<q)}for(h=a;a.prev!==a.next;){k=a.prev;v=a.next;if(f)a:{r=a;t=d;var p="e,x=f;q=r.prev;" n="r;l=r.next;if(0<=ma(q,n,l))r=!1;else{var" w="q.x">n.x?q.x>l.x?q.x:l.x:n.x>l.x?n.x:l.x,B=q.y>n.y?q.y>l.y?q.y:l.y:n.y>l.y?n.y:l.y;m=ae(q.x<n.x?q.x<l.x?q.x:l.x:n.x<l.x?n.x:l.x,q.y<n.y?q.y<l.y?q.y:l.y:n.y<l.y?n.y:l.y,t,p,x);t=ae(w,b,t,p,x);for(p=r.nextz;p&&p.z<=t;){if(p!==r.prev&&p!==r.next&&ud(q.x,q.y,n.x,n.y,l.x,l.y,p.x,p.y)&&0<=ma(p.prev,p,p.next)){r=!1;break a}p="p.nextZ}for(p=r.prevZ;p&&p.z">=m;){if(p!==r.prev&&p!==r.next&&ud(q.x,q.y,n.x,n.y,l.x,l.y,p.x,p.y)&&0<=ma(p.prev,p,p.next)){r=!1;break a}p="p.prevZ}r=!0}}else" a:if(r="a,q=r.prev,n=r,l=r.next,0<=ma(q,n,l))r=!1;else{for(m=r.next.next;m!==r.prev;){if(ud(q.x,q.y,n.x,n.y,l.x,l.y,m.x,m.y)&&0<=ma(m.prev,m,m.next)){r=!1;break" a}m="m.next}r=!0}if(r)b.push(k.i/c),b.push(a.i/c),b.push(v.i/c),Oc(a),h=a=v.next;else" if(a="v,a===h){if(!g)Qc(Pc(a),b,c,d,e,f,1);else" if(1="==g){g=b;h=c;k=a;do" v="k.prev,r=k.next.next,!qb(v,r)&&df(v,k,k.next,r)&&Rc(v,r)&&Rc(r,v)&&(g.push(v.i/h),g.push(k.i/h),g.push(r.i/h),Oc(k),Oc(k.next),k=a=r),k=k.next;while(k!==a);a=k;Qc(a," b,c,d,e,f,2)}else if(2="==g)a:{g=a;do{for(h=g.next.next;h!==g.prev;){if(k=g.i!==h.i){k=g;v=h;if(r=k.next.i!==v.i&&k.prev.i!==v.i){b:{r=k;do{if(r.i!==k.i&&r.next.i!==k.i&&r.i!==v.i&&r.next.i!==v.i&&df(r,r.next,k,v)){r=!0;break" b}r="r.next}while(r!==k);r=!1}r=!r}if(r=r&&Rc(k,v)&&Rc(v,k)){r=k;q=!1;n=(k.x+v.x)/2;v=(k.y+v.y)/2;do" r.y>v!==r.next.y>v&&r.next.y!==r.y&&n<(r.next.x-r.x)*(v-r.y) (r.next.y-r.y)+r.x&&(q="!q),r=r.next;while(r!==k);r=q}k=r}if(k){a=ef(g,h);g=Pc(g,g.next);a=Pc(a,a.next);Qc(g,b,c,d,e," f);qc(a,b,c,d,e,f);break a}h="h.next}g=g.next}while(g!==a)}break}}}}function" ng(a,b){return a.x-b.x}function og(a,b){var c="b,d=a.x,e=a.y,f=-Infinity;do{if(e<=c.y&&e">=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){f=g;if(g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(d="==f)return" h.prev;b="h;g=h.x;var" k="h.y,m=Infinity;for(c=h.next;c!==b;){if(d">=c.x&&c.x>=g&&d!==c.x&&ud(e<k?d:f,e, g,k,e<k?f:d,e,c.x,c.y)){var q="Math.abs(e-c.y)/(d-c.x);(q<m||q===m&&c.x">h.x)&&Rc(c,a)&&(h=c,m=q)}c=c.next}return h}function ae(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function 0 pg(a){var b="a,c=a;do" b.x<c.x&&(c="b),b=b.next;while(b!==a);return" c}function ud(a,b,c,d,e,f,g,h){return 0<="(e-g)*(b-h)-(a-g)*(f-h)&&0<=(a-g)*(d-h)-(c-" g)*(b-h)&&0<="(c-g)*(f-h)-(e-g)*(d-h)}function" ma(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function qb(a,b){return a.x="==b.x&&a.y===b.y}function" df(a,b,c,d){return qb(a,b)&&qb(c,d)||qb(a,d)&&qb(c,b)?!0:0<ma(a,b,c)!="=0<ma(a,b,d)&&0<ma(c,d,a)!==0<ma(c,d,b)}function" rc(a,b){return>ma(a.prev,a,a.next)?0<=ma(a,b,a.next)&&0<=ma(a,a.prev,b):0>ma(a,b,a.prev)||0>ma(a,a.next,b)}function ef(a,b){var c=new be(a.i,a.x,a.y),d=new be(b.i,b.x,b.y),e=a.next,f=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=
c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function cf(a,b,c,d){a=new be(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function Oc(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function be(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function ff(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function gf(a,b){for(var c="0;c<b.length;c++)a.push(b[c].x)," a.push(b[c].y)}function rb(a,b){r.call(this);this.type="ExtrudeGeometry" ;this.parameters="{shapes:a,options:b};this.fromBufferGeometry(new" oa(a,b));this.mergevertices()}function oa(a,b){function c(a){function c(a,b,c){b||console.error("three.extrudegeometry: vec does not exist");return b.clone().multiplyscalar(c).add(a)}function g(a,b,c){var d="a.x-b.x;var" e="a.y-b.y;var" f="c.x-a.x;var" g="c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)">Number.EPSILON){var k=Math.sqrt(h),m=Math.sqrt(f*f+g*g);h=b.x-e/k;b=b.y+d/k;
g=((c.x-g/m-h)*g-(c.y+f/m-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new z(f,d);e=Math.sqrt(e/2)}else a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-number.epsilon?f<-number.epsilon&&(a=!0):math.sign(e)===math.sign(g)&&(a=!0),a?(f=-e,e=math.sqrt(h)):(f=d,d=e,e=math.sqrt(h 2));return new z(f e,d e)}function h(a,b){for(m="a.length;0<=--M;){var" c="M;var" f="M-1;0">f&&(f=a.length-1);var g,h=w+2*O;for(g=0;g<h;g++){var 0="==b.bevelThickness&&(b.bevelThickness=10);void" k="Z*g,m=Z*(g+1),q=b+f+k,n=b+f+m;m=b+c+m;r(b+c+k);r(q);r(m);r(q);" r(n);r(m);k="e.length/3;k=D.generateSideWallUV(d,e,k-6,k-3,k-2,k-1);v(k[0]);v(k[1]);v(k[3]);v(k[1]);v(k[2]);v(k[3])}}}function" k(a,b,c){y.push(a);y.push(b);y.push(c)}function l(a,b,c){r(a);r(b);r(c);a="e.length/3;a=D.generateTopUV(d,e,a-3,a-2,a-1);v(a[0]);v(a[1]);v(a[2])}function" r(a){e.push(y[3*a]);e.push(y[3*a+1]);e.push(y[3*a+2])}function v(a){f.push(a.x);f.push(a.y)}var y="[],x=void" 0!="=b.curveSegments?b.curveSegments:12,w=void" b.bevelenabled:!0,p="void" amount has been renamed to depth."),b="b.amount);var" c="!1;if(A){var" g="A.getSpacedPoints(w);C=!0;E=!1;var" l="new" p;var r="new" q="new" p}e||(n="P=O=0);var" i;x="a.extractPoints(x);a=x.shape;var" j="x.holes;" if(!va.isclockwise(a)){a="a.reverse();var" h="0;for(I=J.length;H<I;H++){var" s="J[H];Va.isClockWise(S)&&(J[H]=S.reverse())}}var" t,z="a.length,V,ea=Y.length;x=[];var" m="0;var" u="W.length;var" x="U-1;for(T=M+1;M<U;M++,X++,T++)X===U&&(X=0),T===U&&(T=0),x[M]=g(W[M],W[X],W[T]);A=[];var" fa="x.concat();H=0;for(I=J.length;H<I;H++){S=J[H];var" ca="[];M=0;U=S.length;X=U-1;for(T=M+1;M<U;M++,X++,T++)X===U&&(X=0),T===U&&(T=0),ca[M]=g(S[M],S[X]," s[t]);a.push(ca);fa="fa.concat(ca)}for(X=0;X<O;X++){U=X/O;var" da="P*Math.cos(U*Math.PI/2);T=N*Math.sin(U*Math.PI/2);M=0;for(U=W.length;M<U;M++){var" aa="c(W[M],x[M],T);k(aa.x,aa.y,-da)}H=0;for(I=J.length;H<I;H++)for(S=J[H],ca=A[H],M=0,U=S.length;M<U;M++)aa=c(S[M],ca[M],T),k(aa.x,aa.y,-da)}T=N;for(M=0;M<Z;M++)aa=E?c(a[M],fa[M],T):a[M],C?(R.copy(K.normals[0]).multiplyScalar(aa.x),L.copy(K.binormals[0]).multiplyScalar(aa.y),Q.copy(G[0]).add(R).add(L),k(Q.x,Q.y,Q.z)):k(aa.x,aa.y,0);for(U=1;U<=w;U++)for(M=" 0;m<z;m++)aa="E?c(a[M],fa[M],T):a[M],C?(R.copy(K.normals[U]).multiplyScalar(aa.x),L.copy(K.binormals[U]).multiplyScalar(aa.y),Q.copy(G[U]).add(R).add(L),k(Q.x,Q.y,Q.z)):k(aa.x,aa.y,B/w*U);for(X=O-1;0<=X;X--){U=X/O;da=P*Math.cos(U*Math.PI/2);T=N*Math.sin(U*Math.PI/2);M=0;for(U=W.length;M<U;M++)aa=c(W[M],x[M],T),k(aa.x,aa.y,B+da);H=0;for(I=J.length;H<I;H++)for(S=J[H],ca=A[H],M=0,U=S.length;M<U;M++)aa=c(S[M],ca[M],T),C?k(aa.x,aa.y+G[w-1].y,G[w-1].x+da):k(aa.x,aa.y,B+da)}(function(){var" a="e.length/3;if(E){var" b="0*Z;for(M=0;M<ea;M++)V=Y[M],l(V[2]+b,V[1]+b,V[0]+b);b=Z*(w+2*O);for(M=0;M<ea;M++)V=Y[M],l(V[0]+b,V[1]+b,V[2]+b)}else{for(M=0;M<ea;M++)V=Y[M],l(V[2],V[1],V[0]);for(M=0;M<ea;M++)V=Y[M],l(V[0]+Z*w,V[1]+Z*w,V[2]+Z*w)}d.addGroup(a,e.length/3-a,0)})();(function(){var" d="this,e=[],f=[],g=0,h=a.length;g<h;g++)c(a[g]);this.addAttribute("position",new" a(e,3));this.addattribute("uv",new a(f,2));this.computevertexnormals()}function hf(a,b,c){c.shapes="[];if(Array.isArray(a))for(var" c.shapes.push(a.uuid);void c}function sc(a,b){r.call(this);this.type="TextGeometry" ;this.parameters="{text:a,parameters:b};this.fromBufferGeometry(new" yb(a,b));this.mergevertices()} function yb(a,b){b="b||{};var" console.error("three.textgeometry: font parameter is not an instance of three.font."),new r;a="c.generateShapes(a,b.size);b.depth=void" tc(a,b,c,d,e,f,g){r.call(this);this.type="SphereGeometry" heightsegments:c,phistart:d,philength:e,thetastart:f,thetalength:g};this.frombuffergeometry(new sb(a,b,c,d,e,f,g));this.mergevertices()}function sb(a,b,c,d,e,f,g){c.call(this);this.type="SphereBufferGeometry" p, p,r="[],v=[],y=[],x=[];for(m=0;m<=c;m++){var" w="[],B=m/c;for(k=0;k<=b;k++){var" e="k/b;l.x=-a*Math.cos(d+E*e)*Math.sin(f+B*g);l.y=a*Math.cos(f+B*g);l.z=a*Math.sin(d+E*e)*Math.sin(f+B*g);v.push(l.x,l.y,l.z);u.set(l.x,l.y,l.z).normalize();y.push(u.x,u.y,u.z);x.push(E,1-B);w.push(q++)}n.push(w)}for(m=0;m<c;m++)for(k=0;k<b;k++)a=n[m][k+1],d=n[m][k],e=n[m+1][k],g=n[m+1][k+1],(0!==m||0<f)&&r.push(a,d,g),(m!==c-1||h<Math.PI)&&r.push(d,e,g);this.setIndex(r);this.addAttribute("position",new" a(v,3));this.addattribute("normal", new a(y,3));this.addattribute("uv",new a(x,2))}function uc(a,b,c,d,e,f){r.call(this);this.type="RingGeometry" zb(a,b,c,d,e,f));this.mergevertices()}function zb(a,b,c,d,e,f){c.call(this);this.type="RingBufferGeometry" p,u="new" z,r,v;for(r="0;r<=d;r++){for(v=0;v<=c;v++)a=e+v/c*f,l.x=q*Math.cos(a),l.y=q*Math.sin(a),h.push(l.x,l.y,l.z),k.push(0,0,1),u.x=(l.x/b+1)/2,u.y=(l.y/b+1)/2,m.push(u.x,u.y);q+=n}for(r=0;r<d;r++)for(b=r*(c+1),v=0;v<c;v++)a=v+b,e=a+c+1,f=a+c+2,q=a+1,g.push(a,e,q),g.push(e,f,q);this.setIndex(g);this.addAttribute("position",new" a(h,3));this.addattribute("normal",new a(k,3));this.addattribute("uv", a(m,2))}function vc(a,b,c,d){r.call(this);this.type="LatheGeometry" $b(a,b,c,d));this.mergevertices()}function $b(a,b,c,d){c.call(this);this.type="LatheBufferGeometry" p,m="new" z,q;for(q="0;q<=b;q++){var" n="c+q*h*d;var" 0;n<="a.length-1;n++)k.x=a[n].x*l,k.y=a[n].y,k.z=a[n].x*u,f.push(k.x,k.y,k.z),m.x=q/b,m.y=n/(a.length-1),g.push(m.x,m.y)}for(q=0;q<b;q++)for(n=0;n<a.length-1;n++)c=n+q*a.length,h=c+a.length,k=c+a.length+1,m=c+1,e.push(c,h,m),e.push(h,k,m);this.setIndex(e);this.addAttribute("position",new" a(f,3));this.addattribute("uv",new a(g,2));this.computevertexnormals();if(d="==2*Math.PI)for(d=this.attributes.normal.array,e=new" p,f="new" p,g="new" p,c="b*a.length*3,n=q=0;q<a.length;q++,n+=3)e.x=d[n+0],e.y=d[n+1],e.z=" d[n+2],f.x="d[c+n+0],f.y=d[c+n+1],f.z=d[c+n+2],g.addVectors(e,f).normalize(),d[n+0]=d[c+n+0]=g.x,d[n+1]=d[c+n+1]=g.y,d[n+2]=d[c+n+2]=g.z}function" tb(a,b){r.call(this);this.type="ShapeGeometry" ;"object"="==typeof" b&&(console.warn("three.shapegeometry: options removed."),b="b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new" ub(a,b));this.mergevertices()}function ub(a,b){function c(a){var c,h="e.length/3;a=a.extractPoints(b);var" if(!1="==Va.isClockWise(m))for(m=m.reverse(),a=0,c=q.length;a<c;a++){var" p="Va.triangulateShape(m,q);a=0;for(c=q.length;a<c;a++)l=q[a],m=m.concat(l);a=0;for(c=m.length;a<c;a++)l=m[a],e.push(l.x,l.y,0),f.push(0,0,1),g.push(l.x,l.y);a=0;for(c=p.length;a<c;a++)m=p[a],d.push(m[0]+h,m[1]+h,m[2]+h),k+=3}C.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:a,curveSegments:b};b=b||12;var" else for(var a(e,3));this.addattribute("normal",new a(g,2))}function jf(a,b){b.shapes="[];if(Array.isArray(a))for(var" b.shapes.push(a.uuid);return b}function ac(a,b){c.call(this);this.type="EdgesGeometry" ["a","b","c"];if(a.isbuffergeometry){var r;g.frombuffergeometry(a)}else>q;q++){var n=m[f[q]];var l=m[f[(q+1)%3]];d[0]=Math.min(n,l);d[1]=Math.max(n,l);n=d[0]+","+d[1];void 0===e[n]?e[n]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[n].face2=h}for(n in e)if(d=e[n],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2], 0="==a)throw" c.push(f.x,f.y,f.z);this.addattribute("position",new a(c,3))}function vb(a,b,c,d,e,f,g,h){r.call(this);this.type="CylinderGeometry" ;this.parameters="{radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new" wa(a,b,c,d,e,f,g,h));this.mergevertices()}function wa(a,b,c,d,e,f,g,h){function k(c){var e,f="new" z,k="new" p,t="0,v=!0===c?a:b,w=!0===c?1:-1;var" a="r;for(e=1;e<=d;e++)n.push(0,y*w,0),l.push(0,w,0),u.push(.5,.5),r++;var" c="r;for(e=0;e<=d;e++){var" d="e/d*h+g,H=Math.cos(D);D=Math.sin(D);k.x=v*D;k.y=y*w;k.z=v*H;n.push(k.x,k.y,k.z);l.push(0,w,0);f.x=.5*H+.5;f.y=.5*D*w+.5;u.push(f.x,f.y);r++}for(e=0;e<d;e++)f=A+e,k=C+e,!0===c?q.push(k,k+1,f):q.push(k+1,k,f),t+=3;m.addGroup(x,t,!0===c?1:2);x+=t}C.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var" m="this;a=void" 0!="=a?a:1;b=void" 8;e="Math.floor(e)||1;f=void" q="[],n=[],l=[],u=[],r=0,v=[],y=c/2,x=0;(function(){var" f,k,t="new" p,p="new" p,n="0,z=(b-a)/c;for(k=0;k<=e;k++){var" h="f/d,G=H*h+g,K=Math.sin(G);G=Math.cos(G);P.x=C*K;P.y=-D*c+y;P.z=C*G;n.push(P.x,P.y,P.z);t.set(K,z,G).normalize();l.push(t.x,t.y,t.z);u.push(H,1-D);A.push(r++)}v.push(A)}for(f=0;f<d;f++)for(k=0;k<e;k++)t=v[k+1][f],P=v[k+1][f+1],z=v[k][f+1],q.push(v[k][f],t,z)," q.push(t,p,z),n+="6;m.addGroup(x,N,0);x+=N})();!1===f&&(0<a&&k(!0),0<b&&k(!1));this.setIndex(q);this.addAttribute("position",new" a(n,3));this.addattribute("normal",new a(l,3));this.addattribute("uv",new a(u,2))}function wc(a,b,c,d,e,f,g){vb.call(this,0,a,b,c,d,e,f,g);this.type="ConeGeometry" xc(a,b,c,d,e,f,g){wa.call(this,0,a,b,c,d,e,f,g);this.type="ConeBufferGeometry" yc(a,b,c,d){r.call(this);this.type="CircleGeometry" bc(a,b,c,d));this.mergevertices()}function bc(a,b,c,d){c.call(this);this.type="CircleBufferGeometry" e="[],f=" [],g="[],h=[],k,m=new" p,q="new" z;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);var n="0;for(k=3;n<=b;n++,k+=3){var" l="c+n/b*d;m.x=a*Math.cos(l);m.y=a*Math.sin(l);f.push(m.x,m.y,m.z);g.push(0,0,1);q.x=(f[k]/a+1)/2;q.y=(f[k+1]/a+1)/2;h.push(q.x,q.y)}for(k=1;k<=b;k++)e.push(k,k+1,0);this.setIndex(e);this.addAttribute("position",new" a(f,3));this.addattribute("normal",new a(g,3));this.addattribute("uv",new a(h,2))}function wb(a){j.call(this);this.type="ShadowMaterial" ;this.color="new" g(0);this.transparent="!0;this.setValues(a)}" function cc(a){ta.call(this,a);this.type="RawShaderMaterial" }function pa(a){j.call(this);this.defines="{STANDARD:""};this.type="MeshStandardMaterial";this.color=new" g(16777215);this.metalness="this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" g(0);this.emissiveintensity="1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new" z(1,1);this.displacementmap="null;this.displacementScale=" 1;this.displacementbias="0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function" xb(a){pa.call(this);this.defines="{PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function" fa(a){j.call(this); this.type="MeshPhongMaterial" g(16777215);this.specular="new" g(1118481);this.shininess="30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" this.reflectivity="1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function" yb(a){fa.call(this);this.defines="{TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(a)}function" zb(a){j.call(this);this.type="MeshNormalMaterial" ;this.bumpmap="null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new" ab(a){j.call(this);this.type="MeshLambertMaterial" g(16777215);this.lightmap="this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" 1;this.refractionratio=".98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function" bb(a){y.call(this);this.type="LineDashedMaterial" ;this.scale="1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function" ce(a,b,c){var 0;this.onstart="void" 0;this.onload="a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void" f,g);e="!0};this.itemEnd=function(a){f++;if(void" h?h(a):a};this.seturlmodifier="function(a){h=a;return" this}}function ga(a){this.manager="void" kf(a){this.manager="void" de(a){this.manager="void" zc(a){this.manager="void" ee(a){this.manager="void" vd(a){this.manager="void" l(){this.type="Curve" ;this.arclengthdivisions="200}function" za(a,b,c,d,e,f,g,h){l.call(this);this.type="EllipseCurve" ;this.ax="a||0;this.aY=b||0;this.xRadius=c||1;this.yRadius=d||1;this.aStartAngle=e||0;this.aEndAngle=f||2*Math.PI;this.aClockwise=g||!1;this.aRotation=h||0}function" dc(a,b,c,d,e,f){za.call(this,a,b,c,c,d,e,f);this.type="ArcCurve" fe(){var f,g,h,k){e="k*(g-e);h=k*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,k,m,q){e=((f-e)/k-(g-e)/(k+m)+(g-f)/m)*m;h=((g-f)/m-(h-f)/(m+q)+(h-g)/q)*m;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var" f="e*e;return" a+b*e+c*f+d*f*e}}}function ca(a,b,c,d){l.call(this);this.type="CatmullRomCurve3" ;this.points="a||[];this.closed=b||!1;this.curveType=c||"centripetal";this.tension=d||.5}function" lf(a,b,c,d,e){b=".5*(d-b);e=.5*(e-c);var" a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function $c(a,b,c,d){var e*e*b+2*(1-a)*a*c+a*a*d}function ad(a,b,c,d,e){var f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function ha(a,b,c,d){l.call(this);this.type="CubicBezierCurve" ;this.v0="a||new" z;this.v1="b||new" z;this.v2="c||new" z;this.v3="d||new" z}function qa(a,b,c,d){l.call(this);this.type="CubicBezierCurve3" p;this.v1="b||new" p;this.v2="c||new" p;this.v3="d||new" p}function va(a,b){l.call(this);this.type="LineCurve" ;this.v1="a||" new ia(a,b){l.call(this);this.type="LineCurve3" ja(a,b,c){l.call(this);this.type="QuadraticBezierCurve" ra(a,b,c){l.call(this);this.type="QuadraticBezierCurve3" ka(a){l.call(this);this.type="SplineCurve" xa(){l.call(this);this.type="CurvePath" ;this.curves="[];this.autoClose=!1}function" la(a){xa.call(this); ;this.currentpoint="new" z;a&&this.setfrompoints(a)}function db(a){la.call(this,a);this.uuid="H.generateUUID();this.type="Shape";this.holes=[]}function" x(a,b){d.call(this);this.type="Light" g(a);this.intensity="void" 0}function wd(a,b,c){x.call(this,a,c);this.type="HemisphereLight" ;this.castshadow="void" 0;this.position.copy(d.defaultup);this.updatematrix();this.groundcolor="new" g(b)}function cb(a){this.camera="a;this.bias=0;this.radius=1;this.mapSize=" z(512,512);this.map="null;this.matrix=new" i}function xd(){cb.call(this,new z(50,1,.5,500))}function yd(a,b,c,d,e,f){x.call(this,a,b);this.type="SpotLight" ;this.position.copy(d.defaultup);this.updatematrix();this.target="new" d;object.defineproperty(this,"power",{get:function(){return this.intensity*math.pi},set:function(a){this.intensity="a/Math.PI}});this.distance=void" xd}function zd(a, b,c,d){x.call(this,a,b);this.type="PointLight" ;object.defineproperty(this,"power",{get:function(){return 4*this.intensity*math.pi},set:function(a){this.intensity="a/(4*Math.PI)}});this.distance=void" cb(new z(90,1,.5,500))}function ad(){cb.call(this,new hb(-5,5,5,-5,.5,500))}function bd(a,b){x.call(this,a,b);this.type="DirectionalLight" d;this.shadow="new" ad}function cd(a,b){x.call(this, a,b);this.type="AmbientLight" dd(a,b,c,d){x.call(this,a,b);this.type="RectAreaLight" ;this.width="void" wa(a,b,c,d){this.parameterpositions="a;this._cachedIndex=0;this.resultBuffer=void" b.constructor(c);this.samplevalues="b;this.valueSize=c}function" ed(a,b,c,d){wa.call(this,a,b,c,d);this._offsetnext="this._weightNext=this._offsetPrev=this._weightPrev=-0}function" bd(a,b,c,d){wa.call(this,a,b,c,d)}function fd(a,b, c,d){wa.call(this,a,b,c,d)}function oa(a,b,c,d){if(void error("three.keyframetrack: track name is undefined");if(void no keyframes in named "+a);this.name="a;this.times=ia.convertArray(b,this.TimeBufferType);this.values=ia.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation)}function" gd(a,b,c){oa.call(this,a,b,c)}function hd(a,b,c,d){oa.call(this,a,b,c,d)}function ec(a,b,c,d){oa.call(this,a, b,c,d)}function id(a,b,c,d){wa.call(this,a,b,c,d)}function cd(a,b,c,d){oa.call(this,a,b,c,d)}function jd(a,b,c,d){oa.call(this,a,b,c,d)}function fc(a,b,c,d){oa.call(this,a,b,c,d)}function ca(a,b,c){this.name="a;this.tracks=c;this.duration=void">this.duration&&this.resetDuration()}function Rg(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return ec;case "vector":case "vector2":case "vector3":case "vector4":return fc;
case "color":return Hd;case "quaternion":return cd;case "bool":case "boolean":return Gd;case "string":return Jd}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+a);}function Sg(a){if(void 0===a.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var b=Rg(a.type);if(void 0===a.times){var c=[],d=[];ia.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)}function Kd(a){this.manager=void 0!==
a?a:ka;this.textures={}}function ge(a){this.manager=void 0!==a?a:ka}function gc(){}function he(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:ka;this.withCredentials=!1}function mf(a){this.manager=void 0!==a?a:ka;this.texturePath=""}function ie(a){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");
this.manager=void 0!==a?a:ka;this.options=void 0}function je(){this.type="ShapePath";this.color=new G;this.subPaths=[];this.currentPath=null}function ke(a){this.type="Font";this.data=a}function nf(a){this.manager=void 0!==a?a:ka}function le(a){this.manager=void 0!==a?a:ka}function of(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new Z;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new Z;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=
!1}function dd(a,b,c){D.call(this);this.type="CubeCamera";var d=new Z(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new p(1,0,0));this.add(d);var e=new Z(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new p(-1,0,0));this.add(e);var f=new Z(90,1,a,b);f.up.set(0,0,1);f.lookAt(new p(0,1,0));this.add(f);var g=new Z(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new p(0,-1,0));this.add(g);var h=new Z(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new p(0,0,1));this.add(h);var k=new Z(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new p(0,0,-1));this.add(k);
this.renderTarget=new Gb(c,c,{format:1022,magFilter:1006,minFilter:1006});this.renderTarget.texture.name="CubeCamera";this.update=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,m=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=m;c.activeCubeFace=5;a.render(b,
k,c);a.setRenderTarget(null)};this.clear=function(a,b,c,d){for(var e=this.renderTarget,f=0;6>f;f++)e.activeCubeFace=f,a.setRenderTarget(e),a.clear(b,c,d);a.setRenderTarget(null)}}function me(){D.call(this);this.type="AudioListener";this.context=ne.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function hc(a){D.call(this);this.type="Audio";this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=
!1;this.buffer=null;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function oe(a){hc.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function pe(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function qe(a,b,c){this.binding=a;this.valueSize=
c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function pf(a,b,c){c=c||pa.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}function pa(a,b,c){this.path=b;this.parsedPath=c||pa.parseTrackName(b);this.node=pa.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function qf(){this.uuid=
H.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var b=0,c=arguments.length;b!==c;++b)a[arguments[b].uuid]=b;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var d=this;this.stats={objects:{get total(){return d._objects.length},get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function rf(a,b,c){this._mixer=a;this._clip=b;this._localRoot=
c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;
this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function re(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Ld(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a}function se(){C.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function te(a,b,c){ob.call(this,a,b);this.meshPerAttribute=c||1}function ue(a,b,c){Q.call(this,
a,b);this.meshPerAttribute=c||1}function sf(a,b,c,d){this.ray=new mb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function tf(a,b){return a.distance-b.distance}function ve(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)ve(a[d], b,c,!0)}}function uf(a){this.autostart="void" 0!="=a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function" vf(a,b,c){this.radius="void" this}function wf(a,b,c){this.radius="void" we(a,b){this.min="void" z(infinity,infinity);this.max="void" z(-infinity,-infinity)}function xe(a,b){this.start="void" p;this.end="void" p}function ed(a){d.call(this);this.material="a;this.render=function(){}}function" fd(a,b,c,d){this.object="a;this.size=void" c;b="new" a(6*b,3);c.addattribute("position",b);w.call(this,c,new y({color:a,linewidth:d}));this.matrixautoupdate="!1;this.update()}function" ic(a,b){d.call(this);this.light="a;this.light.updateMatrixWorld();" this.matrix="a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new" c="0,d=1;32">c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute("position",new A(b,3));b=new Y({fog:!1});this.cone=new W(a,b);this.add(this.cone);this.update()}function xf(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,xf(a.children[c]));return 0="==this.color&&(this.material.vertexColors=2);b=a.getAttribute("position");b=new" b} function jc(a){for(var b="xf(a),c=new" c,d="[],e=[],f=new" g(0,0,1),g="new" g(0,1,0),h="0;h<b.length;h++){var" k="b[h];k.parent&&k.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute("position",new" a(d,3));c.addattribute("color",new a(e,3));d="new" y({vertexcolors:2,depthtest:!1,depthwrite:!1,transparent:!0});w.call(this,c,d);this.root="a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}function" kc(a,b,c){this.light="a;this.light.updateMatrixWorld();" this.color="c;a=new" sb(b,4,2);b="new" da({wireframe:!0,fog:!1});la.call(this,a,b);this.matrix="this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function" lc(a,b){d.call(this);this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new" y({fog:!1});b="new" c;b.addattribute("position",new q(new float32array(15),3));this.line="new" sa(b,a);this.add(this.line);this.update()}function mc(a,b,c){d.call(this);this.light="a;this.light.updateMatrixWorld();" this.matrix="a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;a=new" pb(b);a.rotatey(.5*math.pi);this.material="new" da({wireframe:!0,fog:!1});void float32array(3*b.count);a.addattribute("color",new q(b,3));this.add(new la(a,this.material));this.update()}function gd(a,b,c,d){a="a||10;b=b||10;c=new" g(void 0!="=c?c:4473924);d=new" e="b/2,f=a/b,g=a/2;a=[];for(var" h="[],k=0,m=0,q=-g;k<=b;k++,q+=f){a.push(-g," 0,q,g,0,q);a.push(q,0,-g,q,0,g);var n="k===e?c:d;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3}b=new" a(a,3));b.addattribute("color",new a(h,3));c="new" y({vertexcolors:2});w.call(this,b,c)}function md(a,b,c,d,e,f){a="a||10;b=b||16;c=c||8;d=d||64;e=new" g="[],h=[],k;for(k=0;k<=b;k++){var" m="k/b*2*Math.PI;var" q="Math.sin(m)*a;m=Math.cos(m)*a;g.push(0,0,0);g.push(q,0,m);var" n.g,n.b);h.push(n.r,n.g,n.b)}for(k="0;k<=c;k++){n=k&1?e:f;var" l="a-a/c*k;for(b=0;b<d;b++)m=b/d*2*Math.PI,q=Math.sin(m)*l,m=Math.cos(m)*l,g.push(q,0,m),h.push(n.r,n.g,n.b),m=(b+1)/d*2*Math.PI,q=Math.sin(m)*l,m=Math.cos(m)*l,g.push(q,0,m),h.push(n.r,n.g,n.b)}a=new" c;a.addattribute("position",new a(g,3));a.addattribute("color",new a(h,3));g="new" y({vertexcolors:2});w.call(this,a,g)}function hd(a,b,c,d){this.object="a;this.size=void" c.isgeometry?b="c.faces.length:console.warn("THREE.FaceNormalsHelper:" only three.geometry is supported. use three.vertexnormalshelper, instead.");c="new" c;b="new" a(6*b,3);c.addattribute("position",b);w.call(this,c,new y({color:a,linewidth:d}));this.matrixautoupdate="!1;this.update()}function" nc(a,b,c){d.call(this);this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void" a([-b,b,0,b,b,0,b,-b,0,-b, -b,0,-b,b,0],3));b="new" y({fog:!1});this.lightplane="new" sa(a,b);this.add(this.lightplane);a="new" a([0,0,0,0,0,1],3));this.targetline="new" sa(a,b);this.add(this.targetline);this.update()}function id(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void d="new" c,e="new" y({color:16777215,vertexcolors:1}),f="[],g=[],h={},k=new" g(16755200),m="new" g(16711680),q="new" g(43775),n="new" g(16777215),l="new" g(3355443); b("n1","n2",k);b("n2","n4",k);b("n4","n3",k);b("n3","n1",k);b("f1","f2",k);b("f2","f4",k);b("f4","f3",k);b("f3","f1",k);b("n1","f1",k);b("n2","f2",k);b("n3","f3",k);b("n4","f4",k);b("p","n1",m);b("p","n2",m);b("p","n3",m);b("p","n4",m);b("u1","u2",q);b("u2","u3",q);b("u3","u1",q);b("c","t",n);b("p","c",l);b("cn1","cn2",l);b("cn3","cn4",l);b("cf1","cf2",l);b("cf3","cf4",l);d.addattribute("position",new a(f,3));d.addattribute("color",new a(g,3));w.call(this,d,e);this.camera="a;this.camera.updateProjectionMatrix&&" this.camera.updateprojectionmatrix();this.matrix="a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function" db(a,b){this.object="a;void" uint16array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c="new" float32array(24),d="new" c;d.setindex(new q(a,1));d.addattribute("position",new q(c,3));w.call(this,d,new y({color:b}));this.matrixautoupdate="!1;this.update()}function" jd(a,b){this.type="Box3Helper" ;this.box="a;a=void" uint16array([0, 1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c;c.setindex(new q(b,1));c.addattribute("position",new a([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));w.call(this,c,new y({color:a}));this.geometry.computeboundingsphere()}function kd(a,b,c){this.type="PlaneHelper" ;this.plane="a;this.size=void" a([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));b.computeboundingsphere();sa.call(this, b,new y({color:a}));b="new" a([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeboundingsphere();this.add(new la(b,new da({color:a,opacity:.2,transparent:!0,depthwrite:!1})))}function eb(a,b,c,d,e,f){d.call(this);void c,nd.addattribute("position",new a([0,0,0,0,1,0],3)),ye="new" wa(0,.5,1,5,1),ye.translate(0,-.5,0));this.position.copy(b);this.line="new" sa(nd,new y({color:d})); this.line.matrixautoupdate="!1;this.add(this.line);this.cone=new" la(ye,new da({color:d}));this.cone.matrixautoupdate="!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)}function" ld(a){a="a||1;var" a(b,3));a.addattribute("color",new a([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b="new" y({vertexcolors:2});w.call(this,a,b)}function yf(a){console.warn("three.closedsplinecurve3 has been deprecated. three.catmullromcurve3 instead."); ca.call(this,a);this.type="catmullrom" ;this.closed="!0}function" zf(a){console.warn("three.splinecurve3 instead.");ca.call(this,a);this.type="catmullrom" }function ze(a){console.warn("three.spline removed. }void a&&isfinite(a)&&math.floor(a)="==" a});void>a?-1:0<a?1:+a});!1==="name"in 0="==Object.assign&&function(){Object.assign=function(a){if(void" function.prototype&&object.defineproperty(function.prototype,"name",{get:function(){return this.tostring().match( ^\s*function\s*([^\(\s]*) )[1]}});void new typeerror("cannot convert undefined or null to object");for(var b="Object(a),c=1;c<arguments.length;c++){var" d="arguments[c];if(void" 0!="=d&&null!==d)for(var" e in d)object.prototype.hasownproperty.call(d, e)&&(b[e]="d[e])}return" b}}();object.assign(ya.prototype,{addeventlistener:function(a,b){void c="this._listeners;void" void this._listeners){var h="{DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var" a="[],b=0;256">b;b++)a[b]=(16>b?"0":"")+b.toString(16);return function(){var b=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return(a[b&255]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+"-"+a[d&255]+a[d>>8&255]+"-"+a[d>>
16&15|64]+a[d>>24&255]+"-"+a[e&63|128]+a[e>>8&255]+"-"+a[e>>16&255]+a[e>>24&255]+a[f&255]+a[f>>8&255]+a[f>>16&255]+a[f>>24&255]).toUpperCase()}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;
a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*H.DEG2RAD},radToDeg:function(a){return a*H.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},ceilPowerOfTwo:function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},floorPowerOfTwo:function(a){return Math.pow(2,Math.floor(Math.log(a)/
Math.LN2))}};Object.defineProperties(z.prototype,{width:{get:function(){return this.x},set:function(a){this.x=a}},height:{get:function(){return this.y},set:function(a){this.y=a}}});Object.assign(z.prototype,{isVector2:!0,set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+
a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=
a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},applyMatrix3:function(a){var b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=a[1]*b+a[4]*c+a[7];return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,
b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a=new z,b=new z;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=
Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+
Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=
(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);
return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});Object.assign(I.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,k,m,q,n,l,u,r,p){var t=this.elements;t[0]=a;t[4]=b;t[8]=c;t[12]=d;t[1]=e;t[5]=f;t[9]=g;t[13]=h;t[2]=k;t[6]=m;t[10]=q;t[14]=n;t[3]=l;t[7]=u;t[11]=r;t[15]=p;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new I).fromArray(this.elements)},
copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,
b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a=new p;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[3]=0;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[7]=0;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c);c=Math.sin(c);var g=Math.cos(d);d=Math.sin(d);var h=Math.cos(e);e=Math.sin(e);if("XYZ"===a.order){a=f*h;var k=f*e,m=c*h,q=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=k+m*d;b[5]=a-q*d;b[9]=-c*g;b[2]=q-a*d;b[6]=m+k*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,k=g*e,m=d*h,q=d*e,b[0]=a+q*c,b[4]=m*c-k,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=k*c-m,b[6]=q+a*c,b[10]=f*g):"ZXY"===a.order?(a=g*h,k=g*e,m=d*h,q=d*e,b[0]=a-q*c,b[4]=-f*e,b[8]=m+k*c,b[1]=k+m*c,b[5]=f*h,b[9]=
q-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,k=f*e,m=c*h,q=c*e,b[0]=g*h,b[4]=m*d-k,b[8]=a*d+q,b[1]=g*e,b[5]=q*d+a,b[9]=k*d-m,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,k=f*d,m=c*g,q=c*d,b[0]=g*h,b[4]=q-a*e,b[8]=m*e+k,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=k*e+m,b[10]=a-q*e):"XZY"===a.order&&(a=f*g,k=f*d,m=c*g,q=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+q,b[5]=f*h,b[9]=k*e-m,b[2]=m*e-k,b[6]=c*h,b[10]=q*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(){var a=
new p(0,0,0),b=new p(1,1,1);return function(c){return this.compose(a,c,b)}}(),lookAt:function(){var a=new p,b=new p,c=new p;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1E-4:c.z+=1E-4,c.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==
b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],k=c[5],m=c[9],q=c[13],n=c[2],l=c[6],u=c[10],r=c[14],p=c[3],y=c[7],x=c[11];c=c[15];var w=d[0],B=d[4],E=d[8],P=d[12],N=d[1],z=d[5],A=d[9],D=d[13],C=d[2],
H=d[6],G=d[10],K=d[14],L=d[3],I=d[7],J=d[11];d=d[15];b[0]=a*w+e*N+f*C+g*L;b[4]=a*B+e*z+f*H+g*I;b[8]=a*E+e*A+f*G+g*J;b[12]=a*P+e*D+f*K+g*d;b[1]=h*w+k*N+m*C+q*L;b[5]=h*B+k*z+m*H+q*I;b[9]=h*E+k*A+m*G+q*J;b[13]=h*P+k*D+m*K+q*d;b[2]=n*w+l*N+u*C+r*L;b[6]=n*B+l*z+u*H+r*I;b[10]=n*E+l*A+u*G+r*J;b[14]=n*P+l*D+u*K+r*d;b[3]=p*w+y*N+x*C+c*L;b[7]=p*B+y*z+x*H+c*I;b[11]=p*E+y*A+x*G+c*J;b[15]=p*P+y*D+x*K+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=
a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix4(this),b.setxyz(c,a.x,a.y,a.z);return b}}(),determinant:function(){var a="this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],k=a[13],m=a[2],q=a[6],n=a[10],l=a[14];return" a[3]*(+e*h*q-d*k*q-e*g*n+c*k*n+d*g*l-c*h*l)+a[7]*(+b*h*l-b*k*n+e*f*n- d*f*l+d*k*m-e*h*m)+a[11]*(+b*k*q-b*g*l-e*f*q+c*f*l+e*g*m-c*k*m)+a[15]*(-d*g*m-b*h*q+b*g*n+d*f*q-c*f*n+c*h*m)},transpose:function(){var b="a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return" this},setposition:function(a){var this},getinverse:function(a,b){var c="this.elements,d=a.elements;a=d[0];var" e="d[1],f=d[2],g=d[3],h=d[4]," k="d[5],m=d[6],q=d[7],n=d[8],l=d[9],u=d[10],r=d[11],p=d[12],y=d[13],x=d[14];d=d[15];var" w="l*x*q-y*u*q+y*m*r-k*x*r-l*m*d+k*u*d,B=p*u*q-n*x*q-p*m*r+h*x*r+n*m*d-h*u*d,E=n*y*q-p*l*q+p*k*r-h*y*r-n*k*d+h*l*d,z=p*l*m-n*y*m-p*k*u+h*y*u+n*k*x-h*l*x,N=a*w+e*B+f*E+g*z;if(0===N){if(!0===b)throw" error("three.matrix4: .getinverse() can't invert matrix, determinant is 0");console.warn("three.matrix4: 0");return this.identity()}b="1/N;c[0]=w*b;c[1]=(y*u*g-l*x*g-y*f*" r+e*x*r+l*f*d-e*u*d)*b;c[2]="(k*x*g-y*m*g+y*f*q-e*x*q-k*f*d+e*m*d)*b;c[3]=(l*m*g-k*u*g-l*f*q+e*u*q+k*f*r-e*m*r)*b;c[4]=B*b;c[5]=(n*x*g-p*u*g+p*f*r-a*x*r-n*f*d+a*u*d)*b;c[6]=(p*m*g-h*x*g-p*f*q+a*x*q+h*f*d-a*m*d)*b;c[7]=(h*u*g-n*m*g+n*f*q-a*u*q-h*f*r+a*m*r)*b;c[8]=E*b;c[9]=(p*l*g-n*y*g-p*e*r+a*y*r+n*e*d-a*l*d)*b;c[10]=(h*y*g-p*k*g+p*e*q-a*y*q-h*e*d+a*k*d)*b;c[11]=(n*k*g-h*l*g-n*e*q+a*l*q+h*e*r-a*k*r)*b;c[12]=z*b;c[13]=(n*y*f-p*l*f+p*e*u-a*y*u-n*e*x+a*l*x)*b;c[14]=(p*k*f-h*y*f-p*e*m+a*y*m+h*e*x-a*k*x)*" b;c[15]="(h*l*f-n*k*f+n*e*m-a*l*m-h*e*u+a*k*u)*b;return" this},scale:function(a){var this},getmaxscaleonaxis:function(){var math.sqrt(math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},maketranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makerotationx:function(a){var this},makerotationy:function(a){var this},makerotationz:function(a){var this},makerotationaxis:function(a,b){var d="1-c,e=a.x,f=a.y;a=a.z;var" g="d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0," 0,0,1);return this},makescale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeshear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function(a,b,c){var l="e*m;e*=q;var" t="f*m;f*=q;g*=q;k*=h;m*=h;h*=q;q=c.x;var" u="c.y;c=c.z;d[0]=(1-(t+g))*q;d[1]=(l+h)*q;d[2]=(e-m)*q;d[3]=0;d[4]=(l-h)*u;d[5]=(1-(b+g))*u;d[6]=(f+k)*u;d[7]=0;d[8]=(e+m)*c;d[9]=(f-k)*c;d[10]=(1-(b+t))*c;d[11]=0;" d[12]="a.x;d[13]=a.y;d[14]=a.z;d[15]=1;return" this},decompose:function(){var p,b="new" i;return function(c,d,e){var f="this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0">this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;f=1/h;var m=1/k;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);
e.x=g;e.y=h;e.z=k;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),k=1/(c-d),m=1/(f-e);g[0]=
2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*m;g[14]=-((f+e)*m);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];
a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});Object.assign(fa,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],k=c[d+1],m=c[d+2];c=c[d+3];d=e[f+0];var q=e[f+1],l=e[f+2];e=e[f+3];if(c!==e||h!==d||k!==q||m!==l){f=1-g;var t=h*d+k*q+m*l+c*e,u=0<=t?1:-1,r=1-t*t;r>Number.EPSILON&&(r=Math.sqrt(r),t=Math.atan2(r,t*u),f=Math.sin(f*t)/r,g=Math.sin(g*
t)/r);u*=g;h=h*f+d*u;k=k*f+q*u;m=m*f+l*u;c=c*f+e*u;f===1-g&&(g=1/Math.sqrt(h*h+k*k+m*m+c*c),h*=g,k*=g,m*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=m;a[b+3]=c}});Object.defineProperties(fa.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=
a;this.onChangeCallback()}}});Object.assign(fa.prototype,{set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var c=
a._x,d=a._y,e=a._z;a=a.order;var f=Math.cos,g=Math.sin,h=f(c/2),k=f(d/2);f=f(e/2);c=g(c/2);d=g(d/2);e=g(e/2);"XYZ"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):"YXZ"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):"ZXY"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):"ZYX"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):"YZX"===a?(this._x=c*k*f+
h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f-c*d*e):"XZY"===a&&(this._x=c*k*f-h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,b){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6];b=b[10];var m=c+f+b;0<m?(c=.5 math.sqrt(m+1),this._w=".25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c">f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new p,b;return function(c,d){void 0===a&&(a=new p);b=c.dot(d)+1;1E-6>b?(b=0,
Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),angleTo:function(a){return 2*Math.acos(Math.abs(H.clamp(this.dot(a),-1,1)))},rotateTowards:function(a,b){var c=this.angleTo(a);if(0===c)return this;this.slerp(a,Math.min(1,b/c));return this},inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*
a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;
0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return 0="==b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return" this._w="f,this._x=c,this._y=d,this._z=e,this;a=1-g*g;if(a<=Number.EPSILON)return" g="1-b,this._w=g*f+b*this._w,this._x=g*c+b*this._x,this._y=g*d+b*this._y,this._z=g*e+b*this._z,this.normalize();a=Math.sqrt(a);var" h="Math.atan2(a,g);g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return" this},equals:function(a){return a._x="==" this._x&&a._y="==this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void" this},toarray:function(a,b){void a},onchange:function(a){this.onchangecallback="a;return" this},onchangecallback:function(){}});object.assign(p.prototype,{isvector3:!0,set:function(a,b,c){this.x="a;this.y=b;this.z=c;return" this}, setscalar:function(a){this.z="this.y=this.x=a;return" this},setx:function(a){this.x="a;return" this},sety:function(a){this.y="a;return" this},setz:function(a){this.z="a;return" this},setcomponent:function(a,b){switch(a){case 0:this.x="b;break;case" 1:this.y="b;break;case" 2:this.z="b;break;default:throw" error("index is out of range: "+a);}return this},getcomponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw "+a);}},clone:function(){return new this.constructor(this.x, this.y,this.z)},copy:function(a){this.x="a.x;this.y=a.y;this.z=a.z;return" this},add:function(a,b){if(void 0!="=b)return" console.warn("three.vector3: .add() now only accepts one argument. use .addvectors( a, b ) instead."),this.addvectors(a,b);this.x+="a.x;this.y+=a.y;this.z+=a.z;return" this},addscalar:function(a){this.x+="a;this.y+=a;this.z+=a;return" this},addvectors:function(a,b){this.x="a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return" this},addscaledvector:function(a,b){this.x+="a.x*b;this.y+=a.y*b;this.z+=" a.z*b;return this},sub:function(a,b){if(void .sub() .subvectors( instead."),this.subvectors(a,b);this.x-="a.x;this.y-=a.y;this.z-=a.z;return" this},subscalar:function(a){this.x-="a;this.y-=a;this.z-=a;return" this},subvectors:function(a,b){this.x="a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return" this},multiply:function(a,b){if(void .multiply() .multiplyvectors( instead."), this.multiplyvectors(a,b);this.x*="a.x;this.y*=a.y;this.z*=a.z;return" this},multiplyscalar:function(a){this.x*="a;this.y*=a;this.z*=a;return" this},multiplyvectors:function(a,b){this.x="a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return" this},applyeuler:function(){var a="new" fa;return function(b){b&&b.iseuler||console.error("three.vector3: .applyeuler() expects an euler rotation rather than vector3 and order.");return this.applyquaternion(a.setfromeuler(b))}}(),applyaxisangle:function(){var function(b, c){return this.applyquaternion(a.setfromaxisangle(b,c))}}(),applymatrix3:function(a){var this},applymatrix4:function(a){var e="1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return" this},applyquaternion:function(a){var c="this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var" this},project:function(){var i;return function(b){a.multiplymatrices(b.projectionmatrix,a.getinverse(b.matrixworld));return this.applymatrix4(a)}}(),unproject:function(){var function(b){a.multiplymatrices(b.matrixworld,a.getinverse(b.projectionmatrix));return this.applymatrix4(a)}}(),transformdirection:function(a){var this.normalize()},divide:function(a){this.x =a.x;this.y =a.y;this.z =a.z;return this},dividescalar:function(a){return this.multiplyscalar(1 a)},min:function(a){this.x="Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return" this},max:function(a){this.x="Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return" this},clamp:function(a, b){this.x="Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return" this},clampscalar:function(){var p,b="new" p;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clamplength:function(a,b){var this.dividescalar(c||1).multiplyscalar(math.max(a,math.min(b,c)))},floor:function(){this.x="Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return" this},ceil:function(){this.x="Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return" this},round:function(){this.x="Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return" this},roundtozero:function(){this.x="0">this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*
a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,
b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b)):this.crossVectors(this,a)},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=
new p;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new p;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(H.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-
a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),
c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==
c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(ra.prototype,{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,k){var m=this.elements;m[0]=a;m[1]=d;m[2]=g;m[3]=b;m[4]=e;m[5]=h;m[6]=c;m[7]=f;m[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;
b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix3(this),b.setxyz(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return this.multiplymatrices(this,a)},premultiply:function(a){return this.multiplymatrices(a, this)},multiplymatrices:function(a,b){var c="a.elements,d=b.elements;b=this.elements;a=c[0];var" e="c[3],f=c[6],g=c[1],h=c[4],k=c[7],m=c[2],q=c[5];c=c[8];var" l="d[0],t=d[3],u=d[6],r=d[1],p=d[4],y=d[7],x=d[2],w=d[5];d=d[8];b[0]=a*l+e*r+f*x;b[3]=a*t+e*p+f*w;b[6]=a*u+e*y+f*d;b[1]=g*l+h*r+k*x;b[4]=g*t+h*p+k*w;b[7]=g*u+h*y+k*d;b[2]=m*l+q*r+c*x;b[5]=m*t+q*p+c*w;b[8]=m*u+q*y+c*d;return" this},multiplyscalar:function(a){var b="this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=" a;return this},determinant:function(){var a="this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7];a=a[8];return" b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*h},getinverse:function(a,b){a&&a.ismatrix4&&console.error("three.matrix3: .getinverse() no longer takes matrix4 argument.");var d="c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],m=c[6],q=c[7];c=c[8];var" error("three.matrix3: can't invert matrix, determinant is 0"); console.warn("three.matrix3: 0");return this.identity()}b="1/r;a[0]=l*b;a[1]=(f*q-c*e)*b;a[2]=(k*e-f*h)*b;a[3]=t*b;a[4]=(c*d-f*m)*b;a[5]=(f*g-k*d)*b;a[6]=u*b;a[7]=(e*m-q*d)*b;a[8]=(h*d-e*g)*b;return" this},transpose:function(){var this},getnormalmatrix:function(a){return this.setfrommatrix4(a).getinverse(this).transpose()},transposeintoarray:function(a){var this},setuvtransform:function(a,b,c,d,e,f,g){var h="Math.cos(e);e=Math.sin(e);this.set(c*h,c*e,-c*(h*f+e*g)+f+a,-d*e,d*h,-d*(-e*f+h*g)+g+b,0,0,1)},scale:function(a,b){var" this},rotate:function(a){var b*f+a*k;c[1]="-a*d+b*g;c[4]=-a*e+b*h;c[7]=-a*f+b*k;return" this},translate:function(a,b){var this},equals:function(a){var>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];
a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}});var eb={getDataURL:function(a){if(a instanceof HTMLCanvasElement)var b=a;else{"undefined"!==typeof OffscreenCanvas?b=new OffscreenCanvas(a.width,a.height):(b=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),b.width=a.width,b.height=a.height);var c=b.getContext("2d");a instanceof ImageData?c.putImageData(a,0,0):c.drawImage(a,0,0,a.width,a.height)}return 2048<b.width||2048<b.height?b.todataurl("image 0="==a||"string"===typeof" jpeg", .6):b.todataurl("image png")}},ef="0;T.DEFAULT_IMAGE=void" 0;t.default_mapping="300;T.prototype=Object.assign(Object.create(ya.prototype),{constructor:T,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new" this.constructor).copy(this)},copy:function(a){this.name="a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=" a.wrapt;this.magfilter="a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return" this},tojson:function(a){var b="void" a;if(!b&&void 0!="=a.textures[this.uuid])return" a.textures[this.uuid];var c="{metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void" this.image){var d="this.image;void" e="[];for(var" f="0,g=d.length;f<g;f++)e.push(eb.getDataURL(d[f]))}else" c},dispose:function(){this.dispatchevent({type:"dispose"})},transformuv:function(a){if(300="==this.mapping){a.applyMatrix3(this.matrix);if(0">a.x||1<a.x)switch(this.wraps){case 1e3:a.x-="Math.floor(a.x);" break;case 1001:a.x="0">a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapt){case 1e3:a.y-="Math.floor(a.y);break;case" 1001:a.y="0">a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}});Object.defineProperty(T.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(V.prototype,{isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=
b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;
case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=
a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=
a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/
a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],f=a[5],g=a[9];var h=a[2];var k=a[6];var m=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-k)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+k)&&.1>Math.abs(b+f+m-3))return this.set(1,0,0,0),this;a=Math.PI;
b=(b+1)/2;f=(f+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+h)/4;g=(g+k)/4;b>f&&b>m?.01>b?(k=0,c=h=.707106781):(k=Math.sqrt(b),h=c/k,c=d/k):f>m?.01>f?(k=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),k=c/h,c=g/h):.01>m?(h=k=.707106781,c=0):(c=Math.sqrt(m),k=d/c,h=g/c);this.set(k,h,c,a);return this}a=Math.sqrt((k-g)*(k-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(k-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;this.w=Math.acos((b+f+m-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,
a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new V,b=new V);a.set(c,
c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);
this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,
b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");
this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}});fb.prototype=Object.assign(Object.create(ya.prototype),{constructor:fb,isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();
this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Gb.prototype=Object.create(fb.prototype);Gb.prototype.constructor=Gb;Gb.prototype.isWebGLRenderTargetCube=!0;gb.prototype=Object.create(T.prototype);gb.prototype.constructor=gb;gb.prototype.isDataTexture=!0;Object.assign(Sa.prototype,{isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=
Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.length;h<k;h+=3){var m="a[h],q=a[h+1],l=a[h+2];m<b&&(b=m);q<c&&(c=q);l<d&&(d=l);m">e&&(e=m);q>f&&(f=q);l>g&&(g=l)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.count;h<k;h++){var m="a.getX(h),l=a.getY(h),n=a.getZ(h);m<b&&(b=m);l<c&&(c=l);n<d&&(d=n);m">e&&(e=m);l>f&&(f=l);n>g&&(g=n)}this.min.set(b,c,d);
this.max.set(e,f,g);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandbypoint(a[b]);return 0="==a&&(console.warn("THREE.Box3:" this},setfromcenterandsize:function(){var a="new" p;return function(b,c){c="a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return" this}}(),setfromobject:function(a){this.makeempty();return this.expandbyobject(a)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this}, makeempty:function(){this.min.x="this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return" this},isempty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getcenter:function(a){void .getcenter() target is now required"),a="new" p);return this.isempty()?a.set(0,0,0):a.addvectors(this.min,this.max).multiplyscalar(.5)},getsize:function(a){void .getsize() required"), this.isempty()?a.set(0,0,0):a.subvectors(this.max,this.min)},expandbypoint:function(a){this.min.min(a);this.max.max(a);return this},expandbyvector:function(a){this.min.sub(a);this.max.add(a);return this},expandbyscalar:function(a){this.min.addscalar(-a);this.max.addscalar(a);return this},expandbyobject:function(){function a(a){var f="a.geometry;if(void" 0!="=f)if(f.isGeometry)for(f=f.vertices,c=0,d=f.length;c<d;c++)e.copy(f[c]),e.applyMatrix4(a.matrixWorld),b.expandByPoint(e);else" if(f.isbuffergeometry&& (f="f.attributes.position,void" b,c,d,e="new" function(c){b="this;c.updateMatrixWorld(!0);c.traverse(a);return" this}}(),containspoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&& 0="==b&&(console.warn("THREE.Box3:" a.max.z<="this.max.z},getParameter:function(a,b){void" .getparameter() target is now required"),b="new" p);return b.set((a.x-this.min.x) (this.max.x-this.min.x),(a.y-this.min.y) (this.max.y-this.min.y),(a.z-this.min.z) (this.max.z-this.min.z))},intersectsbox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new p;return function(b){this.clampPoint(b.center,
a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsplane:function(a){if(0<a.normal.x){var b="a.normal.x*this.min.x;var" c="a.normal.x*this.max.x}else" b<="a.constant&&c">=a.constant},intersectsTriangle:function(){function a(a){var e;
var f=0;for(e=a.length-3;f<=e;f+=3){h.fromarray(a,f);var g="m.x*Math.abs(h.x)+m.y*Math.abs(h.y)+m.z*Math.abs(h.z),k=b.dot(h),l=c.dot(h),q=d.dot(h);if(Math.max(-Math.max(k,l,q),Math.min(k,l,q))">g)return!1}return!0}var b=new p,c=new p,d=new p,e=new p,f=new p,g=new p,h=new p,k=new p,m=new p,l=new p;return function(h){if(this.isEmpty())return!1;this.getCenter(k);m.subVectors(this.max,k);b.subVectors(h.a,k);c.subVectors(h.b,k);d.subVectors(h.c,k);e.subVectors(c,b);f.subVectors(d,c);g.subVectors(b,d);h=
[0,-e.z,e.y,0,-f.z,f.y,0,-g.z,g.y,e.z,0,-e.x,f.z,0,-f.x,g.z,0,-g.x,-e.y,e.x,0,-f.y,f.x,0,-g.y,g.x,0];if(!a(h))return!1;h=[1,0,0,0,1,0,0,0,1];if(!a(h))return!1;l.crossVectors(e,f);h=[l.x,l.y,l.z];return a(h)}}(),clampPoint:function(a,b){void 0===b&&(console.warn("THREE.Box3: .clampPoint() target is now required"),b=new p);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new p;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=
new p;return function(b){void 0===b&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),b=new Da);this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(a){if(this.isEmpty())return this;a=a.elements;var b=a[0]*this.min.x,c=a[1]*this.min.x,d=a[2]*this.min.x,e=
a[0]*this.max.x,f=a[1]*this.max.x,g=a[2]*this.max.x,h=a[4]*this.min.y,k=a[5]*this.min.y,m=a[6]*this.min.y,l=a[4]*this.max.y,n=a[5]*this.max.y,t=a[6]*this.max.y,u=a[8]*this.min.z,r=a[9]*this.min.z,p=a[10]*this.min.z,y=a[8]*this.max.z,x=a[9]*this.max.z,w=a[10]*this.max.z;this.min.x=Math.min(b,e)+Math.min(h,l)+Math.min(u,y)+a[12];this.min.y=Math.min(c,f)+Math.min(k,n)+Math.min(r,x)+a[13];this.min.z=Math.min(d,g)+Math.min(m,t)+Math.min(p,w)+a[14];this.max.x=Math.max(b,e)+Math.max(h,l)+Math.max(u,y)+a[12];
this.max.y=Math.max(c,f)+Math.max(k,n)+Math.max(r,x)+a[13];this.max.z=Math.max(d,g)+Math.max(m,t)+Math.max(p,w)+a[14];return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Da.prototype,{set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Sa;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=
c=0,f=b.length;e<f;e++)c=math.max(c,d.distancetosquared(b[e]));this.radius=math.sqrt(c);return 0 this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius="a.radius;return" this},empty:function(){return>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distancetopoint:function(a){return 0="==b&&(console.warn("THREE.Sphere:" a.distanceto(this.center)-this.radius},intersectssphere:function(a){var b="this.radius+a.radius;" return a.center.distancetosquared(this.center)<="b*b},intersectsBox:function(a){return" a.intersectssphere(this)},intersectsplane:function(a){return math.abs(a.distancetopoint(this.center))<="this.radius},clampPoint:function(a,b){var" c="this.center.distanceToSquared(a);void" .clamppoint() target is now required"),b="new" p);b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){void 0===
a&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),a=new Sa);a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}});Object.assign(Ma.prototype,{set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,
b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new p,b=new p;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=
1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){void 0===b&&(console.warn("THREE.Plane: .projectPoint() target is now required"),b=new p);return b.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=
new p;return function(b,c){void 0===c&&(console.warn("THREE.Plane: .intersectLine() target is now required"),c=new p);var d=b.delta(a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return 0 c.copy(d).multiplyscalar(e).add(b.start)}}(),intersectsline:function(a){var b="this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return">b&&0<a||0>a&&0<b},intersectsbox:function(a){return 0="==a&&(console.warn("THREE.Plane:" a.intersectsplane(this)}, intersectssphere:function(a){return a.intersectsplane(this)},coplanarpoint:function(a){void .coplanarpoint() target is now required"),a="new" p);return a.copy(this.normal).multiplyscalar(-this.constant)},applymatrix4:function(){var a="new" p,b="new" ra;return function(c,d){d="d||b.getNormalMatrix(c);c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return" this}}(),translate:function(a){this.constant-="a.dot(this.normal);" return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant="==this.constant}});Object.assign(md.prototype,{set:function(a,b,c,d,e,f){var" g="this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return" this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b="this.planes,c=0;6">c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],
h=c[5],k=c[6],m=c[7],l=c[8],n=c[9],t=c[10],p=c[11],r=c[12],v=c[13],y=c[14];c=c[15];b[0].setComponents(f-a,m-g,p-l,c-r).normalize();b[1].setComponents(f+a,m+g,p+l,c+r).normalize();b[2].setComponents(f+d,m+h,p+n,c+v).normalize();b[3].setComponents(f-d,m-h,p-n,c-v).normalize();b[4].setComponents(f-e,m-k,p-t,c-y).normalize();b[5].setComponents(f+e,m+k,p+t,c+y).normalize();return this},intersectsObject:function(){var a=new Da;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();
a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Da;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsbox:function(){var a="new" p;return function(b){for(var c="this.planes,d=0;6">d;d++){var e=c[d];
a.x=0<e.normal.x?b.max.x:b.min.x;a.y=0<e.normal.y?b.max.y:b.min.y;a.z=0<e.normal.z?b.max.z:b.min.z;if(0>e.distanceToPoint(a))return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}});var S={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",
aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",
begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",
color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",
defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",
emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",
fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",
gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",
lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",
map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",
metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",
normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowcoord.y>= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool infrustum="all(" infrustumvec );\n\t\tbvec2 frustumtestvec="bvec2(" infrustum, shadowcoord.z <="1.0" frustumtest="all(" );\n\t\tif ( ) {\n\t\t#if defined( shadowmap_type_pcf )\n\t\t\tvec2 texelsize="vec2(" shadowmapsize;\n\t\t\tfloat dx0="-" texelsize.x * shadowradius;\n\t\t\tfloat dy0="-" texelsize.y dx1="+" dy1="+" shadowradius;\n\t\t\tshadow="(\n\t\t\t\ttexture2DCompare(" shadowmap, shadowcoord.xy + vec2( dx0, ), +\n\t\t\t\ttexture2dcompare( 0.0, dx1, 0.0 shadowcoord.xy, )\n\t\t\t) 9.0 );\n\t\t#elif shadowmap_type_pcf_soft shadowmapsize, +\n\t\t\t\ttexture2dshadowlerp( );\n\t\t#else\n\t\t\tshadow="texture2DCompare(" );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubetouv( vec3 v, float texelsizey {\n\t\tvec3 absv="abs(" v );\n\t\tfloat scaletocube="1.0" max( absv.x, absv.y, absv.z );\n\t\tabsv - 2.0 );\n\t\tvec2 planar="v.xy;\n\t\tfloat" almostatexel="1.5" texelsizey;\n\t\tfloat almostone="1.0" almostatexel;\n\t\tif>= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",
uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",
uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",
uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",
cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},
Aa={merge:function(a){for(var b={},c=0;c<a.length;c++){var d="this.clone(a[c]),e;for(e" in d)b[e]="d[e]}return" b},clone:function(a){var b="{},c;for(c" a){b[c]="{};for(var" a[c]){var e="a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return" b}},tg="{aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045," blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495, darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976, lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097, mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736, rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};object.assign(g.prototype, {iscolor:!0,r:1,g:1,b:1,set:function(a){a&&a.iscolor?this.copy(a):"number"="==typeof" a?this.sethex(a):"string"="==typeof" a&&this.setstyle(a);return this},setscalar:function(a){this.b="this.g=this.r=a;return" this},sethex:function(a){a="Math.floor(a);this.r=(a">>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1 6?a+6*(c-a)*d:.5>d?c:d<2 3?a+6*(c-a)*(2 3-d):a}return function(b, c,d){b="H.euclideanModulo(b,1);c=H.clamp(c,0,1);d=H.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5">=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=
Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){d=parseFloat(c[1])/
360;var e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=tg[a], 0="==b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return" void 0!="=c?this.setHex(c):console.warn("THREE.Color:" unknown color "+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r="a.r;this.g=a.g;this.b=a.b;return" this},copygammatolinear:function(a,b){void this},copylineartogamma:function(a,b){void this},convertgammatolinear:function(a){this.copygammatolinear(this, a);return this},convertlineartogamma:function(a){this.copylineartogamma(this,a);return this},copysrgbtolinear:function(){function a(a){return.04045>a?.0773993808*a:Math.pow(.9478672986*a+.0521327014,2.4)}return function(b){this.r=a(b.r);this.g=a(b.g);this.b=a(b.b);return this}}(),copyLinearToSRGB:function(){function a(a){return.0031308>a?12.92*a:1.055*Math.pow(a,.41666)-.055}return function(b){this.r=a(b.r);this.g=a(b.g);this.b=a(b.b);return this}}(),convertSRGBToLinear:function(){this.copySRGBToLinear(this);
return this},convertLinearToSRGB:function(){this.copyLinearToSRGB(this);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},gethexstring:function(){return("000000"+this.gethex().tostring(16)).slice(-6)},gethsl:function(a){void 0="==a&&(console.warn("THREE.Color:" .gethsl() target is now required"),a="{h:0,s:0,l:0});var" b="this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var" k="e-f;f=.5">=h?k/(e+f):k/(2-e-f);switch(e){case b:g=(c-
d)/k+(c<d?6:0);break;case 0="==b&&(b=0);this.r=" c:g="(d-b)/k+2;break;case" d:g="(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return" a},getstyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsethsl:function(){var a="{};return" function(b,c,d){this.gethsl(a);a.h+="b;a.s+=c;a.l+=d;this.setHSL(a.h,a.s,a.l);return" this}}(),add:function(a){this.r+="a.r;this.g+=a.g;this.b+=a.b;return" this},addcolors:function(a,b){this.r="a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return" this},addscalar:function(a){this.r+="a;this.g+=" a;this.b+="a;return" this},sub:function(a){this.r="Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return" this},multiply:function(a){this.r*="a.r;this.g*=a.g;this.b*=a.b;return" this},multiplyscalar:function(a){this.r*="a;this.g*=a;this.b*=a;return" this},lerp:function(a,b){this.r+="(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return" this},equals:function(a){return a.r="==this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void" a[b];this.g="a[b+1];this.b=a[b+2];return" this},toarray:function(a,b){void a},tojson:function(){return this.gethex()}});var k="{common:{diffuse:{value:new" g(15658734)},opacity:{value:1},map:{value:null},uvtransform:{value:new ra},alphamap:{value:null}},specularmap:{specularmap:{value:null}},envmap:{envmap:{value:null},flipenvmap:{value:-1},reflectivity:{value:1},refractionratio:{value:.98},maxmiplevel:{value:0}},aomap:{aomap:{value:null}, aomapintensity:{value:1}},lightmap:{lightmap:{value:null},lightmapintensity:{value:1}},emissivemap:{emissivemap:{value:null}},bumpmap:{bumpmap:{value:null},bumpscale:{value:1}},normalmap:{normalmap:{value:null},normalscale:{value:new z(1,1)}},displacementmap:{displacementmap:{value:null},displacementscale:{value:1},displacementbias:{value:0}},roughnessmap:{roughnessmap:{value:null}},metalnessmap:{metalnessmap:{value:null}},gradientmap:{gradientmap:{value:null}},fog:{fogdensity:{value:2.5e-4},fognear:{value:1}, fogfar:{value:2e3},fogcolor:{value:new g(16777215)}},lights:{ambientlightcolor:{value:[]},directionallights:{value:[],properties:{direction:{},color:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{}}},directionalshadowmap:{value:[]},directionalshadowmatrix:{value:[]},spotlights:{value:[],properties:{color:{},position:{},direction:{},distance:{},conecos:{},penumbracos:{},decay:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{}}},spotshadowmap:{value:[]},spotshadowmatrix:{value:[]}, pointlights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{},shadowcameranear:{},shadowcamerafar:{}}},pointshadowmap:{value:[]},pointshadowmatrix:{value:[]},hemispherelights:{value:[],properties:{direction:{},skycolor:{},groundcolor:{}}},rectarealights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new g(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvtransform:{value:new ra}}, sprite:{diffuse:{value:new g(15658734)},opacity:{value:1},center:{value:new z(.5,.5)},rotation:{value:0},map:{value:null},uvtransform:{value:new ra}}},nb="{basic:{uniforms:Aa.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.fog]),vertexShader:S.meshbasic_vert,fragmentShader:S.meshbasic_frag},lambert:{uniforms:Aa.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.emissivemap,K.fog,K.lights,{emissive:{value:new" g(0)}}]),vertexshader:s.meshlambert_vert,fragmentshader:s.meshlambert_frag}, phong:{uniforms:aa.merge([k.common,k.specularmap,k.envmap,k.aomap,k.lightmap,k.emissivemap,k.bumpmap,k.normalmap,k.displacementmap,k.gradientmap,k.fog,k.lights,{emissive:{value:new g(0)},specular:{value:new g(1118481)},shininess:{value:30}}]),vertexshader:s.meshphong_vert,fragmentshader:s.meshphong_frag},standard:{uniforms:aa.merge([k.common,k.envmap,k.aomap,k.lightmap,k.emissivemap,k.bumpmap,k.normalmap,k.displacementmap,k.roughnessmap,k.metalnessmap,k.fog,k.lights,{emissive:{value:new g(0)},roughness:{value:.5}, metalness:{value:.5},envmapintensity:{value:1}}]),vertexshader:s.meshphysical_vert,fragmentshader:s.meshphysical_frag},points:{uniforms:aa.merge([k.points,k.fog]),vertexshader:s.points_vert,fragmentshader:s.points_frag},dashed:{uniforms:aa.merge([k.common,k.fog,{scale:{value:1},dashsize:{value:1},totalsize:{value:2}}]),vertexshader:s.linedashed_vert,fragmentshader:s.linedashed_frag},depth:{uniforms:aa.merge([k.common,k.displacementmap]),vertexshader:s.depth_vert,fragmentshader:s.depth_frag},normal:{uniforms:aa.merge([k.common, k.bumpmap,k.normalmap,k.displacementmap,{opacity:{value:1}}]),vertexshader:s.normal_vert,fragmentshader:s.normal_frag},sprite:{uniforms:aa.merge([k.sprite,k.fog]),vertexshader:s.sprite_vert,fragmentshader:s.sprite_frag},cube:{uniforms:{tcube:{value:null},tflip:{value:-1},opacity:{value:1}},vertexshader:s.cube_vert,fragmentshader:s.cube_frag},equirect:{uniforms:{tequirect:{value:null}},vertexshader:s.equirect_vert,fragmentshader:s.equirect_frag},distancergba:{uniforms:aa.merge([k.common,k.displacementmap, {referenceposition:{value:new p},neardistance:{value:1},fardistance:{value:1e3}}]),vertexshader:s.distancergba_vert,fragmentshader:s.distancergba_frag},shadow:{uniforms:aa.merge([k.lights,k.fog,{color:{value:new g(0)},opacity:{value:1}}]),vertexshader:s.shadow_vert,fragmentshader:s.shadow_frag}};nb.physical="{uniforms:Aa.merge([nb.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:S.meshphysical_vert,fragmentShader:S.meshphysical_frag};hb.RotationOrders="XYZ" yzx zxy xzy yxz zyx".split(" "); hb.defaultorder="XYZ" ;object.defineproperties(hb.prototype,{x:{get:function(){return this._x},set:function(a){this._x="a;this.onChangeCallback()}},y:{get:function(){return" this._y},set:function(a){this._y="a;this.onChangeCallback()}},z:{get:function(){return" this._z},set:function(a){this._z="a;this.onChangeCallback()}},order:{get:function(){return" this._order},set:function(a){this._order="a;this.onChangeCallback()}}});Object.assign(hb.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=" c;this._order="d||this._order;this.onChangeCallback();return" this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x="a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return" this},setfromrotationmatrix:function(a,b,c){var d="H.clamp,e=a.elements;a=e[0];var" f="e[4],g=e[8],h=e[1],k=e[5],m=e[9],l=e[2],n=e[6];e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(g,-1,1)),.99999">Math.abs(g)?(this._x=Math.atan2(-m,e),this._z=
Math.atan2(-f,a)):(this._x=Math.atan2(n,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-l,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(n,-1,1)),.99999>Math.abs(n)?(this._y=Math.atan2(-l,e),this._z=Math.atan2(-f,k)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(n,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,k))):"YZX"===
b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-m,k),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(g,e))):"XZY"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(n,k),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-m,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new I;return function(b,c,d){a.makeRotationFromQuaternion(b);
return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new fa;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);
void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new p(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(Rd.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask=this.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return 0="==a&&(console.warn("THREE.Object3D:" 0!="=(this.mask&" a.mask)}});var gf="0;D.DefaultUp=new" p(0,1,0);d.defaultmatrixautoupdate="!0;D.prototype=Object.assign(Object.create(ya.prototype),{constructor:D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){this.quaternion.premultiply(a);return" this},setrotationfromaxisangle:function(a,b){this.quaternion.setfromaxisangle(a,b)},setrotationfromeuler:function(a){this.quaternion.setfromeuler(a, !0)},setrotationfrommatrix:function(a){this.quaternion.setfromrotationmatrix(a)},setrotationfromquaternion:function(a){this.quaternion.copy(a)},rotateonaxis:function(){var a="new" fa;return function(b,c){a.setfromaxisangle(b,c);this.quaternion.multiply(a);return this}}(),rotateonworldaxis:function(){var function(b,c){a.setfromaxisangle(b,c);this.quaternion.premultiply(a);return this}}(),rotatex:function(){var p(1,0,0);return function(b){return this.rotateonaxis(a,b)}}(),rotatey:function(){var p(0,1,0);return this.rotateonaxis(a,b)}}(),rotatez:function(){var p(0,0,1);return this.rotateonaxis(a,b)}}(),translateonaxis:function(){var p;return function(b,c){a.copy(b).applyquaternion(this.quaternion);this.position.add(a.multiplyscalar(c));return this}}(),translatex:function(){var this.translateonaxis(a,b)}}(),translatey:function(){var this.translateonaxis(a, b)}}(),translatez:function(){var this.translateonaxis(a,b)}}(),localtoworld:function(a){return a.applymatrix4(this.matrixworld)},worldtolocal:function(){var i;return b.applymatrix4(a.getinverse(this.matrixworld))}}(),lookat:function(){var i,b="new" function(c,d,e){c.isvector3?b.copy(c):b.set(c,d,e);this.iscamera?a.lookat(this.position,b,this.up):a.lookat(b,this.position,this.up);this.quaternion.setfromrotationmatrix(a)}}(), add:function(a){if(1<arguments.length){for(var b="0;b<arguments.length;b++)this.add(arguments[b]);return" this}if(a="==this)return" console.error("three.object3d.add: object can't be added as child of itself.",a),this;a&&a.isobject3d?(null!="=a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add:" not an instance three.object3d.",a);return this},remove:function(a){if(1<arguments.length){for(var return this}b="this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1));return" this},getobjectbyid:function(a){return this.getobjectbyproperty("id",a)},getobjectbyname:function(a){return this.getobjectbyproperty("name",a)},getobjectbyproperty:function(a,b){if(this[a]="==b)return" this;for(var c="0,d=this.children.length;c<d;c++){var" e="this.children[c].getObjectByProperty(a,b);if(void" e}},getworldposition:function(a){void .getworldposition() target is now required"), p);this.updatematrixworld(!0);return a.setfrommatrixposition(this.matrixworld)},getworldquaternion:function(){var p,b="new" function(c){void .getworldquaternion() required"),c="new" fa);this.updatematrixworld(!0);this.matrixworld.decompose(a,c,b);return c}}(),getworldscale:function(){var .getworldscale() p);this.updatematrixworld(!0); this.matrixworld.decompose(a,b,c);return c}}(),getworlddirection:function(){var function(b){void .getworlddirection() required"),b="new" p);this.getworldquaternion(a);return b.set(0,0,1).applyquaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var traverseancestors:function(a){var 0,d="b.length;c<d;c++)b[c].updateMatrixWorld(a)},toJSON:function(a){function" b(b,c){void c.uuid}function c(a){var in a){var d="a[c];delete" d.metadata;b.push(d)}return b}var a,e="{};d&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var" f="{};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);!0===this.castShadow&&" (f.castshadow="!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);!1===this.frustumCulled&&(f.frustumCulled=!1);0!==this.renderOrder&&(f.renderOrder=this.renderOrder);"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData);f.layers=this.layers.mask;f.matrix=this.matrix.toArray();!1===this.matrixAutoUpdate&&(f.matrixAutoUpdate=!1);if(this.isMesh||this.isLine||this.isPoints){f.geometry=b(a.geometries,this.geometry);var" g="this.geometry.parameters;if(void" g&&void h="0,k=g.length;h<k;h++)b(a.shapes,g[h]);else" b(a.shapes,g)}if(void f.material="b(a.materials,this.material);if(0<this.children.length)for(f.children=[],h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(a).object);if(d){d=c(a.geometries);h=c(a.materials);k=c(a.textures);" var m="c(a.images);g=c(a.shapes);0<d.length&&(e.geometries=d);0<h.length&&(e.materials=h);0<k.length&&(e.textures=k);0<m.length&&(e.images=m);0<g.length&&(e.shapes=g)}e.object=f;return" e},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void this.matrixworldneedsupdate="a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return" this}});na.prototype="Object.assign(Object.create(D.prototype),{constructor:Na,isCamera:!0,copy:function(a,b){D.prototype.copy.call(this," a,b);this.matrixworldinverse.copy(a.matrixworldinverse);this.projectionmatrix.copy(a.projectionmatrix);return this},getworlddirection:function(){var b.set(0,0,-1).applyquaternion(a)}}(),updatematrixworld:function(a){d.prototype.updatematrixworld.call(this,a);this.matrixworldinverse.getinverse(this.matrixworld)},clone:function(){return(new this.constructor).copy(this)}}); hb.prototype="Object.assign(Object.create(Na.prototype),{constructor:Hb,isOrthographicCamera:!0,copy:function(a,b){Na.prototype.copy.call(this,a,b);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return" this},setviewoffset:function(a,b,c,d,e,f){null="==this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=" a;this.view.fullheight="b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var" a.object.far="this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return" a}});object.assign(ta.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a="a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var" this}}); hf="0;R.prototype=Object.assign(Object.create(ya.prototype),{constructor:R,isGeometry:!0,applyMatrix:function(a){for(var" ra).getnormalmatrix(a),c="0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var" this.normalsneedupdate="this.verticesNeedUpdate=!0;return" this},rotatex:function(){var function(b){a.makerotationx(b);this.applymatrix(a);return this}}(),rotatey:function(){var function(b){a.makerotationy(b);this.applymatrix(a);return this}}(),rotatez:function(){var function(b){a.makerotationz(b);this.applymatrix(a);return this}}(),translate:function(){var function(b,c,d){a.maketranslation(b,c,d);this.applymatrix(a);return this}}(),scale:function(){var function(b,c,d){a.makescale(b,c,d);this.applymatrix(a);return this}}(),lookat:function(){var d;return function(b){a.lookat(b);a.updatematrix();this.applymatrix(a.matrix)}}(),frombuffergeometry:function(a){function b(a,b,d,e){var ta(a,b,d,f,q,e);c.faces.push(e);void m&&c.facevertexuvs[1].push([t[a].clone(),t[b].clone(),t[d].clone()])}var 0,e="a.attributes,f=e.position.array,g=void" 0,h="void" 0,k="void" 0,m="void" 0;void l="[],n=[],t=[],u=e=0;e<f.length;e+=3,u+=2)c.vertices.push(new" p(f[e],f[e+1],f[e+2])),void p(g[e],g[e+1],g[e+2])),void g(h[e], h[e+1],h[e+2])),void z(k[u],k[u+1])),void z(m[u],m[u+1]));var r="a.groups;if(0<r.length)for(e=0;e<r.length;e++){f=r[e];var" v="f.start,y=f.count;u=v;for(v+=y;u<v;u+=3)void" if(void for(e="0;e<f.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&" (this.boundingsphere="a.boundingSphere.clone());return" this},center:function(){var function(){this.computeboundingbox();this.boundingbox.getcenter(a).negate();this.translate(a.x,a.y,a.z);return this}}(),normalize:function(){this.computeboundingsphere();var i;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applymatrix(c);return this},computefacenormals:function(){for(var p,c="0,d=" this.faces.length;c<d;c++){var b;var p;if(a){var p,f="new" p;a="0;for(d=this.faces.length;a<d;a++){b=this.faces[a];var" k="this.vertices[b.c];e.subVectors(k," h);f.subvectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(this.computefacenormals(),a="0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):(g[0]=c[b.a].clone(),g[1]=c[b.b].clone(),g[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=" !0)},computeflatvertexnormals:function(){var a;this.computefacenormals();var a,b;var d.__originalfacenormal="d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var" r;f.faces="this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;" p;var p,b:new p,c:new p};d.push(h);g.push(k)}}g="this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(d.normal),k.a.copy(d.vertexNormals[0]),k.b.copy(d.vertexNormals[1]),k.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c]," d.normal="d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new" sa);this.boundingbox.setfrompoints(this.vertices)},computeboundingsphere:function(){null="==this.boundingSphere&&(this.boundingSphere=new" da);this.boundingsphere.setfrompoints(this.vertices)},merge:function(a,b,c){if(a&&a.isgeometry){var d,e="this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,k=a.faces,m=this.faceVertexUvs[0],l=a.faceVertexUvs[0]," n="this.colors,t=a.colors;void" ra).getnormalmatrix(b));a="0;for(var" p="g.length;a<p;a++){var" ta(g.a+e,g.b+e,g.c+e);n.normal.copy(g.normal);void n.color.copy(g.color);b="0;for(f=t.length;b<f;b++)r=t[b],n.vertexColors.push(r.clone());n.materialIndex=g.materialIndex+c;h.push(n)}a=0;for(p=l.length;a<p;a++)if(c=l[a],d=[],void" console.error("three.geometry.merge(): geometry three.geometry.",a)},mergemesh:function(a){a&&a.ismesh?(a.matrixautoupdate&&a.updatematrix(),this.merge(a.geometry,a.matrix)):console.error("three.geometry.mergemesh(): mesh three.mesh.", a)},mergevertices:function(){var>g;g++)if(d[g]===d[(g+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e= 0="==this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<c;e++){var" this.facevertexuvs.length;c<e;c++)this.facevertexuvs[c].splice(d,1);f="this.vertices.length-b.length;this.vertices=b;return" f},setfrompoints:function(a){this.vertices="[];for(var" b="0,c=a.length;b<c;b++){var" d="a[b];this.vertices.push(new" p(d.x,d.y,d.z||0))}return this},sortfacesbymaterialindex:function(){for(var a="this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return" a.materialindex-b.materialindex});var e.length="==b&&(g=[]);for(c=0;c<b;c++){var" h="a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function" a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var 0!="=m[b])return" m[b];m[b]="k.length/3;k.push(a.x,a.y,a.z);return" m[b]}function c(a){var n[b];n[b]="l.length;l.push(a.getHex());return" n[b]}function d(a){var p[b];p[b]="t.length/2;t.push(a.x,a.y);return" p[b]}var e="{metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void" f="this.parameters,g;for(g" in f)void e}f="[];for(g=0;g<this.vertices.length;g++){var" k="[],m={},l=[],n={},t=[],p={};for(g=0;g<this.faces.length;g++){var" r="this.faces[g],v=void" h.push(c(r[0]),c(r[1]),c(r[2])))}e.data="{};e.data.vertices=f;e.data.normals=k;0<l.length&&(e.data.colors=l);0<t.length&&(e.data.uvs=[t]);e.data.faces=h;return" e},clone:function(){return(new r).copy(this)},copy:function(a){var b,c,d;this.vertices="[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var" b;f++)this.vertices.push(e[f].clone());e="a.colors;f=0;for(b=e.length;f<b;f++)this.colors.push(e[f].clone());e=a.faces;f=0;for(b=e.length;f<b;f++)this.faces.push(e[f].clone());f=0;for(b=a.faceVertexUvs.length;f<b;f++){var" g="a.faceVertexUvs[f];void" m="0;for(d=h.length;m<d;m++)k.push(h[m].clone());this.faceVertexUvs[f].push(k)}}m=a.morphTargets;f=0;for(b=m.length;f<b;f++){d={};d.name=m[f].name;if(void" m[f].vertices)for(d.vertices="[],e=0,c=m[f].vertices.length;e<c;e++)d.vertices.push(m[f].vertices[e].clone());if(void" m[f].facenormals)for(d.facenormals="[],e=0,c=m[f].faceNormals.length;e<c;e++)d.faceNormals.push(m[f].faceNormals[e].clone());this.morphNormals.push(d)}e=a.skinWeights;f=0;for(b=e.length;f<b;f++)this.skinWeights.push(e[f].clone());e=a.skinIndices;f=0;for(b=e.length;f<b;f++)this.skinIndices.push(e[f].clone());e=a.lineDistances;f=0;for(b=e.length;f<b;f++)this.lineDistances.push(e[f]);f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());f=a.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=" a.elementsneedupdate;this.verticesneedupdate="a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return" this},dispose:function(){this.dispatchevent({type:"dispose"})}});object.defineproperty(q.prototype,"needsupdate",{set:function(a){!0="==a&&this.version++}});Object.assign(Q.prototype,{isBufferAttribute:!0,onUploadCallback:function(){}," setarray:function(a){if(array.isarray(a))throw new typeerror("three.bufferattribute: array should be typed array.");this.count="void" this},setdynamic:function(a){this.dynamic="a;return" this},copy:function(a){this.name="a.name;this.array=new" a.array.constructor(a.array);this.itemsize="a.itemSize;this.count=a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return" this},copyat:function(a,b,c){a*="this.itemSize;c*=b.itemSize;for(var" e;d++)this.array[a+d]="b.array[c+d];return" this},copyarray:function(a){this.array.set(a);return this},copycolorsarray:function(a){for(var color is undefined",d),f="new" g);b[c++]="f.r;b[c++]=f.g;b[c++]=f.b}return" this},copyvector2sarray:function(a){for(var vector undefined", d),f="new" z);b[c++]="f.x;b[c++]=f.y}return" this},copyvector3sarray:function(a){for(var p);b[c++]="f.x;b[c++]=f.y;b[c++]=f.z}return" this},copyvector4sarray:function(a){for(var v);b[c++]="f.x;b[c++]=f.y;" b[c++]="f.z;b[c++]=f.w}return" this},set:function(a,b){void this},getx:function(a){return this.array[a*this.itemsize]},setx:function(a,b){this.array[a*this.itemsize]="b;return" this},gety:function(a){return this.array[a*this.itemsize+1]},sety:function(a,b){this.array[a*this.itemsize+1]="b;return" this},getz:function(a){return this.array[a*this.itemsize+2]},setz:function(a,b){this.array[a*this.itemsize+2]="b;return" this},getw:function(a){return this.array[a*this.itemsize+ 3]},setw:function(a,b){this.array[a*this.itemsize+3]="b;return" this},setxy:function(a,b,c){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return" this},setxyz:function(a,b,c,d){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return" this},setxyzw:function(a,b,c,d,e){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return" this},onupload:function(a){this.onuploadcallback="a;return" this},clone:function(){return(new this.constructor(this.array, this.itemsize)).copy(this)}});oc.prototype="Object.create(Q.prototype);oc.prototype.constructor=oc;pc.prototype=Object.create(Q.prototype);pc.prototype.constructor=pc;qc.prototype=Object.create(Q.prototype);qc.prototype.constructor=qc;rc.prototype=Object.create(Q.prototype);rc.prototype.constructor=rc;ib.prototype=Object.create(Q.prototype);ib.prototype.constructor=ib;sc.prototype=Object.create(Q.prototype);sc.prototype.constructor=sc;jb.prototype=Object.create(Q.prototype);jb.prototype.constructor=" jb;a.prototype="Object.create(Q.prototype);A.prototype.constructor=A;tc.prototype=Object.create(Q.prototype);tc.prototype.constructor=tc;Object.assign(Ee.prototype,{computeGroups:function(a){var" 0;a="a.faces;for(var" l="a.morphNormals,n=l.length;if(0<n){var" t="[];for(m=0;m<n;m++)t[m]=[];this.morphTargets.normal=t}var" p="a.skinIndices,r=a.skinWeights,v=p.length===c.length,y=r.length===c.length;0<c.length&&0===b.length&&console.error("THREE.DirectGeometry:" faceless geometries are not supported.");for(m="0;m<b.length;m++){var" x="b[m];this.vertices.push(c[x.a],c[x.b],c[x.c]);" var w="x.vertexNormals;3===w.length?this.normals.push(w[0],w[1],w[2]):(w=x.normal,this.normals.push(w,w,w));w=x.vertexColors;3===w.length?this.colors.push(w[0],w[1],w[2]):(w=x.color,this.colors.push(w,w,w));!0===e&&(w=d[0][m],void" undefined vertexuv ",m),this.uvs.push(new z,new z)));!0="==f&&(w=d[1][m],void" vertexuv2 ", m),this.uvs2.push(new z)));for(w="0;w<h;w++){var" this}}); if="1;C.prototype=Object.assign(Object.create(ya.prototype),{constructor:C,isBufferGeometry:!0,getIndex:function(){return" this.index},setindex:function(a){array.isarray(a)?this.index="new" (65535<fe(a)?jb:ib)(a,1):this.index="a},addAttribute:function(a,b,c){if(!(b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute))return" console.warn("three.buffergeometry: .addattribute() now expects ( name, attribute )."),this.addattribute(a,new q(b,c));if("index"="==a)return" console.warn("three.buffergeometry.addattribute: use .setindex() for index attribute."), this.setindex(b),this;this.attributes[a]="b;return" this},getattribute:function(a){return this.attributes[a]},removeattribute:function(a){delete this.attributes[a];return this},addgroup:function(a,b,c){this.groups.push({start:a,count:b,materialindex:void void ra).getnormalmatrix(a).applytobufferattribute(b),b.needsupdate="!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return" this},rotatex:function(){var i;return function(b){a.makerotationx(b);this.applymatrix(a);return this}}(),rotatey:function(){var function(b){a.makerotationy(b);this.applymatrix(a);return this}}(),rotatez:function(){var function(b){a.makerotationz(b);this.applymatrix(a); return this}}(),translate:function(){var function(b,c,d){a.maketranslation(b,c,d);this.applymatrix(a);return this}}(),scale:function(){var function(b,c,d){a.makescale(b,c,d);this.applymatrix(a);return this}}(),lookat:function(){var d;return function(b){a.lookat(b);a.updatematrix();this.applymatrix(a.matrix)}}(),center:function(){var p;return function(){this.computeboundingbox();this.boundingbox.getcenter(a).negate();this.translate(a.x,a.y,a.z);return this}}(), setfromobject:function(a){var a(3*b.vertices.length,3);var c="new" a(3*b.colors.length,3);this.addattribute("position",a.copyvector3sarray(b.vertices));this.addattribute("color",c.copycolorsarray(b.colors));b.linedistances&&b.linedistances.length="==b.vertices.length&&(a=new" a(b.linedistances.length,1),this.addattribute("linedistance",a.copyarray(b.linedistances)));null!="=b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&" (this.boundingbox="b.boundingBox.clone())}else" a.ismesh&&b&&b.isgeometry&&this.fromgeometry(b);return this},setfrompoints:function(a){for(var a(b,3));return this},updatefromobject:function(a){var 0,b.elementsneedupdate="!1);if(void" this.fromgeometry(b);c.verticesneedupdate="b.verticesNeedUpdate;c.normalsNeedUpdate=" b.normalsneedupdate;c.colorsneedupdate="b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void" !1);!0="==b.colorsNeedUpdate&&(c=this.attributes.color,void" this}, fromgeometry:function(a){a.__directgeometry="(new" ee).fromgeometry(a);return this.fromdirectgeometry(a.__directgeometry)},fromdirectgeometry:function(a){var float32array(3*a.vertices.length);this.addattribute("position",(new q(b,3)).copyvector3sarray(a.vertices));0<a.normals.length&&(b="new" float32array(3*a.normals.length),this.addattribute("normal",(new q(b,3)).copyvector3sarray(a.normals)));0<a.colors.length&&(b="new" float32array(3*a.colors.length),this.addattribute("color",(new q(b,3)).copycolorsarray(a.colors))); 0<a.uvs.length&&(b="new" float32array(2*a.uvs.length),this.addattribute("uv",(new q(b,2)).copyvector2sarray(a.uvs)));0<a.uvs2.length&&(b="new" float32array(2*a.uvs2.length),this.addattribute("uv2",(new q(b,2)).copyvector2sarray(a.uvs2)));this.groups="a.groups;for(var" a.morphtargets){b="[];for(var" a(3*g.length,3);b.push(h.copyvector3sarray(g))}this.morphattributes[c]="b}0<a.skinIndices.length&&(c=new" a(4*a.skinindices.length,4),this.addattribute("skinindex", c.copyvector4sarray(a.skinindices)));0<a.skinweights.length&&(c="new" a(4*a.skinweights.length,4),this.addattribute("skinweight",c.copyvector4sarray(a.skinweights)));null!="=a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return" this},computeboundingbox:function(){null="==this.boundingBox&&(this.boundingBox=new" sa);var (isnan(this.boundingbox.min.x)||isnan(this.boundingbox.min.y)||isnan(this.boundingbox.min.z))&&console.error('three.buffergeometry.computeboundingbox: computed min max have nan values. the "position" likely to values.',this)},computeboundingsphere:function(){var sa,b="new" function(){null="==this.boundingSphere&&(this.boundingSphere=new" da);var radius nan. values.',this)}}}(),computefacenormals:function(){},computevertexnormals:function(){var q(new float32array(d.length),3));else for(var p,k="new" p,m="new" p,l="new" p,n="new" p;if(a){a="a.array;0===c.length&&this.addGroup(0,a.length);for(var" v="3*a[f+1];var" y="3*a[f+2];h.fromArray(d,r);k.fromArray(d,v);m.fromArray(d,y);l.subVectors(m,k);n.subVectors(h,k);l.cross(n);e[r]+=l.x;e[r+1]+=l.y;e[r+2]+=l.z;e[v]+=l.x;e[v+1]+=l.y;e[v+2]+=" l.z;e[y]+="l.x;e[y+1]+=l.y;e[y+2]+=l.z}}}else" for(f="0,g=d.length;f<g;f+=9)h.fromArray(d,f),k.fromArray(d,f+3),m.fromArray(d,f+6),l.subVectors(m,k),n.subVectors(h,k),l.cross(n),e[f]=l.x,e[f+1]=l.y,e[f+2]=l.z,e[f+3]=l.x,e[f+4]=l.y,e[f+5]=l.z,e[f+6]=l.x,e[f+7]=l.y,e[f+8]=l.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,b){if(a&&a.isBufferGeometry){void" overwriting original geometry, starting at offset="0." buffergeometryutils.mergebuffergeometries() lossless merge.")); c)if(void this}console.error("three.buffergeometry.merge(): geometry an instance of three.buffergeometry.",a)},normalizenormals:function(){var function(){for(var this.index)return console.warn("three.buffergeometry.tononindexed(): already non-indexed."),this;var c,b="this.index.array,c=this.attributes,d;for(d" c){var f.constructor(b.length*g),k="0;e=0;for(var" n="0;n<g;n++)h[k++]=f[l++]}a.addAttribute(d,new" q(h,g))}b="this.groups;e=0;for(m=b.length;e<m;e++)c=b[e],a.addGroup(c.start,c.count,c.materialIndex);return" a},tojson:function(){var generator:"buffergeometry.tojson"}};a.uuid="this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);0<Object.keys(this.userData).length&&(a.userData=this.userData);if(void" b)void a}a.data="{attributes:{}};var" {itemsize:d.itemsize,type:d.array.constructor.name,array:b,normalized:d.normalized}}var a},clone:function(){return(new c).copy(this)},copy:function(a){var b;this.index="null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var" c)this.addattribute(g,c[g].clone());var d){var this},dispose:function(){this.dispatchevent({type:"dispose"})}});ib.prototype="Object.create(R.prototype);Ib.prototype.constructor=Ib;kb.prototype=Object.create(C.prototype);kb.prototype.constructor=kb;uc.prototype=Object.create(R.prototype);uc.prototype.constructor=uc;lb.prototype=Object.create(C.prototype);lb.prototype.constructor=lb;var" kf="0;J.prototype=Object.assign(Object.create(ya.prototype),{constructor:J,isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void" a){var '"+b+"' parameter undefined.");else if("shading"="==b)console.warn("THREE."+this.type+":" .shading has been removed. boolean .flatshading instead."),this.flatshading="1===c?!0:!1;else{var" property this material."):d&&d.iscolor?d.set(c):d&&d.isvector3&&c&&c.isvector3?d.copy(c):this[b]="overdraw" =="=b?Number(c):c}}},toJSON:function(a){function" d.metadata;b.push(d)}return b}var a;c&&(a="{textures:{},images:{}});var" this.emissiveintensity&&(d.emissiveintensity="this.emissiveIntensity);this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void" (d.lightmap="this.lightMap.toJSON(a).uuid);this.aoMap&&this.aoMap.isTexture&&(d.aoMap=this.aoMap.toJSON(a).uuid,d.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalMapType=this.normalMapType,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid," d.displacementscale="this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&" (d.envmap="this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid);void">this.opacity&&(d.opacity=this.opacity);
!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=this.depthWrite;0!==this.rotation&&(d.rotation=this.rotation);1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);void 0!==this.gapSize&&(d.gapSize=this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphatest&&(d.alphatest=this.alphatest);!0===this.premultipliedalpha&&(d.premultipliedalpha= 0="==b&&(console.warn("THREE.Ray:" this.premultipliedalpha);!0="==this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures)," a="b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return" d},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name="a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=" a.blenddstalpha;this.blendequationalpha="a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));" this.clipshadows="a.clipShadows;this.clipIntersection=a.clipIntersection;var" b="a.clippingPlanes,c=null;if(null!==b){var" d="b.length;c=Array(d);for(var" e="0;e!==d;++e)c[e]=b[e].clone()}this.clippingPlanes=c;this.shadowSide=a.shadowSide;return" this},dispose:function(){this.dispatchevent({type:"dispose"})}});da.prototype="Object.create(J.prototype);da.prototype.constructor=da;da.prototype.isMeshBasicMaterial=!0;da.prototype.copy=function(a){J.prototype.copy.call(this,a);this.color.copy(a.color);this.map=" a.map;this.lightmap="a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=" a.morphtargets;return this};ta.prototype="Object.create(J.prototype);ta.prototype.constructor=ta;ta.prototype.isShaderMaterial=!0;ta.prototype.copy=function(a){J.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Aa.clone(a.uniforms);this.defines=Object.assign({},a.defines);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;" this.morphnormals="a.morphNormals;this.extensions=a.extensions;return" this};ta.prototype.tojson="function(a){a=J.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return" a};object.assign(mb.prototype,{set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a, b){void .at() target is now required"),b="new" p);return b.copy(this.direction).multiplyscalar(a).add(this.origin)},lookat:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var p;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestpointtopoint:function(a,b){void .closestpointtopoint() p);b.subvectors(a,this.origin);a="b.dot(this.direction);" return>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new p;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);
b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),m=c.dot(this.direction),l=-c.dot(b),n=c.lengthSq(),t=Math.abs(1-k*k);if(0<t){d=k*l-m;e=k*m-l;var p="h*t;0<=d?e">=-p?e<=p?(h=1 t,d*="h,e*=h,k=d*(d+k*e+2*m)+e*(k*d+e+2*l)+n):(e=h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n):(e=-h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n):e<=-p?(d=Math.max(0,-(-k*h+m)),e=0<d?-h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+n):e<=p?(d=0,e=Math.min(Math.max(-h,-l),h),k=" e*(e+2*l)+n):(d="Math.max(0,-(k*h+m)),e=0<d?h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+n)}else" e="0<k?-h:h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return" k}}(),intersectsphere:function(){var a="new" p;return function(b,c){a.subvectors(b.center,this.origin);var d="a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e">b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,
c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distancetoplane:function(a){var 0="==a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return" b="a.normal.dot(this.direction);if(0===b)return" 0<="a?a:null},intersectPlane:function(a,b){a=this.distanceToPlane(a);return" null="==a?null:this.at(a,b)},intersectsPlane:function(a){var">a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,
b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=c){var g="(a.min.x-f.x)*c;c*=a.max.x-f.x}else" h="(a.min.y-f.y)*d;d*=a.max.y-f.y}else">d||h>c)return null;if(h>g||g!==g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0>c?null:this.at(0<=g?g:c,b)},intersectsbox:function(){var a="new" p;return function(b){return null!="=this.intersectBox(b,a)}}(),intersectTriangle:function(){var" p,b="new" p,c="new" p,d="new" function(e,f,g,h,k){b.subvectors(f,e);c.subvectors(g,e);d.crossvectors(b,c);f="this.direction.dot(d);if(0<f){if(h)return" null;h="1}else" if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),
applyMatrix4:function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});Object.assign(ja,{getNormal:function(){var a=new p;return function(b,c,d,e){void 0===e&&(console.warn("THREE.Triangle: .getNormal() target is now required"),e=new p);e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyscalar(1 0="==h&&(console.warn("THREE.Triangle:" math.sqrt(b)):e.set(0,0,0)}}(),getbarycoord:function(){var a="new" p,b="new" p,c="new" p;return function(d,e,f,g,h){a.subvectors(g,e);b.subvectors(f,e);c.subvectors(d,e);d="a.dot(a);e=a.dot(b);f=a.dot(c);var" k="b.dot(b);g=b.dot(c);var" m="d*k-e*e;void" .getbarycoord() target is now required"),h="new" p);if(0="==m)return" h.set(-2,-1,-1);m="1/m;k=(k*f-e*g)*m;d=(d*g-e*f)*m;return" h.set(1-k-d,d,k)}}(),containspoint:function(){var function(b,c,d,e){ja.getbarycoord(b,c,d,e,a);return 0<="a.x&&0<=a.y&&1">=a.x+a.y}}()});Object.assign(ja.prototype,
{set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},getArea:function(){var a=new p,b=new p;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),getMidpoint:function(a){void 0===
a&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),a=new p);return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(a){return ja.getNormal(this.a,this.b,this.c,a)},getPlane:function(a){void 0===a&&(console.warn("THREE.Triangle: .getPlane() target is now required"),a=new p);return a.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(a,b){return ja.getBarycoord(a,this.a,this.b,this.c,b)},containsPoint:function(a){return ja.containsPoint(a,
this.a,this.b,this.c)},intersectsBox:function(a){return a.intersectsTriangle(this)},closestPointToPoint:function(){var a=new p,b=new p,c=new p,d=new p,e=new p,f=new p;return function(g,h){void 0===h&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),h=new p);var k=this.a,m=this.b,l=this.c;a.subVectors(m,k);b.subVectors(l,k);d.subVectors(g,k);var n=a.dot(d),t=b.dot(d);if(0>=n&&0>=t)return h.copy(k);e.subVectors(g,m);var u=a.dot(e),r=b.dot(e);if(0<=u&&r<=u)return h.copy(m); var v="n*r-u*t;if(0">=v&&0<=n&&0>=u)return m=n/(n-u),h.copy(k).addScaledVector(a,m);f.subVectors(g,l);g=a.dot(f);var y=b.dot(f);if(0<=y&&g<=y)return h.copy(l);n="g*t-n*y;if(0">=n&&0<=t&&0>=y)return v=t/(t-y),h.copy(k).addScaledVector(b,v);t=u*y-g*r;if(0>=t&&0<=r-u&&0<=g-y)return c.subvectors(l,m),v="(r-u)/(r-u+(g-y)),h.copy(m).addScaledVector(c,v);l=1/(t+n+v);m=n*l;v*=l;return" h.copy(k).addscaledvector(a,m).addscaledvector(b,v)}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}); la.prototype="Object.assign(Object.create(D.prototype),{constructor:la,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){D.prototype.copy.call(this,a);this.drawMode=a.drawMode;void" 0!="=a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void" this},updatemorphtargets:function(){var a="this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var" b="Object.keys(a);if(0<b.length){var" c="a[b[0]];if(void" d="c[a].name||String(a);this.morphTargetInfluences.push(0);this.morphTargetDictionary[d]=a}}}else" if(c="a.morphTargets,void" a(a,b, c,d,e,f,g){ja.getbarycoord(a,b,c,d,v);e.multiplyscalar(v.x);f.multiplyscalar(v.y);g.multiplyscalar(v.z);e.add(f).add(g);return e.clone()}function b(a,b,c,d,e,f,g,h){if(null="==(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==b.side,h)))return" null;x.copy(h);x.applymatrix4(a.matrixworld);b="c.ray.origin.distanceTo(x);return" b<c.near||b>c.far?null:{distance:b,point:x.clone(),object:a}}function c(c,d,e,f,m,l,n,q,p){g.fromBufferAttribute(m,n);h.fromBufferAttribute(m,q);k.fromBufferAttribute(m,
p);if(c=b(c,d,e,f,g,h,k,y))l&&(t.fromBufferAttribute(l,n),u.fromBufferAttribute(l,q),r.fromBufferAttribute(l,p),c.uv=a(y,g,h,k,t,u,r)),l=new Ta(n,q,p),ja.getNormal(g,h,k,l.normal),c.face=l;return c}var d=new I,e=new mb,f=new Da,g=new p,h=new p,k=new p,m=new p,l=new p,n=new p,t=new z,u=new z,r=new z,v=new p,y=new p,x=new p;return function(q,p){var v=this.geometry,w=this.material,x=this.matrixWorld;if(void 0!==w&&(null===v.boundingSphere&&v.computeBoundingSphere(),f.copy(v.boundingSphere),f.applyMatrix4(x),
!1!==q.ray.intersectsSphere(f)&&(d.getInverse(x),e.copy(q.ray).applyMatrix4(d),null===v.boundingBox||!1!==e.intersectsBox(v.boundingBox))))if(v.isBufferGeometry){var z=v.index,B=v.attributes.position,A=v.attributes.uv,D=v.groups;v=v.drawRange;var C;if(null!==z)if(Array.isArray(w)){var H=0;for(C=D.length;H<c;h++){var 0="==b&&(b=0);this.array.set(a,b);return" g="D[H];var" k="w[G.materialIndex];x=Math.max(G.start,v.start);var" l="Math.min(G.start+G.count,v.start+v.count);for(G=x;G<L;G+=3){x=z.getX(G);var" i="z.getX(G+1);var" j="z.getX(G+2);if(x=c(this," k,q,e,b,a,x,i,j))x.faceindex="Math.floor(G/3),p.push(x)}}}else" for(x="Math.max(0,v.start),L=Math.min(z.count,v.start+v.count),H=x,C=L;H<C;H+=3){if(x=z.getX(H),I=z.getX(H+1),J=z.getX(H+2),x=c(this,w,q,e,B,A,x,I,J))x.faceIndex=Math.floor(H/3),p.push(x)}else" if(void 0!="=B)if(Array.isArray(w))for(H=0,C=D.length;H<C;H++)for(G=D[H],K=w[G.materialIndex],x=Math.max(G.start,v.start),L=Math.min(G.start+G.count,v.start+v.count),G=x;G<L;G+=3){if(x=G,I=G+1,J=G+2,x=c(this,K,q,e,B,A,x,I,J))x.faceIndex=Math.floor(G/" 3),p.push(x)}else if(v.isgeometry)for(b="Array.isArray(w),A=v.vertices,D=v.faces,x=v.faceVertexUvs[0],0<x.length&&(z=x),G=0,L=D.length;G<L;G++)if(I=D[G],x=B?w[I.materialIndex]:w,void" r="this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);k.set(0,0,0);for(var" q="0,S=J.length;Q<S;Q++){var" t="R[Q];if(0!==T){var" v="J[Q].vertices;g.addScaledVector(m.subVectors(V[I.a],H),T);h.addScaledVector(l.subVectors(V[I.b],C),T);k.addScaledVector(n.subVectors(V[I.c],K),T)}}g.add(H);h.add(C);k.add(K);H=g;C=h;K=k}if(x=b(this,x,q,e,H,C,K,y))z&&z[G]&&(J=z[G],t.copy(J[0]),u.copy(J[1]),r.copy(J[2]),x.uv=a(y,H,C,K,t,u,r)),x.face=I,x.faceIndex=G,p.push(x)}}}(),clone:function(){return(new" this.constructor(this.geometry,this.material)).copy(this)}});ua.prototype="Object.create(T.prototype);" ua.prototype.constructor="Ua;Ua.prototype.isCubeTexture=!0;Object.defineProperty(Ua.prototype,"images",{get:function(){return" this.image},set:function(a){this.image="a}});var" me="new" t,ne="new" ua,ge="[],Ie=[],Le=new" float32array(16),ke="new" float32array(9),je="new" float32array(4);re.prototype.updatecache="function(a){var" b="this.cache;a" instanceof float32array&&b.length!="=a.length&&(this.cache=new" float32array(a.length));qa(b,a)};se.prototype.setvalue="function(a,b,c){for(var" d="this.seq,e=0,f=d.length;e!==" f;++e){var vd="/([\w\d_]+)(\])?(\[|\.)?/g;Za.prototype.setValue=function(a,b,c){b=this.map[b];void" e="0,f=b.length;e!==f;++e){var" c="[],d=0,e=a.length;d!==e;++d){var" f="a[d];f.id" in b&&c.push(f)}return c};var yg="0,Hg=0;$a.prototype=Object.create(J.prototype);$a.prototype.constructor=$a;$a.prototype.isMeshDepthMaterial=!0;$a.prototype.copy=function(a){J.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return" this}; ab.prototype="Object.create(J.prototype);ab.prototype.constructor=ab;ab.prototype.isMeshDistanceMaterial=!0;ab.prototype.copy=function(a){J.prototype.copy.call(this,a);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;" return this};kb.prototype="Object.assign(Object.create(D.prototype),{constructor:Kb,isGroup:!0});Z.prototype=Object.assign(Object.create(Na.prototype),{constructor:Z,isPerspectiveCamera:!0,copy:function(a,b){Na.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return" this},setfocallength:function(a){a=".5*this.getFilmHeight()/" a;this.fov="2*H.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var" a="Math.tan(.5*H.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return" 2*h.rad2deg*math.atan(math.tan(.5*h.deg2rad*this.fov) this.zoom)},getfilmwidth:function(){return this.filmgauge*math.min(this.aspect,1)},getfilmheight:function(){return this.filmgauge math.max(this.aspect,1)},setviewoffset:function(a,b,c,d,e,f){this.aspect="a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1," fullheight:1,offsetx:0,offsety:0,width:1,height:1});this.view.enabled="!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var" this.filmoffset;return a}});yc.prototype="Object.assign(Object.create(Z.prototype),{constructor:yc,isArrayCamera:!0});Lb.prototype.isFogExp2=!0;Lb.prototype.clone=function(){return" new lb(this.color,this.density)};lb.prototype.tojson="function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};Mb.prototype.isFog=!0;Mb.prototype.clone=function(){return" mb(this.color,this.near,this.far)};mb.prototype.tojson="function(){return{type:"Fog",color:this.color.getHex(),near:this.near," far:this.far}};qd.prototype="Object.assign(Object.create(D.prototype),{constructor:qd,copy:function(a,b){D.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return" this},tojson:function(a){var null!="=this.fog&&(b.object.fog=this.fog.toJSON());return" b}});object.defineproperty(ob.prototype,"needsupdate",{set:function(a){!0="==a&&this.version++}});Object.assign(ob.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(a){if(Array.isArray(a))throw" typeerror("three.bufferattribute: array should be typed array.");this.count="void" this},setdynamic:function(a){this.dynamic="a;return" this},copy:function(a){this.array="new" a.array.constructor(a.array);this.count="a.count;this.stride=a.stride;this.dynamic=a.dynamic;return" this},copyat:function(a,b,c){a*="this.stride;c*=b.stride;for(var" this},set:function(a,b){void this},clone:function(){return(new this.constructor).copy(this)},onupload:function(a){this.onuploadcallback="a;return" this}});object.defineproperties(zc.prototype,{count:{get:function(){return this.data.count}}, array:{get:function(){return this.data.array}}});object.assign(zc.prototype,{isinterleavedbufferattribute:!0,setx:function(a,b){this.data.array[a*this.data.stride+this.offset]="b;return" this},sety:function(a,b){this.data.array[a*this.data.stride+this.offset+1]="b;return" this},setz:function(a,b){this.data.array[a*this.data.stride+this.offset+2]="b;return" this},setw:function(a,b){this.data.array[a*this.data.stride+this.offset+3]="b;return" this},getx:function(a){return this.data.array[a*this.data.stride+ this.offset]},gety:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getz:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getw:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setxy:function(a,b,c){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return" this},setxyz:function(a,b,c,d){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return" this},setxyzw:function(a, b,c,d,e){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return" this}});cb.prototype="Object.create(J.prototype);cb.prototype.constructor=cb;cb.prototype.isSpriteMaterial=!0;cb.prototype.copy=function(a){J.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return" this};var nb;ac.prototype="Object.assign(Object.create(D.prototype),{constructor:Ac,isSprite:!0,raycast:function(){function" a(a, b,c,d,h,k){e.subvectors(a,c).addscalar(.5).multiply(d);void p,c="new" p,d="new" p,e="new" z,f="new" z,g="new" i,h="new" p,k="new" p,m="new" p;return function(e,f){c.setfrommatrixscale(this.matrixworld);g.getinverse(this.modelviewmatrix).premultiply(this.matrixworld);d.setfrommatrixposition(this.modelviewmatrix);var n="Math.cos(l);var" -.5,0),d,l,c,q,n);a(k.set(.5,-.5,0),d,l,c,q,n);a(m.set(.5,.5,0),d,l,c,q,n);var p="e.ray.intersectTriangle(h,k,m,!1,b);if(null===p&&(a(k.set(-.5,.5,0),d,l,c,q,n),p=e.ray.intersectTriangle(h,m,k,!1,b),null===p))return;q=e.ray.origin.distanceTo(b);q<e.near||q">e.far||f.push({distance:q,point:b.clone(),face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)},copy:function(a){D.prototype.copy.call(this,a);void 0!==a.center&&this.center.copy(a.center);return this}});
Bc.prototype=Object.assign(Object.create(D.prototype),{constructor:Bc,copy:function(a){D.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var 0="==b&&(b=0);b=Math.abs(b);for(var" d="a[b];this.addLevel(d.object.clone(),d.distance)}return" this},addlevel:function(a,b){void c="this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var" b="this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return" b[c- 1].object},raycast:function(){var a="new" p;return function(b,c){a.setfrommatrixposition(this.matrixworld);var p,b="new" function(c){var e="1,f=d.length;e<f;e++)if(c">=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;
for(;e<f;e++)d[e].object.visible=!1}}}(),tojson:function(a){a=d.prototype.tojson.call(this,a);a.object.levels=[];for(var 0="==b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses()," b="this.levels,c=0,d=b.length;c<d;c++){var" e="b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return" a}});object.assign(cc.prototype,{calculateinverses:function(){this.boneinverses="[];for(var" a="0,b=this.bones.length;a<b;a++){var" c="new" i;this.bones[a]&&c.getinverse(this.bones[a].matrixworld);this.boneinverses.push(c)}},pose:function(){var a,b;var b;c++)(a="this.bones[c])&&a.matrixWorld.getInverse(this.boneInverses[c]);c=0;for(b=this.bones.length;c<b;c++)if(a=this.bones[c])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var" i,b="new" i;return function(){for(var b,d[g]),a.toarray(e,16*g);void 0!="=f&&(f.needsUpdate=!0)}}(),clone:function(){return" new cc(this.bones,this.boneinverses)},getbonebyname:function(a){for(var d="this.bones[b];if(d.name===a)return" d}}});rd.prototype="Object.assign(Object.create(D.prototype),{constructor:rd,isBone:!0});sd.prototype=Object.assign(Object.create(la.prototype),{constructor:sd,isSkinnedMesh:!0,initBones:function(){var" this.geometry.bones.length;c<b;c++){var rd;a.push(e);e.name="d.name;e.position.fromArray(d.pos);e.quaternion.fromArray(d.rotq);void" a},bind:function(a,b){this.skeleton="a;void" a;if(this.geometry&&this.geometry.isgeometry)for(a="0;a<this.geometry.skinWeights.length;a++){var" if(this.geometry&&this.geometry.isbuffergeometry){b="new" v;var b.y="d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.manhattanLength(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}},updateMatrixWorld:function(a){la.prototype.updateMatrixWorld.call(this,a);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh:" unrecognized bindmode: "+this.bindmode)},clone:function(){return(new this.constructor(this.geometry, this.material)).copy(this)}});y.prototype="Object.create(J.prototype);Y.prototype.constructor=Y;Y.prototype.isLineBasicMaterial=!0;Y.prototype.copy=function(a){J.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return" this};sa.prototype="Object.assign(Object.create(D.prototype),{constructor:sa,isLine:!0,computeLineDistances:function(){var" p,b="new" p;return function(){var c.index){for(var a(e,1))}else console.warn("three.line.computelinedistances(): computation only possible with non-indexed buffergeometry.");else if(c.isgeometry)for(d="c.vertices,e=c.lineDistances,e[0]=0,f=1,g=d.length;f<g;f++)e[f]=e[f-1],e[f]+=d[f-1].distanceTo(d[f]);return" this}}(),raycast:function(){var mb,c="new" da;return function(d,e){var f="d.linePrecision;f*=f;var" g="this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var" k="new" p,m="new" p;h="new" p;var l="new" p,n="this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var" t="g.index,u=g.attributes.position.array;if(null!==t){t=t.array;g=0;for(var" r="t.length-1;g<r;g+=n){var" v="t[g+1];k.fromArray(u,3*t[g]);" m.fromarray(u,3*v);v="b.distanceSqToSegment(k,m,l,h);v">f||(l.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(l),v<d.near||v>d.far||e.push({distance:v,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}else for(g=0,r=u.length/3-1;g<r;g+=n)k.fromarray(u,3*g),m.fromarray(u,3*g+3),v=b.distancesqtosegment(k,m,l,h),v>f||(l.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(l),v<d.near||v>d.far||e.push({distance:v,point:h.clone().applyMatrix4(this.matrixWorld),
index:g,face:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(k=g.vertices,m=k.length,g=0;g<m-1;g+=n)v=b.distancesqtosegment(k[g],k[g+1],l,h),v>f||(l.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(l),v<d.near||v>d.far||e.push({distance:v,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});W.prototype=Object.assign(Object.create(sa.prototype),
{constructor:W,isLineSegments:!0,computeLineDistances:function(){var a=new p,b=new p;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===c.index){for(var d=c.attributes.position,e=[],f=0,g=d.count;f<g;f+=2)a.frombufferattribute(d,f),b.frombufferattribute(d,f+1),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceto(b);c.addattribute("linedistance",new a(e,1))}else console.warn("three.linesegments.computelinedistances(): computation only possible with non-indexed buffergeometry.");else if(c.isgeometry)for(d="c.vertices,e=c.lineDistances,f=0,g=d.length;f<g;f+=2)a.copy(d[f]),b.copy(d[f+1]),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b);return" this}}()});td.prototype="Object.assign(Object.create(sa.prototype),{constructor:td,isLineLoop:!0});Ea.prototype=Object.create(J.prototype);Ea.prototype.constructor=Ea;Ea.prototype.isPointsMaterial=!0;Ea.prototype.copy=function(a){J.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;this.morphTargets=" a.morphtargets;return this};ob.prototype="Object.assign(Object.create(D.prototype),{constructor:Ob,isPoints:!0,raycast:function(){var" a="new" i,b="new" mb,c="new" da;return function(d,e){function f(a,c){var f="b.distanceSqToPoint(a);f<l&&(b.closestPointToPoint(a,n),n.applyMatrix4(k),a=d.ray.origin.distanceTo(n),a<d.near||a">d.far||e.push({distance:a,distanceToRay:Math.sqrt(f),point:n.clone(),index:c,face:null,object:g}))}var g=this,h=this.geometry,k=this.matrixWorld,m=d.params.Points.threshold;null===h.boundingSphere&&
h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);c.radius+=m;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);m/=(this.scale.x+this.scale.y+this.scale.z)/3;var l=m*m;m=new p;var n=new p;if(h.isBufferGeometry){var t=h.index;h=h.attributes.position.array;if(null!==t){var u=t.array;t=0;for(var r=u.length;t<r;t++){var v="u[t];m.fromArray(h,3*v);f(m,v)}}else" for(t="0,u=h.length/3;t<u;t++)m.fromArray(h,3*t),f(m,t)}else" for(m="h.vertices,t=0,u=m.length;t<" u;t++)f(m[t],t)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});$d.prototype="Object.assign(Object.create(T.prototype),{constructor:$d,isVideoTexture:!0,update:function(){var" a="this.image;a.readyState">=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});Pb.prototype=Object.create(T.prototype);Pb.prototype.constructor=Pb;Pb.prototype.isCompressedTexture=!0;Dc.prototype=Object.create(T.prototype);Dc.prototype.constructor=Dc;Dc.prototype.isCanvasTexture=!0;Ec.prototype=
Object.create(T.prototype);Ec.prototype.constructor=Ec;Ec.prototype.isDepthTexture=!0;Qb.prototype=Object.create(C.prototype);Qb.prototype.constructor=Qb;Fc.prototype=Object.create(R.prototype);Fc.prototype.constructor=Fc;Rb.prototype=Object.create(C.prototype);Rb.prototype.constructor=Rb;Gc.prototype=Object.create(R.prototype);Gc.prototype.constructor=Gc;na.prototype=Object.create(C.prototype);na.prototype.constructor=na;Hc.prototype=Object.create(R.prototype);Hc.prototype.constructor=Hc;Sb.prototype=
Object.create(na.prototype);Sb.prototype.constructor=Sb;Ic.prototype=Object.create(R.prototype);Ic.prototype.constructor=Ic;pb.prototype=Object.create(na.prototype);pb.prototype.constructor=pb;Jc.prototype=Object.create(R.prototype);Jc.prototype.constructor=Jc;Tb.prototype=Object.create(na.prototype);Tb.prototype.constructor=Tb;Kc.prototype=Object.create(R.prototype);Kc.prototype.constructor=Kc;Ub.prototype=Object.create(na.prototype);Ub.prototype.constructor=Ub;Lc.prototype=Object.create(R.prototype);
Lc.prototype.constructor=Lc;Vb.prototype=Object.create(C.prototype);Vb.prototype.constructor=Vb;Mc.prototype=Object.create(R.prototype);Mc.prototype.constructor=Mc;Wb.prototype=Object.create(C.prototype);Wb.prototype.constructor=Wb;Nc.prototype=Object.create(R.prototype);Nc.prototype.constructor=Nc;Xb.prototype=Object.create(C.prototype);Xb.prototype.constructor=Xb;var Ug={triangulate:function(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=bf(a,0,e,c,!0),g=[];if(!f)return g;var h;if(d){var k=
c;d=[];var m;var l=0;for(m=b.length;l<m;l++){var n="b[l]*k;var" t="l<m-1?b[l+1]*k:a.length;n=bf(a,n,t,k,!1);n===n.next&&(n.steiner=!0);d.push(Pg(n))}d.sort(Ng);for(l=0;l<d.length;l++){b=d[l];k=f;if(k=Og(b,k))b=ef(k,b),Pc(b,b.next);f=Pc(f,f.next)}}if(a.length">80*c){var p=h=a[0];var r=d=a[1];for(k=c;k<e;k+=c)l=a[k],b=a[k+1],l<p&&(p=l),b<r&&(r=b),l>h&&(h=l),b>d&&(d=b);h=Math.max(h-p,d-r);h=0!==h?1/h:0}Qc(f,g,c,p,r,h);return g}},Va={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y- 0 a[e].x*a[d].y;return.5*c},isclockwise:function(a){return>Va.area(a)},triangulateShape:function(a,b){var c=[],d=[],e=[];ff(a);gf(c,a);var f=a.length;b.forEach(ff);for(a=0;a<b.length;a++)d.push(f),f+=b[a].length,gf(c,b[a]);b=ug.triangulate(c,d);for(a=0;a<b.length;a+=3)e.push(b.slice(a,a+3));return e}};rb.prototype="Object.create(R.prototype);rb.prototype.constructor=rb;rb.prototype.toJSON=function(){var" a="R.prototype.toJSON.call(this);return" hf(this.parameters.shapes,this.parameters.options,a)};oa.prototype="Object.create(C.prototype);Oa.prototype.constructor=Oa;Oa.prototype.toJSON=function(){var" hf(this.parameters.shapes,this.parameters.options,a)};var qg="{generateTopUV:function(a,b,c,d,e){a=b[3*d];d=b[3*d+1];var" f="b[3*e];e=b[3*e+1];return[new" z(b[3*c],b[3*c+1]),new z(a,d),new z(f,e)]},generatesidewalluv:function(a,b,c,d,e,f){a="b[3*c];var" g="b[3*c+1];c=b[3*c+2];var" h="b[3*d],k=b[3*d+1];d=b[3*d+2];var" m="b[3*e],l=b[3*e+1];e=b[3*e+2];var" n="b[3*f],t=b[3*f+1];b=b[3*f+" 2];return.01>Math.abs(g-k)?[new z(a,1-c),new z(h,1-d),new z(m,1-e),new z(n,1-b)]:[new z(g,1-c),new z(k,1-d),new z(l,1-e),new z(t,1-b)]}};Sc.prototype=Object.create(R.prototype);Sc.prototype.constructor=Sc;Yb.prototype=Object.create(Oa.prototype);Yb.prototype.constructor=Yb;Tc.prototype=Object.create(R.prototype);Tc.prototype.constructor=Tc;sb.prototype=Object.create(C.prototype);sb.prototype.constructor=sb;Uc.prototype=Object.create(R.prototype);Uc.prototype.constructor=Uc;Zb.prototype=Object.create(C.prototype);
Zb.prototype.constructor=Zb;Vc.prototype=Object.create(R.prototype);Vc.prototype.constructor=Vc;$b.prototype=Object.create(C.prototype);$b.prototype.constructor=$b;tb.prototype=Object.create(R.prototype);tb.prototype.constructor=tb;tb.prototype.toJSON=function(){var a=R.prototype.toJSON.call(this);return jf(this.parameters.shapes,a)};ub.prototype=Object.create(C.prototype);ub.prototype.constructor=ub;ub.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);return jf(this.parameters.shapes,
a)};ac.prototype=Object.create(C.prototype);ac.prototype.constructor=ac;vb.prototype=Object.create(R.prototype);vb.prototype.constructor=vb;Wa.prototype=Object.create(C.prototype);Wa.prototype.constructor=Wa;Wc.prototype=Object.create(vb.prototype);Wc.prototype.constructor=Wc;Xc.prototype=Object.create(Wa.prototype);Xc.prototype.constructor=Xc;Yc.prototype=Object.create(R.prototype);Yc.prototype.constructor=Yc;bc.prototype=Object.create(C.prototype);bc.prototype.constructor=bc;var xa=Object.freeze({WireframeGeometry:Qb,
ParametricGeometry:Fc,ParametricBufferGeometry:Rb,TetrahedronGeometry:Hc,TetrahedronBufferGeometry:Sb,OctahedronGeometry:Ic,OctahedronBufferGeometry:pb,IcosahedronGeometry:Jc,IcosahedronBufferGeometry:Tb,DodecahedronGeometry:Kc,DodecahedronBufferGeometry:Ub,PolyhedronGeometry:Gc,PolyhedronBufferGeometry:na,TubeGeometry:Lc,TubeBufferGeometry:Vb,TorusKnotGeometry:Mc,TorusKnotBufferGeometry:Wb,TorusGeometry:Nc,TorusBufferGeometry:Xb,TextGeometry:Sc,TextBufferGeometry:Yb,SphereGeometry:Tc,SphereBufferGeometry:sb,
RingGeometry:Uc,RingBufferGeometry:Zb,PlaneGeometry:uc,PlaneBufferGeometry:lb,LatheGeometry:Vc,LatheBufferGeometry:$b,ShapeGeometry:tb,ShapeBufferGeometry:ub,ExtrudeGeometry:rb,ExtrudeBufferGeometry:Oa,EdgesGeometry:ac,ConeGeometry:Wc,ConeBufferGeometry:Xc,CylinderGeometry:vb,CylinderBufferGeometry:Wa,CircleGeometry:Yc,CircleBufferGeometry:bc,BoxGeometry:Ib,BoxBufferGeometry:kb});wb.prototype=Object.create(J.prototype);wb.prototype.constructor=wb;wb.prototype.isShadowMaterial=!0;wb.prototype.copy=
function(a){J.prototype.copy.call(this,a);this.color.copy(a.color);return this};cc.prototype=Object.create(ta.prototype);cc.prototype.constructor=cc;cc.prototype.isRawShaderMaterial=!0;Pa.prototype=Object.create(J.prototype);Pa.prototype.constructor=Pa;Pa.prototype.isMeshStandardMaterial=!0;Pa.prototype.copy=function(a){J.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=
a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=
a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};xb.prototype=Object.create(Pa.prototype);xb.prototype.constructor=xb;xb.prototype.isMeshPhysicalMaterial=
!0;xb.prototype.copy=function(a){Pa.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Fa.prototype=Object.create(J.prototype);Fa.prototype.constructor=Fa;Fa.prototype.isMeshPhongMaterial=!0;Fa.prototype.copy=function(a){J.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=
a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;
this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};yb.prototype=Object.create(Fa.prototype);yb.prototype.constructor=yb;yb.prototype.isMeshToonMaterial=!0;yb.prototype.copy=function(a){Fa.prototype.copy.call(this,
a);this.gradientMap=a.gradientMap;return this};zb.prototype=Object.create(J.prototype);zb.prototype.constructor=zb;zb.prototype.isMeshNormalMaterial=!0;zb.prototype.copy=function(a){J.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;
this.wireframeLinewidth=a.wireframeLinewidth;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Ab.prototype=Object.create(J.prototype);Ab.prototype.constructor=Ab;Ab.prototype.isMeshLambertMaterial=!0;Ab.prototype.copy=function(a){J.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);
this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};
Bb.prototype=Object.create(Y.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isLineDashedMaterial=!0;Bb.prototype.copy=function(a){Y.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var Vg=Object.freeze({ShadowMaterial:wb,SpriteMaterial:cb,RawShaderMaterial:cc,ShaderMaterial:ta,PointsMaterial:Ea,MeshPhysicalMaterial:xb,MeshStandardMaterial:Pa,MeshPhongMaterial:Fa,MeshToonMaterial:yb,MeshNormalMaterial:zb,MeshLambertMaterial:Ab,MeshDepthMaterial:$a,
MeshDistanceMaterial:ab,MeshBasicMaterial:da,LineDashedMaterial:Bb,LineBasicMaterial:Y,Material:J}),Fb={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},ka=new ce,Ya={};Object.assign(Ga.prototype,{load:function(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Fb.get(a);if(void 0!==f)return e.manager.itemStart(a),
setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;if(void 0!==Ya[a])Ya[a].push({onLoad:b,onProgress:c,onError:d});else{var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){c=g[1];var h=!!g[2];g=g[3];g=window.decodeURIComponent(g);h&&(g=window.atob(g));try{var k=(this.responseType||"").toLowerCase();switch(k){case "arraybuffer":case "blob":var m=new Uint8Array(g.length);for(h=0;h<g.length;h++)m[h]=g.charcodeat(h);var 0 l="blob" =="=k?new" blob([m.buffer],{type:c}):m.buffer;break;case "document":l="(new" domparser).parsefromstring(g,c);break;case "json":l="JSON.parse(g);break;default:l=g}window.setTimeout(function(){b&&b(l);e.manager.itemEnd(a)},0)}catch(t){window.setTimeout(function(){d&&d(t);e.manager.itemEnd(a);e.manager.itemError(a)},0)}}else{Ya[a]=[];Ya[a].push({onLoad:b,onProgress:c,onError:d});var" n="new" xmlhttprequest;n.open("get",a,!0);n.addeventlistener("load",function(b){var c="this.response;Fb.add(a,c);var" d="Ya[a];delete" ya[a];if(200="==this.status||0===this.status){0===this.status&&" console.warn("three.fileloader: http status received.");for(var f="0,g=d.length;f<g;f++){var" h="d[f];if(h.onLoad)h.onLoad(c)}e.manager.itemEnd(a)}else{f=0;for(g=d.length;f<g;f++)if(h=d[f],h.onError)h.onError(b);e.manager.itemEnd(a);e.manager.itemError(a)}},!1);n.addEventListener("progress",function(b){for(var" ya[a];for(var g="c[d];if(g.onError)g.onError(b)}e.manager.itemEnd(a);" e.manager.itemerror(a)},!1);void 0!="=this.responseType&&(n.responseType=this.responseType);void" in this.requestheader)n.setrequestheader(h,this.requestheader[h]);n.send(null)}e.manager.itemstart(a);return n}},setpath:function(a){this.path="a;return" this},setresponsetype:function(a){this.responsetype="a;return" this},setwithcredentials:function(a){this.withcredentials="a;return" this},setmimetype:function(a){this.mimetype="a;return" this},setrequestheader:function(a){this.requestheader="a;return" this}});object.assign(kf.prototype,{load:function(a,b,c,d){function e(e){k.load(a[e],function(a){a="f._parser(a,!0);g[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};m+=1;6===m&&(1===a.mipmapCount&&(h.minFilter=1006),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)}var" pb;h.image="g;var" k="new" ga(this.manager);k.setpath(this.path);k.setresponsetype("arraybuffer"); if(array.isarray(a))for(var m="0,l=0,n=a.length;l<n;++l)e(l);else" k.load(a,function(a){a="f._parser(a,!0);if(a.isCubemap)for(var" e="0;e<a.mipmapCount;e++)g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}else" h.image.width="a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&(h.minFilter=1006);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d);return" h},setpath:function(a){this.path="a;return" this}});object.assign(de.prototype,{load:function(a,b,c,d){var gb,g="new" ga(this.manager);g.setresponsetype("arraybuffer");g.load(a,function(a){if(a="e._parser(a))void" a.anisotropy:1,void f}});object.assign(zc.prototype,{crossorigin:"anonymous",load:function(a,b,c,d){function e(){k.removeeventlistener("load",e,!1);k.removeeventlistener("error",f,!1);fb.add(a,this);b&&b(this);g.manager.itemend(a)}function f(b){k.removeeventlistener("load",e,!1);k.removeeventlistener("error",f,!1); d&&d(b);g.manager.itemend(a);g.manager.itemerror(a)}void g.manager.itemstart(a),settimeout(function(){b&&b(h);g.manager.itemend(a)},0),h;var acd="mysecretishere.iZwz9i9xnerwj6o7h40eauZ.png;var" k.src="a;return" k},setcrossorigin:function(a){this.crossorigin="a;return" this},setpath:function(a){this.path="a;return" this}});object.assign(ee.prototype,{crossorigin:"anonymous",load:function(a,b,c,d){function e(c){g.load(a[c],function(a){f.images[c]="a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void" 0,d)}var ua,g="new" zc(this.manager);g.setcrossorigin(this.crossorigin);g.setpath(this.path);var f},setcrossorigin:function(a){this.crossorigin="a;return" this}});object.assign(vd.prototype,{crossorigin:"anonymous",load:function(a,b,c,d){var t,f="new" zc(this.manager);f.setcrossorigin(this.crossorigin);f.setpath(this.path);f.load(a,function(c){e.image="c;c=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data:image\/jpeg/);e.format=c?1022:1023;e.needsUpdate=!0;void" e},setcrossorigin:function(a){this.crossorigin="a;return" this}});object.assign(l.prototype,{getpoint:function(){console.warn("three.curve: .getpoint() not implemented."); return null},getpointat:function(a,b){a="this.getUtoTmapping(a);return" this.getpoint(a,b)},getpoints:function(a){void b="[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return" b},getspacedpoints:function(a){void b},getlength:function(){var a="this.getLengths();return" a[a.length-1]},getlengths:function(a){void this.cachearclengths; this.needsupdate="!1;var" this.cachearclengths="b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var">g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a (d-1);e="c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function(a){var" b="a-1E-4;a+=1E-4;0">b&&(b=0);1<a&&(a=1);b=this.getpoint(b);return this.getpoint(a).clone().sub(b).normalize()},gettangentat:function(a){a="this.getUtoTmapping(a);return" this.gettangent(a)},computefrenetframes:function(a,b){var c="new" p,d="[],e=[],f=[],g=new" p,h="new" i,k;for(k="0;k<=a;k++){var" m="k/a;d[k]=this.getTangentAt(m);d[k].normalize()}e[0]=new" p;f[0]="new" p;k="Number.MAX_VALUE;m=Math.abs(d[0].x);var" l="Math.abs(d[0].y),n=Math.abs(d[0].z);m<=k&&(k=m,c.set(1,0,0));l<=k&&(k=l,c.set(0,1,0));n<=k&&c.set(0," 0,1);g.crossvectors(d[0],c).normalize();e[0].crossvectors(d[0],g);f[0].crossvectors(d[0],e[0]);for(k="1;k<=a;k++)e[k]=e[k-1].clone(),f[k]=f[k-1].clone(),g.crossVectors(d[k-1],d[k]),g.length()">Number.EPSILON&&(g.normalize(),c=Math.acos(H.clamp(d[k-1].dot(d[k]),-1,1)),e[k].applyMatrix4(h.makeRotationAxis(g,c))),f[k].crossVectors(d[k],e[k]);if(!0===b)for(c=Math.acos(H.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossvectors(e[0],e[a]))&&(c=-c),k=1;k<=a;k++)e[k].applymatrix4(h.makerotationaxis(d[k], c*k)),f[k].crossvectors(d[k],e[k]);return{tangents:d,normals:e,binormals:f}},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.arclengthdivisions="a.arcLengthDivisions;return" this},tojson:function(){var a="{metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};a.arcLengthDivisions=this.arcLengthDivisions;a.type=this.type;return" a},fromjson:function(a){this.arclengthdivisions="a.arcLengthDivisions;return" this}});za.prototype="Object.create(L.prototype);za.prototype.constructor=" za;za.prototype.isellipsecurve="!0;za.prototype.getPoint=function(a,b){b=b||new" z;for(var c="2*Math.PI,d=this.aEndAngle-this.aStartAngle,e=Math.abs(d)<Number.EPSILON;0">d;)d+=c;for(;d>c;)d-=c;d<number.epsilon&&(d=e?0:c);!0!==this.aclockwise||e||(d=d===c?-c:d-c);c=this.astartangle+a*d;a=this.ax+this.xradius*math.cos(c);var f="this.aY+this.yRadius*Math.sin(c);0!==this.aRotation&&(c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a-this.aX,f-=this.aY,a=e*c-f*d+this.aX,f=e*d+f*c+this.aY);return" b.set(a, f)};za.prototype.copy="function(a){L.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return" this};za.prototype.tojson="function(){var" a="L.prototype.toJSON.call(this);a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=" this.arotation;return a};za.prototype.fromjson="function(a){L.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return" this};dc.prototype="Object.create(za.prototype);dc.prototype.constructor=dc;dc.prototype.isArcCurve=!0;var" od="new" p,ae="new" fe,be="new" fe,ce="new" fe;ca.prototype="Object.create(L.prototype);ca.prototype.constructor=ca;ca.prototype.isCatmullRomCurve3=" !0;ca.prototype.getpoint="function(a,b){b=b||new" p;var c="this.points,d=c.length;a*=d-(this.closed?0:1);var" e="Math.floor(a);a-=e;this.closed?e+=0<e?0:(Math.floor(Math.abs(e)/d)+1)*d:0===a&&e===d-1&&(e=d-2,a=1);if(this.closed||0<e)var" od.subvectors(c[0],c[1]).add(c[0]),f="Od;var" g="c[e%d];var" h="c[(e+1)%d];this.closed||e+2<d?c=c[(e+2)%d]:(Od.subVectors(c[d-1],c[d-2]).add(c[d-1]),c=Od);if("centripetal"===this.curveType||"chordal"===this.curveType){var" k="chordal" =="=this.curveType?.5:.25;" d="Math.pow(f.distanceToSquared(g),k);e=Math.pow(g.distanceToSquared(h),k);k=Math.pow(h.distanceToSquared(c),k);1E-4">e&&(e=1);1E-4>d&&(d=e);1E-4>k&&(k=e);Ae.initNonuniformCatmullRom(f.x,g.x,h.x,c.x,d,e,k);Be.initNonuniformCatmullRom(f.y,g.y,h.y,c.y,d,e,k);Ce.initNonuniformCatmullRom(f.z,g.z,h.z,c.z,d,e,k)}else"catmullrom"===this.curveType&&(Ae.initCatmullRom(f.x,g.x,h.x,c.x,this.tension),Be.initCatmullRom(f.y,g.y,h.y,c.y,this.tension),Ce.initCatmullRom(f.z,g.z,h.z,c.z,this.tension));b.set(Ae.calc(a),
Be.calc(a),Ce.calc(a));return b};ca.prototype.copy=function(a){L.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curvetype=a.curvetype;this.tension=a.tension;return this};ca.prototype.tojson="function(){var" a="L.prototype.toJSON.call(this);a.points=[];for(var" b="0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return" a}; ca.prototype.fromjson="function(a){L.prototype.fromJSON.call(this,a);this.points=[];for(var" d="a.points[b];this.points.push((new" p).fromarray(d))}this.closed="a.closed;this.curveType=a.curveType;this.tension=a.tension;return" this};ha.prototype="Object.create(L.prototype);Ha.prototype.constructor=Ha;Ha.prototype.isCubicBezierCurve=!0;Ha.prototype.getPoint=function(a,b){b=b||new" z;var c="this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(ad(a,c.x,d.x,e.x,f.x),ad(a,c.y,d.y,e.y," f.y));return b};ha.prototype.copy="function(a){L.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return" this};ha.prototype.tojson="function(){var" a};ha.prototype.fromjson="function(a){L.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return" this}; qa.prototype="Object.create(L.prototype);Qa.prototype.constructor=Qa;Qa.prototype.isCubicBezierCurve3=!0;Qa.prototype.getPoint=function(a,b){b=b||new" p;var b};qa.prototype.copy="function(a){L.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return" this};qa.prototype.tojson="function(){var" a.v1="this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return" a};qa.prototype.fromjson="function(a){L.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return" this};va.prototype="Object.create(L.prototype);va.prototype.constructor=va;va.prototype.isLineCurve=!0;va.prototype.getPoint=function(a,b){b=b||new" z;1="==a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return" b};va.prototype.getpointat="function(a,b){return" this.getpoint(a,b)};va.prototype.gettangent="function(){return" this.v2.clone().sub(this.v1).normalize()};va.prototype.copy="function(a){L.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return" this};va.prototype.tojson="function(){var" a};va.prototype.fromjson="function(a){L.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};ia.prototype="Object.create(L.prototype);Ia.prototype.constructor=Ia;Ia.prototype.isLineCurve3=!0;Ia.prototype.getPoint=function(a,b){b=b||new" p;1="==a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return" b};ia.prototype.getpointat="function(a,b){return" this.getpoint(a,b)};ia.prototype.copy="function(a){L.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return" this};ia.prototype.tojson="function(){var" return a};ia.prototype.fromjson="function(a){L.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};ja.prototype="Object.create(L.prototype);Ja.prototype.constructor=Ja;Ja.prototype.isQuadraticBezierCurve=!0;Ja.prototype.getPoint=function(a,b){b=b||new" b};ja.prototype.copy="function(a){L.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return" ja.prototype.tojson="function(){var" a};ja.prototype.fromjson="function(a){L.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};ra.prototype="Object.create(L.prototype);Ra.prototype.constructor=Ra;Ra.prototype.isQuadraticBezierCurve3=!0;Ra.prototype.getPoint=function(a,b){b=b||new" d.x,e.x),$c(a,c.y,d.y,e.y),$c(a,c.z,d.z,e.z));return b};ra.prototype.copy="function(a){L.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return" this};ra.prototype.tojson="function(){var" a};ra.prototype.fromjson="function(a){L.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};ka.prototype="Object.create(L.prototype);" ka.prototype.constructor="Ka;Ka.prototype.isSplineCurve=!0;Ka.prototype.getPoint=function(a,b){b=b||new" e="c[0===a?a:a-1],f=c[a],g=c[a">c.length-2?c.length-1:a+1];c=c[a>c.length-3?c.length-1:a+2];b.set(lf(d,e.x,f.x,g.x,c.x),lf(d,e.y,f.y,g.y,c.y));return b};Ka.prototype.copy=function(a){L.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());return this};ka.prototype.tojson="function(){var" a="L.prototype.toJSON.call(this);a.points=[];for(var" b="0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());return" a};ka.prototype.fromjson="function(a){L.prototype.fromJSON.call(this,a);this.points=[];for(var" d="a.points[b];this.points.push((new" z).fromarray(d))}return this};var af="Object.freeze({ArcCurve:dc,CatmullRomCurve3:ca,CubicBezierCurve:Ha,CubicBezierCurve3:Qa,EllipseCurve:za,LineCurve:va,LineCurve3:Ia,QuadraticBezierCurve:Ja,QuadraticBezierCurve3:Ra," splinecurve:ka});xa.prototype="Object.assign(Object.create(L.prototype),{constructor:Xa,add:function(a){this.curves.push(a)},closePath:function(){var" va(b,a))},getpoint:function(a){var>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();
return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getlength(),a.push(b);return 0="==a&&(a=40);for(var" this.cachelengths="a},getSpacedPoints:function(a){void" b="[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return" b},getpoints:function(a){a="a||12;for(var" f="e[d];f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&(f.isLineCurve||f.isLineCurve3)?1:f&&f.isSplineCurve?a*f.points.length:a);for(var" g="0;g<f.length;g++){var" h="f[g];c&&c.equals(h)||(b.push(h),c=h)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return" b},copy:function(a){l.prototype.copy.call(this,a);this.curves="[];for(var" this}, tojson:function(){var a="L.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var" a},fromjson:function(a){l.prototype.fromjson.call(this,a);this.autoclose="a.autoClose;this.curves=[];for(var" d="a.curves[b];this.curves.push((new" af[d.type]).fromjson(d))}return this}});la.prototype="Object.assign(Object.create(Xa.prototype),{constructor:La,setFromPoints:function(a){this.moveTo(a[0].x," a[0].y);for(var c="new" va(this.currentpoint.clone(),new z(a,b));this.curves.push(c);this.currentpoint.set(a,b)},quadraticcurveto:function(a,b,c,d){a="new" ja(this.currentpoint.clone(),new z(a,b),new z(c,d));this.curves.push(a);this.currentpoint.set(c,d)},beziercurveto:function(a,b,c,d,e,f){a="new" ha(this.currentpoint.clone(),new z(c,d),new z(e,f));this.curves.push(a); this.currentpoint.set(e,f)},splinethru:function(a){var ka(b);this.curves.push(b);this.currentpoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentpoint.x,b+this.currentpoint.y,c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentpoint.x,b+this.currentpoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a="new" za(a,b,c,d,e,f,g,h);0<this.curves.length&& (b="a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)},copy:function(a){Xa.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return" this},tojson:function(){var a},fromjson:function(a){xa.prototype.fromjson.call(this,a);this.currentpoint.fromarray(a.currentpoint);return this}});db.prototype="Object.assign(Object.create(La.prototype)," {constructor:db,getpointsholes:function(a){for(var b},extractpoints:function(a){return{shape:this.getpoints(a),holes:this.getpointsholes(a)}},copy:function(a){la.prototype.copy.call(this,a);this.holes="[];for(var" return a},fromjson:function(a){la.prototype.fromjson.call(this,a);this.uuid="a.uuid;this.holes=[];for(var" la).fromjson(d))}return this}});x.prototype="Object.assign(Object.create(D.prototype),{constructor:X,isLight:!0,copy:function(a){D.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return" this},tojson:function(a){a="D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=" this.intensity;void 0!="=this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void" a}});wd.prototype="Object.assign(Object.create(X.prototype),{constructor:wd,isHemisphereLight:!0,copy:function(a){X.prototype.copy.call(this," a);this.groundcolor.copy(a.groundcolor);return this}});object.assign(cb.prototype,{copy:function(a){this.camera="a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return" this},clone:function(){return(new this.constructor).copy(this)},tojson:function(){var a.camera.matrix; a}});xd.prototype="Object.assign(Object.create(Cb.prototype),{constructor:xd,isSpotLightShadow:!0,update:function(a){var" a.penumbra;this.decay="a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return" this}});zd.prototype="Object.assign(Object.create(X.prototype),{constructor:zd,isPointLight:!0,copy:function(a){X.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return" this}});ad.prototype="Object.assign(Object.create(Cb.prototype),{constructor:Ad});Bd.prototype=Object.assign(Object.create(X.prototype),{constructor:Bd,isDirectionalLight:!0,copy:function(a){X.prototype.copy.call(this," a);this.target="a.target.clone();this.shadow=a.shadow.clone();return" this}});cd.prototype="Object.assign(Object.create(X.prototype),{constructor:Cd,isAmbientLight:!0});Dd.prototype=Object.assign(Object.create(X.prototype),{constructor:Dd,isRectAreaLight:!0,copy:function(a){X.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return" a}});var ia="{arraySlice:function(a," b,c){return ia.istypedarray(a)?new a.constructor(a.subarray(b,void b.bytes_per_element?new b(a):array.prototype.slice.call(a)},istypedarray:function(a){return arraybuffer.isview(a)&&!(a instanceof dataview)},getkeyframeorder:function(a){for(var a[b]-a[c]});return c},sortedarray:function(a,b,c){for(var new a.constructor(d),f="0,g=0;g!==d;++f)for(var" e},flattenjson:function(a,b,c,d){for(var e="1,f=a[0];void" if(void while(void d;this._cachedindex="c=b.length;return" this.afterend_(c-1,a,e)}if(c="==f)break;e=d;d=b[++c];if(a<d)break" b}d="b.length;break" c}if(a>=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0="==e)return" this._cachedindex="0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a">=e)break b}d=c;c=
0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0="==e)return" this._cachedindex="0,this.beforeStart_(0,a,d);if(void" this.interpolate_(c,e,a,d)},settings:null,defaultsettings_:{},getsettings_:function(){return this.settings||this.defaultsettings_},copysamplevalue_:function(a){var b="this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var" e="0;e!==d;++e)b[e]=" c[a+e];return b},interpolate_:function(){throw error("call to abstract method");},intervalchanged_:function(){}});object.assign(wa.prototype,{beforestart_:wa.prototype.copysamplevalue_,afterend_:wa.prototype.copysamplevalue_});ed.prototype="Object.assign(Object.create(wa.prototype),{constructor:Ed,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var" d="this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void" 2401:e="a;g=2*b-c;break;case" 2402:e="d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void" 2401:f="a;h=2*c-b;break;case" 2402:f="1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var" h="a-g,k=this._offsetPrev,m=this._offsetNext,l=this._weightPrev,n=this._weightNext," p="(c-b)/(d-b);c=p*p;d=c*p;b=-l*d+2*l*c-l*p;l=(1+l)*d+(-1.5-2*l)*c+(-.5+l)*p+1;p=(-1-n)*d+(1.5+n)*c+.5*p;n=n*d-n*c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+l*f[h+c]+p*f[a+c]+n*f[m+c];return" e}});bd.prototype="Object.assign(Object.create(wa.prototype),{constructor:bd,interpolate_:function(a,b,c,d){var" e}});fd.prototype="Object.assign(Object.create(wa.prototype),{constructor:Fd," interpolate_:function(a){return this.copysamplevalue_(a-1)}});object.assign(oa,{tojson:function(a){var 0!="=b.toJSON)b=b.toJSON(a);else{b={name:a.name,times:ia.convertArray(a.times,Array),values:ia.convertArray(a.values,Array)};var" c="a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return" b}});object.assign(oa.prototype,{constructor:oa,timebuffertype:float32array,valuebuffertype:float32array,defaultinterpolation:2301,interpolantfactorymethoddiscrete:function(a){return new fd(this.times, this.values,this.getvaluesize(),a)},interpolantfactorymethodlinear:function(a){return bd(this.times,this.values,this.getvaluesize(),a)},interpolantfactorymethodsmooth:function(a){return ed(this.times,this.values,this.getvaluesize(),a)},setinterpolation:function(a){switch(a){case 2300:var 2301:b="this.InterpolantFactoryMethodLinear;break;case" 2302:b="this.InterpolantFactoryMethodSmooth}if(void" interpolation for "+this.valuetypename+ " keyframe track named "+this.name;if(void throw error(b);console.warn("three.keyframetrack:",b);return this}this.createinterpolant="b;return" this},getinterpolation:function(){switch(this.createinterpolant){case this.interpolantfactorymethoddiscrete:return 2300;case this.interpolantfactorymethodlinear:return 2301;case this.interpolantfactorymethodsmooth:return 2302}},getvaluesize:function(){return this.values.length this.times.length},shift:function(a){if(0!="=a)for(var" this},scale:function(a){if(1!="=a)for(var" this},trim:function(a,b){for(var>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),a=this.getValueSize(),this.times=ia.arraySlice(c,e,f),this.values=ia.arraySlice(this.values,e*a,f*a);return this},validate:function(){var a=
!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var c=this.times;b=this.values;var d=c.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if("number"===typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,g);a=!1;break}if(null!==e&&e>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,g,e);a=!1;break}e=
g}if(void 0!==b&&ia.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,d);a=!1;break}return a},optimize:function(){for(var a=this.times,b=this.values,c=this.getValueSize(),d=2302===this.getInterpolation(),e=1,f=a.length-1,g=1;g<f;++g){var 0="==d.length?null:new" h="!1,k=a[g];if(k!==a[g+1]&&(1!==g||k!==k[0]))if(d)h=!0;else{var" m="g*c,l=m-c,n=m+c;for(k=0;k!==c;++k){var" p="b[m+k];if(p!==b[l+k]||p!==b[n+k]){h=!0;break}}}if(h){if(g!==e)for(a[e]=" a[g],h="g*c,m=e*c,k=0;k!==c;++k)b[m+k]=b[h+k];++e}}if(0<f){a[e]=a[f];h=f*c;m=e*c;for(k=0;k!==c;++k)b[m+k]=b[h+k];++e}e!==a.length&&(this.times=ia.arraySlice(a,0,e),this.values=ia.arraySlice(b,0,e*c));return" this}});gd.prototype="Object.assign(Object.create(oa.prototype),{constructor:Gd,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void" 0,interpolantfactorymethodsmooth:void 0});hd.prototype="Object.assign(Object.create(oa.prototype),{constructor:Hd," valuetypename:"color"});ec.prototype="Object.assign(Object.create(oa.prototype),{constructor:ec,ValueTypeName:"number"});Id.prototype=Object.assign(Object.create(wa.prototype),{constructor:Id,interpolate_:function(a,b,c,d){var" e="this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)fa.slerpFlat(e,0,f,a-g,f,a,b);return" e}});cd.prototype="Object.assign(Object.create(oa.prototype),{constructor:cd,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return" new id(this.times, this.values,this.getvaluesize(),a)},interpolantfactorymethodsmooth:void 0});jd.prototype="Object.assign(Object.create(oa.prototype),{constructor:Jd,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void" 0});fc.prototype="Object.assign(Object.create(oa.prototype),{constructor:fc,ValueTypeName:"vector"});Object.assign(Ca,{parse:function(a){for(var" b="[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(Sg(c[e]).scale(d));" return ca(a.name,a.duration,b)},tojson:function(a){var d="0,e=c.length;d!==e;++d)b.push(oa.toJSON(c[d]));return" a},createfrommorphtargetsequence:function(a,b,c,d){for(var ec(".morphtargetinfluences["+b[g].name+ "]",h,k)).scale(1 c))}return ca(a,-1,f)},findbyname:function(a,b){var c="a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return" c[a];return null},createclipsfrommorphtargetsequences:function(a,b,c){for(var in d)a.push(ca.createfrommorphtargetsequence(m,d[m],b,c));return a},parseanimation:function(a, b){if(!a)return console.error("three.animationclip: no animation jsonloader data."),null;var f="[],g=[];ia.flattenJSON(c,f,g,d);0!==f.length&&e.push(new" a(b,f,g))}},d="[],e=a.name||"default",f=a.length||-1,g=a.fps||30;a=a.hierarchy||[];for(var" k="a[h].keys;if(k&&0!==k.length)if(k[0].morphTargets){f={};for(var" l="0;l<k[m].morphTargets.length;l++)f[k[m].morphTargets[l]]=-1;for(var" n f){var r="k[m];p.push(r.time);u.push(r.morphTarget===n?1:0)}d.push(new" ec(".morphtargetinfluence["+n+"]",p,u))}f="f.length*(g||1)}else" +b[h].name+"]",c(fc,m+".position",k,"pos",d),c(cd,m+".quaternion",k,"rot",d),c(fc,m+".scale",k,"scl",d)}return ca(e,f,d)}});object.assign(ca.prototype,{resetduration:function(){for(var a="0,b=0,c=this.tracks.length;b!==c;++b){var" a;return this},trim:function(){for(var this},validate:function(){for(var a},optimize:function(){for(var this}});object.assign(kd.prototype,{load:function(a,b,c,d){var ga(e.manager)).load(a,function(a){b(e.parse(json.parse(a)))},c,d)},settextures:function(a){this.textures="a},parse:function(a){function" b(a){void c[a]&&console.warn("three.materialloader: undefined texture",a);return c[a]}var vg[a.type];void 0!="=a.uuid&&(d.uuid=a.uuid);void" a.clearcoat);void a.opacity);void a.wireframelinejoin);void (d.morphtargets="a.morphTargets);void" void z).fromarray(e)}void a.metalnessmap&&(d.metalnessmap="b(a.metalnessMap));void" a.aomapintensity&&(d.aomapintensity="a.aoMapIntensity);void" d}});object.assign(ge.prototype,{load:function(a,b,c,d){var ga(e.manager)).load(a,function(a){b(e.parse(json.parse(a)))},c,d)},parse:function(a){var c,c="a.data.index;void" bf[c.type](c.array),b.setindex(new q(c,1)));var d){var bf[e.type](e.array);b.addattribute(f,new q(c,e.itemsize,e.normalized))}var a.data.drawcalls||a.data.offsets;if(void p,void da(f,a.radius));return b}});var bf="{Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof" uint8clampedarray?uint8clampedarray:uint8array,int16array:int16array,uint16array:uint16array,int32array:int32array,uint32array:uint32array,float32array:float32array, float64array:float64array};gc.handlers="{handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var" e}return null}};object.assign(gc.prototype,{crossorigin:"anonymous",onloadstart:function(){},onloadprogress:function(){},onloadcomplete:function(){},initmaterials:function(a,b,c){for(var d},creatematerial:function(){var additiveblending:2,subtractiveblending:3,multiplyblending:4,customblending:5},b="new" g,c="new" vd,d="new" kd;return function(e,f,g){function h(a,b,d,e,h){a="f+a;var" h&&(a.anisotropy="h);b=H.generateUUID();k[b]=a;return" b}var e){var "dbgcolor":case "dbgindex":case "opticaldensity":case "illumination":break;case "dbgname":m.name="n;break;case" "blending":m.blending="a[n];break;case" "colorambient":case "mapambient":console.warn("three.loader.creatematerial:",l,"is longer supported.");break;case "colordiffuse":m.color="b.fromArray(n).getHex();break;case" "colorspecular":m.specular="b.fromArray(n).getHex();break;case" "coloremissive":m.emissive="b.fromArray(n).getHex();break;case" "specularcoef":m.shininess="n;break;case" "shading":"basic"="==n.toLowerCase()&&(m.type="MeshBasicMaterial");"phong"===n.toLowerCase()&&(m.type="MeshPhongMaterial");"standard"===n.toLowerCase()&&(m.type="MeshStandardMaterial");break;case" "mapdiffuse":m.map="h(n,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case" "mapdiffuserepeat":case "mapdiffuseoffset":case "mapdiffusewrap":case "mapdiffuseanisotropy":break; case "mapemissive":m.emissivemap="h(n,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case" "mapemissiverepeat":case "mapemissiveoffset":case "mapemissivewrap":case "mapemissiveanisotropy":break;case "maplight":m.lightmap="h(n,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case" "maplightrepeat":case "maplightoffset":case "maplightwrap":case "maplightanisotropy":break;case "mapao":m.aomap="h(n,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap," e.mapaoanisotropy);break;case "mapaorepeat":case "mapaooffset":case "mapaowrap":case "mapaoanisotropy":break;case "mapbump":m.bumpmap="h(n,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case" "mapbumpscale":m.bumpscale="n;break;case" "mapbumprepeat":case "mapbumpoffset":case "mapbumpwrap":case "mapbumpanisotropy":break;case "mapnormal":m.normalmap="h(n,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case" "mapnormalfactor":m.normalscale="n;break;" "mapnormalrepeat":case "mapnormaloffset":case "mapnormalwrap":case "mapnormalanisotropy":break;case "mapspecular":m.specularmap="h(n,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case" "mapspecularrepeat":case "mapspecularoffset":case "mapspecularwrap":case "mapspecularanisotropy":break;case "mapmetalness":m.metalnessmap="h(n,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case" "mapmetalnessrepeat":case "mapmetalnessoffset":case "mapmetalnesswrap":case "mapmetalnessanisotropy":break; "maproughness":m.roughnessmap="h(n,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case" "maproughnessrepeat":case "maproughnessoffset":case "maproughnesswrap":case "maproughnessanisotropy":break;case "mapalpha":m.alphamap="h(n,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case" "mapalpharepeat":case "mapalphaoffset":case "mapalphawrap":case "mapalphaanisotropy":break;case "flipsided":m.side="1;break;case" "doublesided":m.side="2;break;case" "transparency":console.warn("three.loader.creatematerial: transparency has been renamed to opacity");m.opacity="n;break;case" "depthtest":case "depthwrite":case "colorwrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":m[l]="n;break;case" "vertexcolors":!0="==n&&(m.vertexColors=2);"face"===n&&(m.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial:" unsupported",l,n)}}"meshbasicmaterial"="==m.type&&delete" m.emissive;"meshphongmaterial"!="=" m.type&&delete m.specular;1>m.opacity&&(m.transparent=!0);d.setTextures(k);return d.parse(m)}}()});var De={decodeText:function(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);for(var b="",c=0,d=a.length;c<d;c++)b+=string.fromcharcode(a[c]);return decodeuricomponent(escape(b))},extracturlbase:function(a){var b="a.lastIndexOf("/");return-1===b?"./":a.substr(0,b+1)}};Object.assign(he.prototype,{crossOrigin:"anonymous",load:function(a,b,c,d){var" e="this,f=this.texturePath&&"string"===" typeof this.texturepath?this.texturepath:de.extracturlbase(a),g="new" ga(this.manager);g.setwithcredentials(this.withcredentials);g.load(a,function(c){c="JSON.parse(c);var" d="c.metadata;if(void" 0!="=d&&(d=d.type,void" "+a+" should be loaded with three.objectloader instead.");return}c="e.parse(c,f);b(c.geometry,c.materials)},c,d)},setCrossOrigin:function(a){this.crossOrigin=a;return" this},settexturepath:function(a){this.texturepath="a;return" this}, parse:function(){return function(a,b){void c="new" r,d="a,e,f,g,h=d.faces;var" k="d.vertices;var" m="d.normals,l=d.colors;var" n="d.scale;var" t="0;if(void" u="0;for(g=k.length;u<g;)e=new" p,e.x="k[u++]*n,e.y=k[u++]*n,e.z=k[u++]*n,c.vertices.push(e);u=0;for(g=h.length;u<g;){k=h[u++];var" r="k&1;var" v="k&2;e=k&8;var" y="k&16;var" x="k&32;n=k&64;k&=128;if(r){r=" new ta;r.a="h[u];r.b=h[u+1];r.c=h[u+3];var" w="new" ta;w.a="h[u+1];w.b=h[u+2];w.c=h[u+3];u+=4;v&&(v=h[u++],r.materialIndex=v,w.materialIndex=v);v=c.faces.length;if(e)for(e=0;e<t;e++){var">f;f++){var E=h[u++];var A=B[2*E];E=B[2*E+1];A=new z(A,E);2!==f&&c.faceVertexUvs[e][v].push(A);0!==f&&c.faceVertexUvs[e][v+1].push(A)}}y&&(y=3*h[u++],r.normal.set(m[y++],m[y++],m[y]),w.normal.copy(r.normal));if(x)for(e=0;4>e;e++)y=3*h[u++],x=new p(m[y++],
m[y++],m[y]),2!==e&&r.vertexNormals.push(x),0!==e&&w.vertexNormals.push(x);n&&(n=h[u++],n=l[n],r.color.setHex(n),w.color.setHex(n));if(k)for(e=0;4>e;e++)n=h[u++],n=l[n],2!==e&&r.vertexColors.push(new G(n)),0!==e&&w.vertexColors.push(new G(n));c.faces.push(r);c.faces.push(w)}else{r=new Ta;r.a=h[u++];r.b=h[u++];r.c=h[u++];v&&(v=h[u++],r.materialIndex=v);v=c.faces.length;if(e)for(e=0;e<t;e++)for(b=d.uvs[e],c.facevertexuvs[e][v]=[],f=0;3>f;f++)E=h[u++],A=B[2*E],E=B[2*E+1],A=new z(A,E),c.faceVertexUvs[e][v].push(A);
y&&(y=3*h[u++],r.normal.set(m[y++],m[y++],m[y]));if(x)for(e=0;3>e;e++)y=3*h[u++],x=new p(m[y++],m[y++],m[y]),r.vertexNormals.push(x);n&&(n=h[u++],r.color.setHex(l[n]));if(k)for(e=0;3>e;e++)n=h[u++],r.vertexColors.push(new G(l[n]));c.faces.push(r)}}d=a;u=void 0!==d.influencesPerVertex?d.influencesPerVertex:2;if(d.skinWeights)for(g=0,h=d.skinWeights.length;g<h;g+=u)c.skinweights.push(new 0="==a.materials||0===a.materials.length)return{geometry:c};a=gc.prototype.initMaterials(a.materials,b," v(d.skinweights[g],1<u?d.skinweights[g+1]:0,2<u?d.skinweights[g+2]:0,3<u?d.skinweights[g+3]:0));if(d.skinindices)for(g="0,h=d.skinIndices.length;g<h;g+=u)c.skinIndices.push(new" v(d.skinindices[g],1<u?d.skinindices[g+1]:0,2<u?d.skinindices[g+2]:0,3<u?d.skinindices[g+3]:0));c.bones="d.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When" skinning, number of vertices ("+c.vertices.length+"), skinindices ("+c.skinindices.length+"), and skinweights ("+c.skinweights.length+") should match.");g="a;h=g.scale;if(void" 0!="=g.morphTargets)for(d=" 0,u="g.morphTargets.length;d<u;d++)for(c.morphTargets[d]={},c.morphTargets[d].name=g.morphTargets[d].name,c.morphTargets[d].vertices=[],m=c.morphTargets[d].vertices,l=g.morphTargets[d].vertices,t=0,k=l.length;t<k;t+=3)n=new" p,n.x="l[t]*h,n.y=l[t+1]*h,n.z=l[t+2]*h,m.push(n);if(void" "morphcolors" no longer supported. using them as face colors.'),h="c.faces,g=g.morphColors[0].colors,d=0,u=h.length;d<u;d++)h[d].color.fromArray(g," 3*d);g="a;d=[];u=[];void" this.crossorigin);return{geometry:c,materials:a}}}()});object.assign(mf.prototype,{crossorigin:"anonymous",load:function(a,b,c,d){""="==this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var" e="this;(new" ga(e.manager)).load(a,function(c){var f="null;try{f=JSON.parse(c)}catch(h){void" can't parse "+a+".",h.message);return}c="f.metadata;void" load "+ a+". use three.jsonloader instead."):e.parse(f,b)},c,d)},settexturepath:function(a){this.texturepath="a;return" this},setcrossorigin:function(a){this.crossorigin="a;return" this},parse:function(a,b){var c="this.parseShape(a.shapes);c=this.parseGeometries(a.geometries,c);var" d="this.parseImages(a.images,function(){void" void e},parseshape:function(a){var b="{};if(void" db).fromjson(a[c]);b[e.uuid]="e}return" b},parsegeometries:function(a,b){var he,e="new" ge,f="0,g=a.length;f<g;f++){var" h="a[f];switch(h.type){case" "planegeometry":case "planebuffergeometry":var k="new" xa[h.type](h.width,h.height,h.widthsegments,h.heightsegments);break;case "boxgeometry":case "boxbuffergeometry":case "cubegeometry":k="new" xa[h.type](h.width,h.height,h.depth,h.widthsegments,h.heightsegments,h.depthsegments);break;case "circlegeometry":case "circlebuffergeometry":k="new" xa[h.type](h.radius,h.segments,h.thetastart,h.thetalength);break;case "cylindergeometry":case "cylinderbuffergeometry":k="new" xa[h.type](h.radiustop,h.radiusbottom,h.height,h.radialsegments,h.heightsegments,h.openended,h.thetastart,h.thetalength);break;case "conegeometry":case "conebuffergeometry":k="new" xa[h.type](h.radius,h.height,h.radialsegments, h.heightsegments,h.openended,h.thetastart,h.thetalength);break;case "spheregeometry":case "spherebuffergeometry":k="new" xa[h.type](h.radius,h.widthsegments,h.heightsegments,h.phistart,h.philength,h.thetastart,h.thetalength);break;case "dodecahedrongeometry":case "dodecahedronbuffergeometry":case "icosahedrongeometry":case "icosahedronbuffergeometry":case "octahedrongeometry":case "octahedronbuffergeometry":case "tetrahedrongeometry":case "tetrahedronbuffergeometry":k="new" xa[h.type](h.radius,h.detail); break;case "ringgeometry":case "ringbuffergeometry":k="new" xa[h.type](h.innerradius,h.outerradius,h.thetasegments,h.phisegments,h.thetastart,h.thetalength);break;case "torusgeometry":case "torusbuffergeometry":k="new" xa[h.type](h.radius,h.tube,h.radialsegments,h.tubularsegments,h.arc);break;case "torusknotgeometry":case "torusknotbuffergeometry":k="new" xa[h.type](h.radius,h.tube,h.tubularsegments,h.radialsegments,h.p,h.q);break;case "lathegeometry":case "lathebuffergeometry":k="new" xa[h.type](h.points, h.segments,h.phistart,h.philength);break;case "polyhedrongeometry":case "polyhedronbuffergeometry":k="new" xa[h.type](h.vertices,h.indices,h.radius,h.details);break;case "shapegeometry":case "shapebuffergeometry":k="[];for(var" m="0,l=h.shapes.length;m<l;m++){var" n="b[h.shapes[m]];k.push(n)}k=new" xa[h.type](k,h.curvesegments);break;case "extrudegeometry":case "extrudebuffergeometry":k="[];m=0;for(l=h.shapes.length;m<l;m++)n=b[h.shapes[m]],k.push(n);m=h.options.extrudePath;void" (new af[m.type]).fromjson(m));k="new" xa[h.type](k,h.options);break;case "buffergeometry":k="e.parse(h);break;case" "geometry":k="d.parse(h,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader:" unsupported geometry type "'+h.type+'"');continue}k.uuid="h.uuid;void" c},parsematerials:function(a,b){var kd;d.settextures(b);b="0;for(var" e;b++){var g="[],h=0;h<f.materials.length;h++)g.push(d.parse(f.materials[h]));c[f.uuid]=g}else" c[f.uuid]="d.parse(f)}}return" c},parseanimations:function(a){for(var b},parseimages:function(a,b){function c(a){d.manager.itemstart(a);return f.load(a,function(){d.manager.itemend(a)},void 0,function(){d.manager.itemend(a);d.manager.itemerror(a)})}var if(void ce(b);var zc(b);f.setcrossorigin(this.crossorigin);b="0;for(var" e},parsetextures:function(a,b){function c(a,b){if("number"="==typeof" a)return a;console.warn("three.objectloader.parsetexture: constant be in numeric form.", a);return b[a]}var "image" specified for',g.uuid);void undefined image",g.image);var ua(b[g.image]):new t(b[g.image]);h.needsupdate="!0;h.uuid=g.uuid;void" d},parseobject:function(a,b,c){function d(a){void geometry", b[a]}function e(a){if(void material",f);b.push(c[f])}return b}void material",a);return c[a]}}switch(a.type){case "scene":var qd;void g(a.background));void mb(a.fog.color,a.fog.near,a.fog.far): "fogexp2"="==a.fog.type&&(f.fog=new" lb(a.fog.color,a.fog.density)));break;case "perspectivecamera":f="new" z(a.fov,a.aspect,a.near,a.far);void "orthographiccamera":f="new" hb(a.left,a.right,a.top,a.bottom,a.near,a.far);void a.view));break;case "ambientlight":f="new" cd(a.color,a.intensity);break;case "directionallight":f="new" bd(a.color,a.intensity);break;case "pointlight":f="new" zd(a.color,a.intensity,a.distance,a.decay);break;case "rectarealight":f="new" dd(a.color,a.intensity,a.width,a.height);break;case "spotlight":f="new" yd(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case "hemispherelight":f="new" wd(a.color,a.groundcolor,a.intensity);break;case "skinnedmesh":console.warn("three.objectloader.parseobject() does not support skinnedmesh yet."); case "mesh":f="d(a.geometry);var" sd(f,g):new la(f,g);break;case "lod":f="new" bc;break;case "line":f="new" sa(d(a.geometry),e(a.material),a.mode);break;case "lineloop":f="new" td(d(a.geometry),e(a.material));break;case "linesegments":f="new" w(d(a.geometry),e(a.material));break;case "pointcloud":case "points":f="new" ob(d(a.geometry),e(a.material));break;case "sprite":f="new" ac(e(a.material));break;case "group":f="new" kb;break;default:f="new" d}f.uuid="a.uuid;void" a.name&&(f.name="a.name);void" (f.receiveshadow="a.receiveShadow);a.shadow&&(void" f}});var wg="{UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306," cubeuvrefractionmapping:307},cf="{RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Df={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};ie.prototype={constructor:ie,setOptions:function(a){this.options=a;return" this},load:function(a,b,c,d){void e.manager.itemstart(a), settimeout(function(){b&&b(f);e.manager.itemend(a)},0),f;fetch(a).then(function(a){return a.blob()}).then(function(a){return createimagebitmap(a,e.options)}).then(function(c){fb.add(a,c);b&&b(c);e.manager.itemend(a)}).catch(function(b){d&&d(b);e.manager.itemend(a);e.manager.itemerror(a)})},setcrossorigin:function(){return this},setpath:function(a){this.path="a;return" this}};object.assign(je.prototype,{moveto:function(a,b){this.currentpath="new" la;this.subpaths.push(this.currentpath);this.currentpath.moveto(a, b)},lineto:function(a,b){this.currentpath.lineto(a,b)},quadraticcurveto:function(a,b,c,d){this.currentpath.quadraticcurveto(a,b,c,d)},beziercurveto:function(a,b,c,d,e,f){this.currentpath.beziercurveto(a,b,c,d,e,f)},splinethru:function(a){this.currentpath.splinethru(a)},toshapes:function(a,b){function c(a){for(var db;f.curves="e.curves;b.push(f)}return" b}function d(a,b){for(var>
Number.EPSILON){if(0>m&&(g=b[f],k=-k,h=b[e],m=-m),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=m*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return 0="==b&&(b=100);var" d}var e="Va.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return" c(f);b="[];if(1===f.length){var" g="f[0];var" h="new" db;h.curves="g.curves;b.push(h);return" b}var k="!e(f[0].getPoints());k=a?!k:k;h=[];var" m="[],l=[],n=0;m[n]=void" 0;l[n]="[];for(var" p="0,u=f.length;p<u;p++){g=f[p];var" r="g.getPoints();var" v="e(r);(v=a?!v:v)?(!k&&m[n]&&n++,m[n]={s:new" db,p:r},m[n].s.curves="g.curves,k&&n++,l[n]=[]):l[n].push({h:g,p:r[0]})}if(!m[0])return" c(f);if(1<m.length){p="!1;a=[];e=0;for(f=m.length;e<f;e++)h[e]=[];e=0;for(f=m.length;e<f;e++)for(g=l[e],v=0;v<g.length;v++){k=g[v];n=!0;for(r=0;r<m.length;r++)d(k.p,m[r].p)&&(e!==r&&a.push({froms:e,tos:r,hole:v}),n?(n=!1,h[r].push(k)):p=!0);n&&h[e].push(k)}0<a.length&&(p||(l=h))}p=0;for(e=m.length;p<e;p++)for(h=m[p].s," b.push(h),a="l[p],f=0,g=a.length;f<g;f++)h.holes.push(a[f].h);return" b}});object.assign(ke.prototype,{isfont:!0,generateshapes:function(a,b){void c="[],d=b;b=this.data;var" f="(b.boundingBox.yMax-b.boundingBox.yMin+b.underlineThickness)*d;a=[];for(var" l="d;var" n="g,p=h;if(m=b.glyphs[m]||b.glyphs["?"]){var" u="new" je;if(m.o)for(var m.o.split(" ")),v="0,y=r.length;v<y;)switch(r[v++]){case" "m":var x="r[v++]*l+n;var" w="r[v++]*l+p;u.moveTo(x,w);break;case" "l":x="r[v++]*l+n;w=r[v++]*l+p;u.lineTo(x,w);break;case" "q":var z="r[v++]*l+n;var" a="r[v++]*l+p;var" d="r[v++]*l+p;u.quadraticCurveTo(C,D,z,A);break;case" "b":z="r[v++]*l+n,A=r[v++]*l+p,C=r[v++]*l+n,D=r[v++]*l+p,x=r[v++]*l+n,w=r[v++]*l+p,u.bezierCurveTo(C,D,x,w,z,A)}l={offsetX:m.ha*l,path:u}}else" 0;g+="l.offsetX;a.push(l.path)}}b=0;for(e=a.length;b<e;b++)Array.prototype.push.apply(c," a[b].toshapes());return c}});object.assign(nf.prototype,{load:function(a,b,c,d){var ga(this.manager);f.setpath(this.path);f.load(a,function(a){try{var typeface.js support is being deprecated. use typeface.json instead."),c="JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function(a){return" new ke(a)},setpath:function(a){this.path="a;return" this}});var pd,ne="{getContext:function(){void" (window.audiocontext|| window.webkitaudiocontext));return pd},setcontext:function(a){pd="a}};Object.assign(le.prototype,{load:function(a,b,c,d){var" ga(this.manager);e.setresponsetype("arraybuffer");e.load(a,function(a){a="a.slice(0);ne.getContext().decodeAudioData(a,function(a){b(a)})},c,d)}});Object.assign(of.prototype,{update:function(){var" a,b,c,d,e,f,g,h,k="new" i,l="new" i;return function(m){if(a!="=this||b!==m.focus||c!==m.fov||d!==m.aspect*this.aspect||e!==m.near||f!==m.far||g!==m.zoom||h!==this.eyeSep){a=this;b=" m.focus;c="m.fov;d=m.aspect*this.aspect;e=m.near;f=m.far;g=m.zoom;var" dd.prototype="Object.create(D.prototype);dd.prototype.constructor=dd;me.prototype=Object.assign(Object.create(D.prototype),{constructor:me,getInput:function(){return" this.gain},removefilter:function(){null!="=this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null);return" this},getfilter:function(){return this.filter},setfilter:function(a){null!="=this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):" this.gain.disconnect(this.context.destination);this.filter="a;this.gain.connect(this.filter);this.filter.connect(this.context.destination);return" this},getmastervolume:function(){return this.gain.gain.value},setmastervolume:function(a){this.gain.gain.settargetattime(a,this.context.currenttime,.01);return this},updatematrixworld:function(){var p,b="new" fa,c="new" p,d="new" p;return function(e){d.prototype.updatematrixworld.call(this,e);e="this.context.listener;var" b,c);d.set(0,0,-1).applyquaternion(b);e.positionx?(e.positionx.setvalueattime(a.x,this.context.currenttime),e.positiony.setvalueattime(a.y,this.context.currenttime),e.positionz.setvalueattime(a.z,this.context.currenttime),e.forwardx.setvalueattime(d.x,this.context.currenttime),e.forwardy.setvalueattime(d.y,this.context.currenttime),e.forwardz.setvalueattime(d.z,this.context.currenttime),e.upx.setvalueattime(f.x,this.context.currenttime),e.upy.setvalueattime(f.y,this.context.currenttime),e.upz.setvalueattime(f.z, this.context.currenttime)):(e.setposition(a.x,a.y,a.z),e.setorientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});hc.prototype="Object.assign(Object.create(D.prototype),{constructor:hc,getOutput:function(){return" this.gain},setnodesource:function(a){this.hasplaybackcontrol="!1;this.sourceType="audioNode";this.source=a;this.connect();return" this},setmediaelementsource:function(a){this.hasplaybackcontrol="!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(a);this.connect();return" this}, setbuffer:function(a){this.buffer="a;this.sourceType="buffer";this.autoplay&&this.play();return" this},play:function(){if(!0="==this.isPlaying)console.warn("THREE.Audio:" audio already playing.");else if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" this has no playback control.");else{var a.start(this.starttime,this.offset);this.isplaying="!0;this.source=a;return" this.connect()}},pause:function(){if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" control.");else return!0="==this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio:" return this.source.stop(), this.source.onended="null,this.offset=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var" this.source.connect(this.getoutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var this.filters[this.filters.length-1].disconnect(this.getoutput())}else this.source.disconnect(this.getoutput());return this},getfilters:function(){return this.filters},setfilters:function(a){a||(a="[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return" this.getfilters()[0]},setfilter:function(a){return this.setfilters(a?[a]:[])},setplaybackrate:function(a){if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" control."); else this.playbackrate="a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return" this.playbackrate},onended:function(){this.isplaying="!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio:" control."),!1):this.loop},setloop:function(a){if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" this.loop="a,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return" this.gain.gain.value},setvolume:function(a){this.gain.gain.settargetattime(a,this.context.currenttime,.01);return this}});oe.prototype="Object.assign(Object.create(hc.prototype),{constructor:oe,getOutput:function(){return" this.panner},getrefdistance:function(){return this.panner.refdistance},setrefdistance:function(a){this.panner.refdistance="a;return" this},getrollofffactor:function(){return this.panner.rollofffactor}, setrollofffactor:function(a){this.panner.rollofffactor="a;return" this},getdistancemodel:function(){return this.panner.distancemodel},setdistancemodel:function(a){this.panner.distancemodel="a;return" this},getmaxdistance:function(){return this.panner.maxdistance},setmaxdistance:function(a){this.panner.maxdistance="a;return" this},setdirectionalcone:function(a,b,c){this.panner.coneinnerangle="a;this.panner.coneOuterAngle=b;this.panner.coneOuterGain=c;return" p, b="new" this.data},getaveragefrequency:function(){for(var b.length}});object.assign(qe.prototype,{accumulate:function(a, b){var e+="b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function(a){var">d&&this._mixBufferRegion(c,a,3*b,1-d,b);d=b;for(var f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,
c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){fa.slerpflat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var 0="==a[c]){console.error("THREE.PropertyBinding:" f="1-d,g=0;g!==e;++g){var" h="b+g;a[h]=a[h]*f+a[c+g]*d}}});Object.assign(pf.prototype,{getValue:function(a,b){this.bind();var" c="this._bindings[this._targetGroup.nCachedObjects_];void" 0!="=c&&c.getValue(a," b)},setvalue:function(a,b){for(var a="this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var" a&&a.isanimationobjectgroup?new pa.composite(a,b,c):new pa(a,b,c)},sanitizenodename:function(){var function(b){return b.replace( \s g,"_").replace(a,"")}}(),parsetrackname:function(){var +"\\[\\]\\.:\\ ".replace("\\.","")+"]",b="/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");a=/(WCOD+)?/.source.replace("WCOD",a);var" regexp("^"+b+a+c+d+"$"),f="["material","materials","bones"];return" function(a){var b="e.exec(a);if(!b)throw" error("propertybinding: cannot parse trackname: "+ a);b="{nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};var" d="b.nodeName.substring(c+1);-1!==f.indexOf(d)&&(b.nodeName=b.nodeName.substring(0,c),b.objectName=d)}if(null===b.propertyName||0===b.propertyName.length)throw" can not propertyname from "+a);return b}}(),findnode:function(a,b){if(!b||""="==b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return" a; if(a.skeleton){var c}if(a.children){var e="a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return" e}return null};if(a="d(a.children))return" a}return null}});object.assign(pa.prototype,{_getvalue_unavailable:function(){},_setvalue_unavailable:function(){},bindingtype:{direct:0,entirearray:1,arrayelement:2,hasfromtoarray:3},versioning:{none:0,needsupdate:1,matrixworldneedsupdate:2},getterbybindingtype:[function(a, b){a[b]="this.node[this.propertyName]},function(a,b){for(var" !0}],[function(a,b){for(var b){this.resolvedproperty[this.propertyindex]="a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var" "materials":if(!a.material){console.error("three.propertybinding: bind to material as node does have material.",this);return}if(!a.material.materials){console.error("three.propertybinding: material.materials node.material materials array.", this);return}a="a.material.materials;break;case" "bones":if(!a.skeleton){console.error("three.propertybinding: bones skeleton.",this);return}a="a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void" objectname of undefined.",this);return}a="a[c]}if(void" trying objectindex objectname, but is undefined.", this,a);return}a="a[f]}}f=a[d];if(void" update property for track: "+b.nodename+"."+d+" it wasn't found.",a);else{b="this.Versioning.None;void" morphtargetinfluences because geometry.", this);return}if(a.geometry.isbuffergeometry){if(!a.geometry.morphattributes){console.error("three.propertybinding: geometry.morphattributes.",this);return}for(c="0;c<this.node.geometry.morphAttributes.position.length;c++)if(a.geometry.morphAttributes.position[c].name===e){e=c;break}}else{if(!a.geometry.morphTargets){console.error("THREE.PropertyBinding:" geometry.morphtargets.", this);return}for(c="0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else" void console.error("three.propertybinding: this.path+" found.")},unbind:function(){this.node="null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(pa.prototype,{_getValue_unbound:pa.prototype.getValue,_setValue_unbound:pa.prototype.setValue});Object.assign(qf.prototype,{isAnimationObjectGroup:!0,add:function(){for(var" 0,l="0,p=arguments.length;l!==" p;++l){var n="arguments[l],t=n.uuid,u=d[t];if(void" r="h;t!==r;++t)g[t].push(new" pa(n,e[t],f[t]))}else if(u<c){k="a[u];var" v="--c;r=a[v];d[r.uuid]=u;a[u]=r;d[t]=v;a[v]=n;t=0;for(r=h;t!==r;++t){var" y="g[t],x=y[u];y[u]=y[v];void" pa(n,e[t],f[t]));y[v]="x}}else" a[u]!="=k&&console.error("THREE.AnimationObjectGroup:" different objects with the same uuid detected. clean caches or recreate your infrastructure when reloading scenes.")}this.ncachedobjects_="c},remove:function(){for(var">=b){var p=b++,n=a[p];c[n.uuid]=l;a[l]=n;c[k]=p;a[p]=h;h=0;for(k=e;h!==k;++h){n=d[h];var t=n[l];n[l]=n[p];n[p]=t}}}this.nCachedObjects_=b},uncache:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var k=
arguments[g].uuid,l=d[k];if(void 0!==l)if(delete d[k],l<c){k=--c;var p="a[k],n=--b,t=a[n];d[p.uuid]=l;a[l]=p;d[t.uuid]=k;a[k]=t;a.pop();p=0;for(t=f;p!==t;++p){var" u="e[p],r=u[n];u[l]=u[k];u[k]=r;u.pop()}}else" for(n="--b,t=a[n],d[t.uuid]=l,a[l]=t,a.pop(),p=0,t=f;p!==t;++p)u=e[p],u[l]=u[n],u.pop()}this.nCachedObjects_=c},subscribe_:function(a,b){var" c="this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void" 0!="=d)return" e[d];var f="this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_," l="Array(h.length);d=e.length;c[a]=d;f.push(a);g.push(b);e.push(l);c=k;for(d=h.length;c!==d;++c)l[c]=new" pa(h[c],a,b);return l},unsubscribe_:function(a){var b="this._bindingsIndicesByPath,c=b[a];if(void" d="this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(rf.prototype,{play:function(){this._mixer._activateAction(this);return" this},stop:function(){this._mixer._deactivateaction(this);return this.reset()}, reset:function(){this.paused="!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return" this.stopfading().stopwarping()},isrunning:function(){return this.enabled&&!this.paused&&0!="=this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return" this._mixer._isactiveaction(this)},startat:function(a){this._starttime="a;return" this},setloop:function(a,b){this.loop="a;this.repetitions=b;return" this},seteffectiveweight:function(a){this.weight="a;" this._effectiveweight="this.enabled?a:0;return" this.stopfading()},geteffectiveweight:function(){return this._effectiveweight},fadein:function(a){return this._schedulefading(a,0,1)},fadeout:function(a){return this._schedulefading(a,1,0)},crossfadefrom:function(a,b,c){a.fadeout(b);this.fadein(b);if(c){c="this._clip.duration;var" this},crossfadeto:function(a,b,c){return a.crossfadefrom(this,b,c)},stopfading:function(){var a="this._weightInterpolant;" null!="=a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return" this},seteffectivetimescale:function(a){this.timescale="a;this._effectiveTimeScale=this.paused?0:a;return" this.stopwarping()},geteffectivetimescale:function(){return this._effectivetimescale},setduration:function(a){this.timescale="this._clip.duration/a;return" this.stopwarping()},syncwith:function(a){this.time="a.time;this.timeScale=a.timeScale;return" this.stopwarping()},halt:function(a){return this.warp(this._effectivetimescale, 0,a)},warp:function(a,b,c){var this},stopwarping:function(){var this},getmixer:function(){return this._mixer},getclip:function(){return this._clip},getroot:function(){return this._localroot|| this._mixer._root},_update:function(a,b,c,d){if(this.enabled){var e="this._startTime;if(null!==e){b=(a-e)*c;if(0">b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;e=this._propertybindings;for(var f="0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else" this._updateweight(a)},_updateweight:function(a){var b="0;if(this.enabled){b=this.weight;var" c="this._weightInterpolant;if(null!==c){var" d="c.evaluate(a)[0];" b*="d;a">c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){b=this.timeScale;var c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0];b*=d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a,c=this._clip.duration,d=this.loop,e=this._loopCount,f=2202===d;if(0===a)return-1===
e?b:f&&1===(e&1)?c-b:b;if(2200===d)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{-1===e&&(0<=a?(e=0,this._setendings(!0,0===this.repetitions,f)):this._setendings(0===this.repetitions,!0,f));if(b>=c||0>b){d=Math.floor(b/c);b-=c*d;e+=Math.abs(d);var g=this.repetitions-e;0>=g?(this.clampWhenFinished?this.paused=!0:
this.enabled=!1,b=0<a?c:0,this._mixer.dispatchevent({type:"finished",action:this,direction:0<a?1:-1})):(1===g?(a=0>a,this._setEndings(a,!a,f)):this._setEndings(!1,!1,f),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:d}))}if(f&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:
2400:2402)},_scheduleFading:function(a,b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});re.prototype=Object.assign(Object.create(ya.prototype),{constructor:re,_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,k=h[g];void 0===
k&&(k={},h[g]=k);for(h=0;h!==e;++h){var l=d[h],p=l.name,n=k[p];if(void 0===n){n=f[h];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,g,p));continue}n=new qe(pa.create(c,p,b&&b._propertyBindings[h].binding.parsedPath),l.ValueTypeName,l.getValueSize());++n.referenceCount;this._addInactiveBinding(n,g,p)}f[h]=n;a[h].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,
d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=
[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},
_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nactiveactions},_addinactiveaction:function(a,b,c){var 0="==f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=a},_removeInactiveAction:function(a){var" d="this._actions,e=this._actionsByClip,f=e[b];void" b="this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;b=a._clip.uuid;" c="this._actionsByClip;d=c[b];var" e="d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;f._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete" d.actionbyroot[(a._localroot||this._root).uuid];0="==e.length&&delete" c[b];this._removeinactivebindingsforaction(a)},_removeinactivebindingsforaction:function(a){a="a._propertyBindings;for(var" f="e[d],g=b[b.length-1];a=a._cacheIndex;g._cacheIndex=a;b[a]=g;b.pop();delete" f[c];a:{for(var h in f)break a;delete e[d]}},_lendbinding:function(a){var a="this._controlInterpolants,b=this._nActiveControlInterpolants++," bd(new float32array(2),new float32array(2),1,this._controlinterpolantsresultbuffer),c.__cacheindex="b,a[b]=c);return" c},_takebackcontrolinterpolant:function(a){var float32array(1),clipaction:function(a,b){var a?ca.findbyname(c,a):a;a="null!==c?c.uuid:a;var" 0!="=e){f=e.actionByRoot[d];if(void" f;f="e.knownActions[0];null===c&&(c=f._clip)}if(null===c)return" null;b="new" rf(this,c,b);this._bindaction(b,f);this._addinactiveaction(b,a,d);return b},existingaction:function(a,b){var void this},update:function(a){a*="this.timeScale;for(var" this},getroot:function(){return this._root},uncacheclip:function(a){var g="d[e];this._deactivateAction(g);var" c[a]}},uncacheroot:function(a){a="a.uuid;var" b){var d)a="d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Ld.prototype.clone=function(){return" new ld(void this},clone:function(){return(new this.constructor).copy(this)}}); te.prototype="Object.assign(Object.create(ob.prototype),{constructor:te,isInstancedInterleavedBuffer:!0,copy:function(a){ob.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return" this}});ue.prototype="Object.assign(Object.create(Q.prototype),{constructor:ue,isInstancedBufferAttribute:!0,copy:function(a){Q.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return" this}});object.assign(sf.prototype,{lineprecision:1,set:function(a,b){this.ray.set(a,b)},setfromcamera:function(a, b){b&&b.isperspectivecamera?(this.ray.origin.setfrommatrixposition(b.matrixworld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isorthographiccamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far) (b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformdirection(b.matrixworld)):console.error("three.raycaster: unsupported camera type.")},intersectobject:function(a,b,c){c="c||[];ve(a,this,c,b);c.sort(tf);return" c},intersectobjects:function(a,b,c){c="c||" [];if(!1="==Array.isArray(a))return" console.warn("three.raycaster.intersectobjects: objects is not an array."),c;for(var c}});object.assign(uf.prototype,{start:function(){this.oldtime="this.startTime=("undefined"===typeof" performance?date:performance).now();this.elapsedtime="0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return" this.elapsedtime},getdelta:function(){var this.start(),0;if(this.running){var performance?date:performance).now();a="(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return" a}});object.assign(vf.prototype,{set:function(a,b,c){this.radius="a;this.phi=b;this.theta=c;return" this.constructor).copy(this)},copy:function(a){this.radius="a.radius;this.phi=a.phi;this.theta=a.theta;return" this},makesafe:function(){this.phi="Math.max(1E-6,Math.min(Math.PI-" 1e-6,this.phi));return this},setfromvector3:function(a){this.radius="a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(H.clamp(a.y/this.radius,-1,1)));return" this}});object.assign(wf.prototype,{set:function(a,b,c){this.radius="a;this.theta=b;this.y=c;return" a.x+a.z*a.z);this.theta="Math.atan2(a.x,a.z);this.y=a.y;return" this}});object.assign(we.prototype,{set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setfrompoints:function(a){this.makeempty();for(var this},setfromcenterandsize:function(){var z;return function(b,c){c="a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return" this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min); this.max.copy(a.max);return this},makeempty:function(){this.min.x="this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return" this},isempty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getcenter:function(a){void .getcenter() target now required"),a="new" z);return this.isempty()?a.set(0,0):a.addvectors(this.min,this.max).multiplyscalar(.5)},getsize:function(a){void .getsize() this.isempty()? a.set(0,0):a.subvectors(this.max,this.min)},expandbypoint:function(a){this.min.min(a);this.max.max(a);return this},expandbyvector:function(a){this.min.sub(a);this.max.add(a);return this},expandbyscalar:function(a){this.min.addscalar(-a);this.max.addscalar(a);return this},containspoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getparameter:function(a, 0="==b&&(console.warn("THREE.Box2:" b){void .getparameter() target is now required"),b="new" z);return b.set((a.x-this.min.x) (this.max.x-this.min.x),(a.y-this.min.y) (this.max.y-this.min.y))},intersectsbox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){void 0===b&&(console.warn("THREE.Box2: .clampPoint() target is now required"),b=new z);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new z;
return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(xe.prototype,{set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},
copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){void 0===a&&(console.warn("THREE.Line3: .getCenter() target is now required"),a=new p);return a.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){void 0===a&&(console.warn("THREE.Line3: .delta() target is now required"),a=new p);return a.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},
at:function(a,b){void 0===b&&(console.warn("THREE.Line3: .at() target is now required"),b=new p);return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new p,b=new p;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=H.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);void 0===c&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),
c=new p);return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}});ed.prototype=Object.create(D.prototype);ed.prototype.constructor=ed;ed.prototype.isImmediateRenderObject=!0;fd.prototype=Object.create(W.prototype);fd.prototype.constructor=fd;fd.prototype.update=function(){var a=new p,b=new p,c=new ra;return function(){var d=["a","b",
"c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,f=this.geometry.attributes.position,g=this.object.geometry;if(g&&g.isGeometry)for(var h=g.vertices,k=g.faces,l=g=0,p=k.length;l<p;l++)for(var n="k[l],t=0,u=n.vertexNormals.length;t<u;t++){var" r="n.vertexNormals[t];a.copy(h[n[d[t]]]).applyMatrix4(e);b.copy(r).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);f.setXYZ(g,a.x,a.y,a.z);g+=1;f.setXYZ(g,b.x,b.y,b.z);g+=1}else" if(g&&g.isbuffergeometry)for(d="g.attributes.position,h=g.attributes.normal,t=g=0,u=d.count;t<u;t++)a.set(d.getX(t),d.getY(t),d.getZ(t)).applyMatrix4(e),b.set(h.getX(t),h.getY(t),h.getZ(t)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(g,a.x,a.y,a.z),g+=1,f.setXYZ(g,b.x,b.y,b.z),g+=1;f.needsUpdate=!0}}();ic.prototype=Object.create(D.prototype);ic.prototype.constructor=ic;ic.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};ic.prototype.update=function(){var" a="new" p, b="new" p;return function(){this.light.updatematrixworld();var c="this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));void" 0!="=this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();jc.prototype=Object.create(W.prototype);jc.prototype.constructor=jc;jc.prototype.updateMatrixWorld=" function(){var p,b="new" i,c="new" i;return function(d){var e="this.bones,f=this.geometry,g=f.getAttribute("position");c.getInverse(this.root.matrixWorld);for(var" h="0,k=0;h<e.length;h++){var" l="e[h];l.parent&&l.parent.isBone&&(b.multiplyMatrices(c,l.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k,a.x,a.y,a.z),b.multiplyMatrices(c,l.parent.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k+1,a.x,a.y,a.z),k+=2)}f.getAttribute("position").needsUpdate=!0;D.prototype.updateMatrixWorld.call(this,d)}}();" kc.prototype="Object.create(la.prototype);kc.prototype.constructor=kc;kc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};kc.prototype.update=function(){void" g,c="new" g;return d="this.children[0];if(void" f="0,g=e.count;f<g;f++){var" md.prototype.constructor="Md;hd.prototype=Object.create(W.prototype);hd.prototype.constructor=hd;hd.prototype.update=function(){var" p,c="new" ra;return function(){this.object.updatematrixworld(!0);c.getnormalmatrix(this.object.matrixworld);var p="f[k],n=p.normal;a.copy(g[p.a]).add(g[p.b]).add(g[p.c]).divideScalar(3).applyMatrix4(d);b.copy(n).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);" e.setxyz(h,a.x,a.y,a.z);h+="1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();nc.prototype=Object.create(D.prototype);nc.prototype.constructor=nc;nc.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};nc.prototype.update=function(){var" function(){a.setfrommatrixposition(this.light.matrixworld);b.setfrommatrixposition(this.light.target.matrixworld);c.subvectors(b, a);this.lightplane.lookat(c);void a(a,g,h,k){d.set(g,h,k).unproject(e);a="c[a];if(void" b,c,d="new" p,e="new" na;return function(){b="this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4"," 0,1,-1);b.getattribute("position").needsupdate="!0}}();Db.prototype=Object.create(W.prototype);Db.prototype.constructor=Db;Db.prototype.update=function(){var" sa;return function(b){void .update() has no longer arguments.");void c.z;e[12]="c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();Db.prototype.setFromObject=function(a){this.object=a;this.update();return" this};jd.prototype="Object.create(W.prototype);jd.prototype.constructor=jd;jd.prototype.updateMatrixWorld=function(a){var" a))};kd.prototype="Object.create(sa.prototype);kd.prototype.constructor=kd;kd.prototype.updateMatrixWorld=function(a){var">Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.children[0].material.side=0>b?1:0;this.lookAt(this.plane.normal);D.prototype.updateMatrixWorld.call(this,a)};var Nd,ye;Eb.prototype=Object.create(D.prototype);Eb.prototype.constructor=Eb;Eb.prototype.setDirection=function(){var a=new p,b;return function(c){.99999<c.y?this.quaternion.set(0, 0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();Eb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};Eb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};ld.prototype=Object.create(W.prototype);
ld.prototype.constructor=ld;L.create=function(a,b){console.log("THREE.Curve.create() has been deprecated");a.prototype=Object.create(L.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};Object.assign(Xa.prototype,{createPointsGeometry:function(a){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var b=new R,c=0,d=a.length;c</c.y?this.quaternion.set(0,></p;l++)for(var></this.min.y||a.min.y></=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getparameter:function(a,></this.min.y||a.y></this._nactiveactions},_addinactiveaction:function(a,b,c){var></a?c:0,this._mixer.dispatchevent({type:"finished",action:this,direction:0<a?1:-1})):(1===g?(a=0></=a?(e=0,this._setendings(!0,0===this.repetitions,f)):this._setendings(0===this.repetitions,!0,f));if(b></a){b=this._interpolants;e=this._propertybindings;for(var></c){k=--c;var></=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){fa.slerpflat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var></=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return></g.y||a.y></h;g+=u)c.skinweights.push(new></t;e++)for(b=d.uvs[e],c.facevertexuvs[e][v]=[],f=0;3></d;c++)b+=string.fromcharcode(a[c]);return></f;++g){var></b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void></d;)e=c+d></f&&(c=2,e=f);for(f=c-2;;){if(void></d;c++)b+=this.curves[c].getlength(),a.push(b);return></c;b++)this.points.push(a.points[b].clone());return></c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curvetype=a.curvetype;this.tension=a.tension;return></number.epsilon&&(d=e?0:c);!0!==this.aclockwise||e||(d=d===c?-c:d-c);c=this.astartangle+a*d;a=this.ax+this.xradius*math.cos(c);var></d[0].dot(g.crossvectors(e[0],e[a]))&&(c=-c),k=1;k<=a;k++)e[k].applymatrix4(h.makerotationaxis(d[k],></a&&(a=1);b=this.getpoint(b);return></g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return></g.length;h++)m[h]=g.charcodeat(h);var></b.length;a++)d.push(f),f+=b[a].length,gf(c,b[a]);b=ug.triangulate(c,d);for(a=0;a<b.length;a+=3)e.push(b.slice(a,a+3));return></b;d=e++)c+=a[d].x*a[e].y-></e;k+=c)l=a[k],b=a[k+1],l<p&&(p=l),b<r&&(r=b),l></m;l++){var></r;t++){var></g;f+=2)a.frombufferattribute(d,f),b.frombufferattribute(d,f+1),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceto(b);c.addattribute("linedistance",new></d.near||v></m-1;g+=n)v=b.distancesqtosegment(k[g],k[g+1],l,h),v></d.near||v></r;g+=n)k.fromarray(u,3*g),m.fromarray(u,3*g+3),v=b.distancesqtosegment(k,m,l,h),v></d.near||v></f;e++)d[e].object.visible=!1}}}(),tojson:function(a){a=d.prototype.tojson.call(this,a);a.object.levels=[];for(var></c;b++){var></c;h++){var></=r-u&&0<=g-y)return></=t&&0></=y&&g<=y)return></=n&&0></=u&&r<=u)return></b?e.multiplyscalar(1></=g?g:c,b)},intersectsbox:function(){var></c||c!==c)c=a;return></c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g></=c){var></=a.radius},distancetoplane:function(a){var></=p?(h=1></t){d=k*l-m;e=k*m-l;var></this.alphatest&&(d.alphatest=this.alphatest);!0===this.premultipliedalpha&&(d.premultipliedalpha=></=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=></a|0},enable:function(a){this.mask=this.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return></d?6:0);break;case></16^255*this.g<<8^255*this.b<<0},gethexstring:function(){return("000000"+this.gethex().tostring(16)).slice(-6)},gethsl:function(a){void></a.length&&(c=tg[a],></2></d&&--d;return></a.length;c++){var></fog_vertex></clipping_planes_vertex></logdepthbuf_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></fog_pars_vertex></uv_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></alphatest_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></fog_pars_fragment></map_pars_fragment></uv_pars_fragment></common></fog_vertex></shadowmap_vertex></worldpos_vertex></project_vertex></begin_vertex></shadowmap_pars_vertex></fog_pars_vertex></fog_fragment></shadowmask_pars_fragment></shadowmap_pars_fragment></lights_pars_begin></bsdfs></fog_pars_fragment></packing></common></fog_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></morphtarget_vertex></begin_vertex></color_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></alphatest_fragment></color_fragment></map_particle_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></fog_pars_fragment></map_particle_pars_fragment></color_pars_fragment></common></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></uv_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></normal_fragment_maps></normal_fragment_begin></logdepthbuf_fragment></logdepthbuf_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></uv_pars_fragment></packing></fog_vertex></shadowmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></displacementmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></dithering_fragment></premultiplied_alpha_fragment></fog_fragment></encodings_fragment></tonemapping_fragment></aomap_fragment></lights_fragment_end></lights_fragment_maps></lights_fragment_begin></lights_physical_fragment></emissivemap_fragment></normal_fragment_maps></normal_fragment_begin></metalnessmap_fragment></roughnessmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></metalnessmap_pars_fragment></roughnessmap_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></shadowmap_pars_fragment></lights_physical_pars_fragment></lights_pars_begin></fog_pars_fragment></envmap_physical_pars_fragment></envmap_pars_fragment></cube_uv_reflection_fragment></bsdfs></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></dithering_pars_fragment></packing></common></fog_vertex></shadowmap_vertex></envmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></envmap_pars_vertex></displacementmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></dithering_fragment></premultiplied_alpha_fragment></fog_fragment></encodings_fragment></tonemapping_fragment></envmap_fragment></aomap_fragment></lights_fragment_end></lights_fragment_maps></lights_fragment_begin></lights_phong_fragment></emissivemap_fragment></normal_fragment_maps></normal_fragment_begin></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></shadowmap_pars_fragment></lights_phong_pars_fragment></lights_pars_begin></bsdfs></fog_pars_fragment></gradientmap_pars_fragment></envmap_pars_fragment></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></dithering_pars_fragment></packing></common></fog_vertex></shadowmap_vertex></lights_lambert_vertex></envmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></lights_pars_begin></bsdfs></envmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></dithering_fragment></premultiplied_alpha_fragment></fog_fragment></encodings_fragment></tonemapping_fragment></envmap_fragment></aomap_fragment></lightmap_fragment></emissivemap_fragment></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></shadowmask_pars_fragment></shadowmap_pars_fragment></fog_pars_fragment></lights_pars_begin></bsdfs></envmap_pars_fragment></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></dithering_pars_fragment></packing></common></fog_vertex></envmap_vertex></clipping_planes_vertex></worldpos_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></morphnormal_vertex></beginnormal_vertex></skinbase_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></envmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></envmap_fragment></aomap_fragment></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></fog_pars_fragment></envmap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></common></fog_vertex></clipping_planes_vertex></logdepthbuf_vertex></color_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></fog_pars_vertex></color_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></color_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></fog_pars_fragment></color_pars_fragment></common></project_vertex></begin_vertex></common></common></clipping_planes_vertex></worldpos_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></skinnormal_vertex></morphnormal_vertex></beginnormal_vertex></skinbase_vertex></uv_vertex></clipping_planes_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></common></alphatest_fragment></alphamap_fragment></map_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv_pars_fragment></packing></common></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></skinnormal_vertex></morphnormal_vertex></beginnormal_vertex></skinbase_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></common></logdepthbuf_fragment></alphatest_fragment></alphamap_fragment></map_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv_pars_fragment></packing></common></project_vertex></begin_vertex></common></=></=></e.normal.x?b.max.x:b.min.x;a.y=0<e.normal.y?b.max.y:b.min.y;a.z=0<e.normal.z?b.max.z:b.min.z;if(0></a)return!1;return!0},intersectsbox:function(){var></b},intersectsbox:function(a){return></a||0></e))return></=this.radius*this.radius},distancetopoint:function(a){return></f;e++)c=math.max(c,d.distancetosquared(b[e]));this.radius=math.sqrt(c);return></=e;f+=3){h.fromarray(a,f);var></=b.radius*b.radius}}(),intersectsplane:function(a){if(0<a.normal.x){var></this.min.z||a.min.z></this.min.y||a.min.y></=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&></this.min.z||a.z></this.min.y||a.y></c;b++)this.expandbypoint(a[b]);return></k;h++){var></k;h+=3){var></a.y)switch(this.wrapt){case></a.x)switch(this.wraps){case></b.width||2048<b.height?b.todataurl("image></d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix3(this),b.setxyz(c,a.x,a.y,a.z);return></=g)return></m?(c=.5></=t?1:-1,r=1-t*t;r></d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix4(this),b.setxyz(c,a.x,a.y,a.z);return></=b)return></=b)return></a?1:+a});!1==="name"in></a.children.length;c++)b.push.apply(b,xf(a.children[c]));return></e;d++)ve(a[d],></=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],></h;g++){var></-number.epsilon?f<-number.epsilon&&(a=!0):math.sign(e)===math.sign(g)&&(a=!0),a?(f=-e,e=math.sqrt(h)):(f=d,d=e,e=math.sqrt(h></b&&a[b-1].equals(a[0])&&a.pop()}function></=ma(a,b,a.next)&&0<=ma(a,a.prev,b):0></8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function></k?d:f,e,></c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return></=d&&g></(r.next.x-r.x)*(v-r.y)></=ma(p.prev,p,p.next)){r=!1;break></n.x?q.x<l.x?q.x:l.x:n.x<l.x?n.x:l.x,q.y<n.y?q.y<l.y?q.y:l.y:n.y<l.y?n.y:l.y,t,p,x);t=ae(w,b,t,p,x);for(p=r.nextz;p&&p.z<=t;){if(p!==r.prev&&p!==r.next&&ud(q.x,q.y,n.x,n.y,l.x,l.y,p.x,p.y)&&0<=ma(p.prev,p,p.next)){r=!1;break></l&&(n++,v=v.nextz,v);m++);for(t=l;0<n||0<t&&v;)0!==n&&(0===t||!v||k.z<=v.z)?(m=k,k=k.nextz,n--):(m=v,v=v.nextz,t--),r?r.nextz=m:h=m,m.prevz=r,r=m;k=v}r.nextz=null;l*=2}while(1<q)}for(h=a;a.prev!==a.next;){k=a.prev;v=a.next;if(f)a:{r=a;t=d;var></=d;t++){var></b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var></=c;t++){var></d;m++)for(c=0;3></e;++a)for(m=u[a],c=m.start,d=m.count,m=c,d=c+d;m<d;m+=3)for(c=0;3></=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&f.readpixels(b,c,d,e,da.convert(m),da.convert(q),f):console.error("three.webglrenderer.readrendertargetpixels:></=l){var></h.length;a++){b=h[a];b:{c=a;for(var></d;a++)b=z[a],1023!==b.format&&1022!==b.format?-1<c.getcompressedtextureformats().indexof(p)?c.compressedteximage2d(a.texture_cube_map_positive_x+></b.version&&r.__version!==b.version)if(l=b.image,void></parseint(d);c++)a+=e.replace(></"+c+"></d)return></e;z++){var></arguments.length&&console.error("three.matrix4:>